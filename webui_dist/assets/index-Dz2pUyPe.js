(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();/**
* @vue/shared v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Ii(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const Fe={},$n=[],Lt=()=>{},rl=()=>!1,ms=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Ri=e=>e.startsWith("onUpdate:"),et=Object.assign,ki=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},oc=Object.prototype.hasOwnProperty,Pe=(e,t)=>oc.call(e,t),re=Array.isArray,zn=e=>Do(e)==="[object Map]",eo=e=>Do(e)==="[object Set]",er=e=>Do(e)==="[object Date]",ve=e=>typeof e=="function",Xe=e=>typeof e=="string",Ft=e=>typeof e=="symbol",He=e=>e!==null&&typeof e=="object",ll=e=>(He(e)||ve(e))&&ve(e.then)&&ve(e.catch),al=Object.prototype.toString,Do=e=>al.call(e),sc=e=>Do(e).slice(8,-1),cl=e=>Do(e)==="[object Object]",gs=e=>Xe(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,uo=Ii(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ws=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},ic=/-\w/g,pn=ws(e=>e.replace(ic,t=>t.slice(1).toUpperCase())),rc=/\B([A-Z])/g,Tn=ws(e=>e.replace(rc,"-$1").toLowerCase()),ul=ws(e=>e.charAt(0).toUpperCase()+e.slice(1)),Ms=ws(e=>e?`on${ul(e)}`:""),fn=(e,t)=>!Object.is(e,t),qo=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},dl=(e,t,n,o=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:o,value:n})},vs=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let tr;const _s=()=>tr||(tr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function ys(e){if(re(e)){const t={};for(let n=0;n<e.length;n++){const o=e[n],s=Xe(o)?uc(o):ys(o);if(s)for(const r in s)t[r]=s[r]}return t}else if(Xe(e)||He(e))return e}const lc=/;(?![^(]*\))/g,ac=/:([^]+)/,cc=/\/\*[^]*?\*\//g;function uc(e){const t={};return e.replace(cc,"").split(lc).forEach(n=>{if(n){const o=n.split(ac);o.length>1&&(t[o[0].trim()]=o[1].trim())}}),t}function Gn(e){let t="";if(Xe(e))t=e;else if(re(e))for(let n=0;n<e.length;n++){const o=Gn(e[n]);o&&(t+=o+" ")}else if(He(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const dc="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",fc=Ii(dc);function fl(e){return!!e||e===""}function hc(e,t){if(e.length!==t.length)return!1;let n=!0;for(let o=0;n&&o<e.length;o++)n=kn(e[o],t[o]);return n}function kn(e,t){if(e===t)return!0;let n=er(e),o=er(t);if(n||o)return n&&o?e.getTime()===t.getTime():!1;if(n=Ft(e),o=Ft(t),n||o)return e===t;if(n=re(e),o=re(t),n||o)return n&&o?hc(e,t):!1;if(n=He(e),o=He(t),n||o){if(!n||!o)return!1;const s=Object.keys(e).length,r=Object.keys(t).length;if(s!==r)return!1;for(const a in e){const i=e.hasOwnProperty(a),l=t.hasOwnProperty(a);if(i&&!l||!i&&l||!kn(e[a],t[a]))return!1}}return String(e)===String(t)}function Ni(e,t){return e.findIndex(n=>kn(n,t))}const hl=e=>!!(e&&e.__v_isRef===!0),ie=e=>Xe(e)?e:e==null?"":re(e)||He(e)&&(e.toString===al||!ve(e.toString))?hl(e)?ie(e.value):JSON.stringify(e,pl,2):String(e),pl=(e,t)=>hl(t)?pl(e,t.value):zn(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[o,s],r)=>(n[Ps(o,r)+" =>"]=s,n),{})}:eo(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>Ps(n))}:Ft(t)?Ps(t):He(t)&&!re(t)&&!cl(t)?String(t):t,Ps=(e,t="")=>{var n;return Ft(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let nt;class ml{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=nt,!t&&nt&&(this.index=(nt.scopes||(nt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=nt;try{return nt=this,t()}finally{nt=n}}}on(){++this._on===1&&(this.prevScope=nt,nt=this)}off(){this._on>0&&--this._on===0&&(nt=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,o;for(n=0,o=this.effects.length;n<o;n++)this.effects[n].stop();for(this.effects.length=0,n=0,o=this.cleanups.length;n<o;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,o=this.scopes.length;n<o;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function gl(e){return new ml(e)}function wl(){return nt}function pc(e,t=!1){nt&&nt.cleanups.push(e)}let We;const Ls=new WeakSet;class vl{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,nt&&nt.active&&nt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Ls.has(this)&&(Ls.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||yl(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,nr(this),bl(this);const t=We,n=Rt;We=this,Rt=!0;try{return this.fn()}finally{El(this),We=t,Rt=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Di(t);this.deps=this.depsTail=void 0,nr(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Ls.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){si(this)&&this.run()}get dirty(){return si(this)}}let _l=0,fo,ho;function yl(e,t=!1){if(e.flags|=8,t){e.next=ho,ho=e;return}e.next=fo,fo=e}function Ti(){_l++}function Oi(){if(--_l>0)return;if(ho){let t=ho;for(ho=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;fo;){let t=fo;for(fo=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(o){e||(e=o)}t=n}}if(e)throw e}function bl(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function El(e){let t,n=e.depsTail,o=n;for(;o;){const s=o.prevDep;o.version===-1?(o===n&&(n=s),Di(o),mc(o)):t=o,o.dep.activeLink=o.prevActiveLink,o.prevActiveLink=void 0,o=s}e.deps=t,e.depsTail=n}function si(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Cl(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Cl(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===xo)||(e.globalVersion=xo,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!si(e))))return;e.flags|=2;const t=e.dep,n=We,o=Rt;We=e,Rt=!0;try{bl(e);const s=e.fn(e._value);(t.version===0||fn(s,e._value))&&(e.flags|=128,e._value=s,t.version++)}catch(s){throw t.version++,s}finally{We=n,Rt=o,El(e),e.flags&=-3}}function Di(e,t=!1){const{dep:n,prevSub:o,nextSub:s}=e;if(o&&(o.nextSub=s,e.prevSub=void 0),s&&(s.prevSub=o,e.nextSub=void 0),n.subs===e&&(n.subs=o,!o&&n.computed)){n.computed.flags&=-5;for(let r=n.computed.deps;r;r=r.nextDep)Di(r,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function mc(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let Rt=!0;const Sl=[];function Yt(){Sl.push(Rt),Rt=!1}function Xt(){const e=Sl.pop();Rt=e===void 0?!0:e}function nr(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=We;We=void 0;try{t()}finally{We=n}}}let xo=0;class gc{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Mi{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!We||!Rt||We===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==We)n=this.activeLink=new gc(We,this),We.deps?(n.prevDep=We.depsTail,We.depsTail.nextDep=n,We.depsTail=n):We.deps=We.depsTail=n,xl(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const o=n.nextDep;o.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=o),n.prevDep=We.depsTail,n.nextDep=void 0,We.depsTail.nextDep=n,We.depsTail=n,We.deps===n&&(We.deps=o)}return n}trigger(t){this.version++,xo++,this.notify(t)}notify(t){Ti();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Oi()}}}function xl(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let o=t.deps;o;o=o.nextDep)xl(o)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const ts=new WeakMap,An=Symbol(""),ii=Symbol(""),Ao=Symbol("");function ot(e,t,n){if(Rt&&We){let o=ts.get(e);o||ts.set(e,o=new Map);let s=o.get(n);s||(o.set(n,s=new Mi),s.map=o,s.key=n),s.track()}}function zt(e,t,n,o,s,r){const a=ts.get(e);if(!a){xo++;return}const i=l=>{l&&l.trigger()};if(Ti(),t==="clear")a.forEach(i);else{const l=re(e),u=l&&gs(n);if(l&&n==="length"){const d=Number(o);a.forEach((c,f)=>{(f==="length"||f===Ao||!Ft(f)&&f>=d)&&i(c)})}else switch((n!==void 0||a.has(void 0))&&i(a.get(n)),u&&i(a.get(Ao)),t){case"add":l?u&&i(a.get("length")):(i(a.get(An)),zn(e)&&i(a.get(ii)));break;case"delete":l||(i(a.get(An)),zn(e)&&i(a.get(ii)));break;case"set":zn(e)&&i(a.get(An));break}}Oi()}function wc(e,t){const n=ts.get(e);return n&&n.get(t)}function Dn(e){const t=Oe(e);return t===e?t:(ot(t,"iterate",Ao),yt(e)?t:t.map(Nt))}function bs(e){return ot(e=Oe(e),"iterate",Ao),e}function sn(e,t){return Jt(e)?Kn(Gt(e)?Nt(t):t):Nt(t)}const vc={__proto__:null,[Symbol.iterator](){return Bs(this,Symbol.iterator,e=>sn(this,e))},concat(...e){return Dn(this).concat(...e.map(t=>re(t)?Dn(t):t))},entries(){return Bs(this,"entries",e=>(e[1]=sn(this,e[1]),e))},every(e,t){return jt(this,"every",e,t,void 0,arguments)},filter(e,t){return jt(this,"filter",e,t,n=>n.map(o=>sn(this,o)),arguments)},find(e,t){return jt(this,"find",e,t,n=>sn(this,n),arguments)},findIndex(e,t){return jt(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return jt(this,"findLast",e,t,n=>sn(this,n),arguments)},findLastIndex(e,t){return jt(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return jt(this,"forEach",e,t,void 0,arguments)},includes(...e){return Fs(this,"includes",e)},indexOf(...e){return Fs(this,"indexOf",e)},join(e){return Dn(this).join(e)},lastIndexOf(...e){return Fs(this,"lastIndexOf",e)},map(e,t){return jt(this,"map",e,t,void 0,arguments)},pop(){return oo(this,"pop")},push(...e){return oo(this,"push",e)},reduce(e,...t){return or(this,"reduce",e,t)},reduceRight(e,...t){return or(this,"reduceRight",e,t)},shift(){return oo(this,"shift")},some(e,t){return jt(this,"some",e,t,void 0,arguments)},splice(...e){return oo(this,"splice",e)},toReversed(){return Dn(this).toReversed()},toSorted(e){return Dn(this).toSorted(e)},toSpliced(...e){return Dn(this).toSpliced(...e)},unshift(...e){return oo(this,"unshift",e)},values(){return Bs(this,"values",e=>sn(this,e))}};function Bs(e,t,n){const o=bs(e),s=o[t]();return o!==e&&!yt(e)&&(s._next=s.next,s.next=()=>{const r=s._next();return r.done||(r.value=n(r.value)),r}),s}const _c=Array.prototype;function jt(e,t,n,o,s,r){const a=bs(e),i=a!==e&&!yt(e),l=a[t];if(l!==_c[t]){const c=l.apply(e,r);return i?Nt(c):c}let u=n;a!==e&&(i?u=function(c,f){return n.call(this,sn(e,c),f,e)}:n.length>2&&(u=function(c,f){return n.call(this,c,f,e)}));const d=l.call(a,u,o);return i&&s?s(d):d}function or(e,t,n,o){const s=bs(e);let r=n;return s!==e&&(yt(e)?n.length>3&&(r=function(a,i,l){return n.call(this,a,i,l,e)}):r=function(a,i,l){return n.call(this,a,sn(e,i),l,e)}),s[t](r,...o)}function Fs(e,t,n){const o=Oe(e);ot(o,"iterate",Ao);const s=o[t](...n);return(s===-1||s===!1)&&Es(n[0])?(n[0]=Oe(n[0]),o[t](...n)):s}function oo(e,t,n=[]){Yt(),Ti();const o=Oe(e)[t].apply(e,n);return Oi(),Xt(),o}const yc=Ii("__proto__,__v_isRef,__isVue"),Al=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Ft));function bc(e){Ft(e)||(e=String(e));const t=Oe(this);return ot(t,"has",e),t.hasOwnProperty(e)}class Il{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,o){if(n==="__v_skip")return t.__v_skip;const s=this._isReadonly,r=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return r;if(n==="__v_raw")return o===(s?r?Tc:Tl:r?Nl:kl).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(o)?t:void 0;const a=re(t);if(!s){let l;if(a&&(l=vc[n]))return l;if(n==="hasOwnProperty")return bc}const i=Reflect.get(t,n,qe(t)?t:o);if((Ft(n)?Al.has(n):yc(n))||(s||ot(t,"get",n),r))return i;if(qe(i)){const l=a&&gs(n)?i:i.value;return s&&He(l)?li(l):l}return He(i)?s?li(i):mn(i):i}}class Rl extends Il{constructor(t=!1){super(!1,t)}set(t,n,o,s){let r=t[n];const a=re(t)&&gs(n);if(!this._isShallow){const u=Jt(r);if(!yt(o)&&!Jt(o)&&(r=Oe(r),o=Oe(o)),!a&&qe(r)&&!qe(o))return u||(r.value=o),!0}const i=a?Number(n)<t.length:Pe(t,n),l=Reflect.set(t,n,o,qe(t)?t:s);return t===Oe(s)&&(i?fn(o,r)&&zt(t,"set",n,o):zt(t,"add",n,o)),l}deleteProperty(t,n){const o=Pe(t,n);t[n];const s=Reflect.deleteProperty(t,n);return s&&o&&zt(t,"delete",n,void 0),s}has(t,n){const o=Reflect.has(t,n);return(!Ft(n)||!Al.has(n))&&ot(t,"has",n),o}ownKeys(t){return ot(t,"iterate",re(t)?"length":An),Reflect.ownKeys(t)}}class Ec extends Il{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const Cc=new Rl,Sc=new Ec,xc=new Rl(!0);const ri=e=>e,Fo=e=>Reflect.getPrototypeOf(e);function Ac(e,t,n){return function(...o){const s=this.__v_raw,r=Oe(s),a=zn(r),i=e==="entries"||e===Symbol.iterator&&a,l=e==="keys"&&a,u=s[e](...o),d=n?ri:t?Kn:Nt;return!t&&ot(r,"iterate",l?ii:An),et(Object.create(u),{next(){const{value:c,done:f}=u.next();return f?{value:c,done:f}:{value:i?[d(c[0]),d(c[1])]:d(c),done:f}}})}}function Ho(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Ic(e,t){const n={get(s){const r=this.__v_raw,a=Oe(r),i=Oe(s);e||(fn(s,i)&&ot(a,"get",s),ot(a,"get",i));const{has:l}=Fo(a),u=t?ri:e?Kn:Nt;if(l.call(a,s))return u(r.get(s));if(l.call(a,i))return u(r.get(i));r!==a&&r.get(s)},get size(){const s=this.__v_raw;return!e&&ot(Oe(s),"iterate",An),s.size},has(s){const r=this.__v_raw,a=Oe(r),i=Oe(s);return e||(fn(s,i)&&ot(a,"has",s),ot(a,"has",i)),s===i?r.has(s):r.has(s)||r.has(i)},forEach(s,r){const a=this,i=a.__v_raw,l=Oe(i),u=t?ri:e?Kn:Nt;return!e&&ot(l,"iterate",An),i.forEach((d,c)=>s.call(r,u(d),u(c),a))}};return et(n,e?{add:Ho("add"),set:Ho("set"),delete:Ho("delete"),clear:Ho("clear")}:{add(s){!t&&!yt(s)&&!Jt(s)&&(s=Oe(s));const r=Oe(this);return Fo(r).has.call(r,s)||(r.add(s),zt(r,"add",s,s)),this},set(s,r){!t&&!yt(r)&&!Jt(r)&&(r=Oe(r));const a=Oe(this),{has:i,get:l}=Fo(a);let u=i.call(a,s);u||(s=Oe(s),u=i.call(a,s));const d=l.call(a,s);return a.set(s,r),u?fn(r,d)&&zt(a,"set",s,r):zt(a,"add",s,r),this},delete(s){const r=Oe(this),{has:a,get:i}=Fo(r);let l=a.call(r,s);l||(s=Oe(s),l=a.call(r,s)),i&&i.call(r,s);const u=r.delete(s);return l&&zt(r,"delete",s,void 0),u},clear(){const s=Oe(this),r=s.size!==0,a=s.clear();return r&&zt(s,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=Ac(s,e,t)}),n}function Pi(e,t){const n=Ic(e,t);return(o,s,r)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?o:Reflect.get(Pe(n,s)&&s in o?n:o,s,r)}const Rc={get:Pi(!1,!1)},kc={get:Pi(!1,!0)},Nc={get:Pi(!0,!1)};const kl=new WeakMap,Nl=new WeakMap,Tl=new WeakMap,Tc=new WeakMap;function Oc(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Dc(e){return e.__v_skip||!Object.isExtensible(e)?0:Oc(sc(e))}function mn(e){return Jt(e)?e:Li(e,!1,Cc,Rc,kl)}function Ol(e){return Li(e,!1,xc,kc,Nl)}function li(e){return Li(e,!0,Sc,Nc,Tl)}function Li(e,t,n,o,s){if(!He(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const r=Dc(e);if(r===0)return e;const a=s.get(e);if(a)return a;const i=new Proxy(e,r===2?o:n);return s.set(e,i),i}function Gt(e){return Jt(e)?Gt(e.__v_raw):!!(e&&e.__v_isReactive)}function Jt(e){return!!(e&&e.__v_isReadonly)}function yt(e){return!!(e&&e.__v_isShallow)}function Es(e){return e?!!e.__v_raw:!1}function Oe(e){const t=e&&e.__v_raw;return t?Oe(t):e}function Bi(e){return!Pe(e,"__v_skip")&&Object.isExtensible(e)&&dl(e,"__v_skip",!0),e}const Nt=e=>He(e)?mn(e):e,Kn=e=>He(e)?li(e):e;function qe(e){return e?e.__v_isRef===!0:!1}function kt(e){return Dl(e,!1)}function Mc(e){return Dl(e,!0)}function Dl(e,t){return qe(e)?e:new Pc(e,t)}class Pc{constructor(t,n){this.dep=new Mi,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:Oe(t),this._value=n?t:Nt(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,o=this.__v_isShallow||yt(t)||Jt(t);t=o?t:Oe(t),fn(t,n)&&(this._rawValue=t,this._value=o?t:Nt(t),this.dep.trigger())}}function J(e){return qe(e)?e.value:e}const Lc={get:(e,t,n)=>t==="__v_raw"?e:J(Reflect.get(e,t,n)),set:(e,t,n,o)=>{const s=e[t];return qe(s)&&!qe(n)?(s.value=n,!0):Reflect.set(e,t,n,o)}};function Ml(e){return Gt(e)?e:new Proxy(e,Lc)}function Bc(e){const t=re(e)?new Array(e.length):{};for(const n in e)t[n]=Hc(e,n);return t}class Fc{constructor(t,n,o){this._object=t,this._key=n,this._defaultValue=o,this.__v_isRef=!0,this._value=void 0,this._raw=Oe(t);let s=!0,r=t;if(!re(t)||!gs(String(n)))do s=!Es(r)||yt(r);while(s&&(r=r.__v_raw));this._shallow=s}get value(){let t=this._object[this._key];return this._shallow&&(t=J(t)),this._value=t===void 0?this._defaultValue:t}set value(t){if(this._shallow&&qe(this._raw[this._key])){const n=this._object[this._key];if(qe(n)){n.value=t;return}}this._object[this._key]=t}get dep(){return wc(this._raw,this._key)}}function Hc(e,t,n){return new Fc(e,t,n)}class Wc{constructor(t,n,o){this.fn=t,this.setter=n,this._value=void 0,this.dep=new Mi(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=xo-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=o}notify(){if(this.flags|=16,!(this.flags&8)&&We!==this)return yl(this,!0),!0}get value(){const t=this.dep.track();return Cl(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function jc(e,t,n=!1){let o,s;return ve(e)?o=e:(o=e.get,s=e.set),new Wc(o,s,n)}const Wo={},ns=new WeakMap;let Cn;function Uc(e,t=!1,n=Cn){if(n){let o=ns.get(n);o||ns.set(n,o=[]),o.push(e)}}function $c(e,t,n=Fe){const{immediate:o,deep:s,once:r,scheduler:a,augmentJob:i,call:l}=n,u=y=>s?y:yt(y)||s===!1||s===0?Vt(y,1):Vt(y);let d,c,f,h,w=!1,p=!1;if(qe(e)?(c=()=>e.value,w=yt(e)):Gt(e)?(c=()=>u(e),w=!0):re(e)?(p=!0,w=e.some(y=>Gt(y)||yt(y)),c=()=>e.map(y=>{if(qe(y))return y.value;if(Gt(y))return u(y);if(ve(y))return l?l(y,2):y()})):ve(e)?t?c=l?()=>l(e,2):e:c=()=>{if(f){Yt();try{f()}finally{Xt()}}const y=Cn;Cn=d;try{return l?l(e,3,[h]):e(h)}finally{Cn=y}}:c=Lt,t&&s){const y=c,R=s===!0?1/0:s;c=()=>Vt(y(),R)}const v=wl(),_=()=>{d.stop(),v&&v.active&&ki(v.effects,d)};if(r&&t){const y=t;t=(...R)=>{y(...R),_()}}let E=p?new Array(e.length).fill(Wo):Wo;const S=y=>{if(!(!(d.flags&1)||!d.dirty&&!y))if(t){const R=d.run();if(s||w||(p?R.some((k,D)=>fn(k,E[D])):fn(R,E))){f&&f();const k=Cn;Cn=d;try{const D=[R,E===Wo?void 0:p&&E[0]===Wo?[]:E,h];E=R,l?l(t,3,D):t(...D)}finally{Cn=k}}}else d.run()};return i&&i(S),d=new vl(c),d.scheduler=a?()=>a(S,!1):S,h=y=>Uc(y,!1,d),f=d.onStop=()=>{const y=ns.get(d);if(y){if(l)l(y,4);else for(const R of y)R();ns.delete(d)}},t?o?S(!0):E=d.run():a?a(S.bind(null,!0),!0):d.run(),_.pause=d.pause.bind(d),_.resume=d.resume.bind(d),_.stop=_,_}function Vt(e,t=1/0,n){if(t<=0||!He(e)||e.__v_skip||(n=n||new Map,(n.get(e)||0)>=t))return e;if(n.set(e,t),t--,qe(e))Vt(e.value,t,n);else if(re(e))for(let o=0;o<e.length;o++)Vt(e[o],t,n);else if(eo(e)||zn(e))e.forEach(o=>{Vt(o,t,n)});else if(cl(e)){for(const o in e)Vt(e[o],t,n);for(const o of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,o)&&Vt(e[o],t,n)}return e}/**
* @vue/runtime-core v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Mo(e,t,n,o){try{return o?e(...o):e()}catch(s){Cs(s,t,n)}}function Ht(e,t,n,o){if(ve(e)){const s=Mo(e,t,n,o);return s&&ll(s)&&s.catch(r=>{Cs(r,t,n)}),s}if(re(e)){const s=[];for(let r=0;r<e.length;r++)s.push(Ht(e[r],t,n,o));return s}}function Cs(e,t,n,o=!0){const s=t?t.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:a}=t&&t.appContext.config||Fe;if(t){let i=t.parent;const l=t.proxy,u=`https://vuejs.org/error-reference/#runtime-${n}`;for(;i;){const d=i.ec;if(d){for(let c=0;c<d.length;c++)if(d[c](e,l,u)===!1)return}i=i.parent}if(r){Yt(),Mo(r,null,10,[e,l,u]),Xt();return}}zc(e,n,s,o,a)}function zc(e,t,n,o=!0,s=!1){if(s)throw e;console.error(e)}const ct=[];let Dt=-1;const Vn=[];let rn=null,Bn=0;const Pl=Promise.resolve();let os=null;function On(e){const t=os||Pl;return e?t.then(this?e.bind(this):e):t}function Vc(e){let t=Dt+1,n=ct.length;for(;t<n;){const o=t+n>>>1,s=ct[o],r=Io(s);r<e||r===e&&s.flags&2?t=o+1:n=o}return t}function Fi(e){if(!(e.flags&1)){const t=Io(e),n=ct[ct.length-1];!n||!(e.flags&2)&&t>=Io(n)?ct.push(e):ct.splice(Vc(t),0,e),e.flags|=1,Ll()}}function Ll(){os||(os=Pl.then(Fl))}function qc(e){re(e)?Vn.push(...e):rn&&e.id===-1?rn.splice(Bn+1,0,e):e.flags&1||(Vn.push(e),e.flags|=1),Ll()}function sr(e,t,n=Dt+1){for(;n<ct.length;n++){const o=ct[n];if(o&&o.flags&2){if(e&&o.id!==e.uid)continue;ct.splice(n,1),n--,o.flags&4&&(o.flags&=-2),o(),o.flags&4||(o.flags&=-2)}}}function Bl(e){if(Vn.length){const t=[...new Set(Vn)].sort((n,o)=>Io(n)-Io(o));if(Vn.length=0,rn){rn.push(...t);return}for(rn=t,Bn=0;Bn<rn.length;Bn++){const n=rn[Bn];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}rn=null,Bn=0}}const Io=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Fl(e){try{for(Dt=0;Dt<ct.length;Dt++){const t=ct[Dt];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Mo(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Dt<ct.length;Dt++){const t=ct[Dt];t&&(t.flags&=-2)}Dt=-1,ct.length=0,Bl(),os=null,(ct.length||Vn.length)&&Fl()}}let Et=null,Hl=null;function ss(e){const t=Et;return Et=e,Hl=e&&e.type.__scopeId||null,t}function ai(e,t=Et,n){if(!t||e._n)return e;const o=(...s)=>{o._d&&ls(-1);const r=ss(t);let a;try{a=e(...s)}finally{ss(r),o._d&&ls(1)}return a};return o._n=!0,o._c=!0,o._d=!0,o}function Pt(e,t){if(Et===null)return e;const n=Is(Et),o=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[r,a,i,l=Fe]=t[s];r&&(ve(r)&&(r={mounted:r,updated:r}),r.deep&&Vt(a),o.push({dir:r,instance:n,value:a,oldValue:void 0,arg:i,modifiers:l}))}return e}function _n(e,t,n,o){const s=e.dirs,r=t&&t.dirs;for(let a=0;a<s.length;a++){const i=s[a];r&&(i.oldValue=r[a].value);let l=i.dir[o];l&&(Yt(),Ht(l,n,8,[e.el,i,e,t]),Xt())}}function Go(e,t){if(ut){let n=ut.provides;const o=ut.parent&&ut.parent.provides;o===n&&(n=ut.provides=Object.create(o)),n[e]=t}}function Ct(e,t,n=!1){const o=da();if(o||Rn){let s=Rn?Rn._context.provides:o?o.parent==null||o.ce?o.vnode.appContext&&o.vnode.appContext.provides:o.parent.provides:void 0;if(s&&e in s)return s[e];if(arguments.length>1)return n&&ve(t)?t.call(o&&o.proxy):t}}function Gc(){return!!(da()||Rn)}const Kc=Symbol.for("v-scx"),Yc=()=>Ct(Kc);function In(e,t,n){return Wl(e,t,n)}function Wl(e,t,n=Fe){const{immediate:o,deep:s,flush:r,once:a}=n,i=et({},n),l=t&&o||!t&&r!=="post";let u;if(No){if(r==="sync"){const h=Yc();u=h.__watcherHandles||(h.__watcherHandles=[])}else if(!l){const h=()=>{};return h.stop=Lt,h.resume=Lt,h.pause=Lt,h}}const d=ut;i.call=(h,w,p)=>Ht(h,d,w,p);let c=!1;r==="post"?i.scheduler=h=>{wt(h,d&&d.suspense)}:r!=="sync"&&(c=!0,i.scheduler=(h,w)=>{w?h():Fi(h)}),i.augmentJob=h=>{t&&(h.flags|=4),c&&(h.flags|=2,d&&(h.id=d.uid,h.i=d))};const f=$c(e,t,i);return No&&(u?u.push(f):l&&f()),f}function Xc(e,t,n){const o=this.proxy,s=Xe(e)?e.includes(".")?jl(o,e):()=>o[e]:e.bind(o,o);let r;ve(t)?r=t:(r=t.handler,n=t);const a=Po(this),i=Wl(s,r.bind(o),n);return a(),i}function jl(e,t){const n=t.split(".");return()=>{let o=e;for(let s=0;s<n.length&&o;s++)o=o[n[s]];return o}}const Jc=Symbol("_vte"),Zc=e=>e.__isTeleport,Qc=Symbol("_leaveCb");function Hi(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Hi(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function to(e,t){return ve(e)?et({name:e.name},t,{setup:e}):e}function Ul(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const is=new WeakMap;function po(e,t,n,o,s=!1){if(re(e)){e.forEach((w,p)=>po(w,t&&(re(t)?t[p]:t),n,o,s));return}if(mo(o)&&!s){o.shapeFlag&512&&o.type.__asyncResolved&&o.component.subTree.component&&po(e,t,n,o.component.subTree);return}const r=o.shapeFlag&4?Is(o.component):o.el,a=s?null:r,{i,r:l}=e,u=t&&t.r,d=i.refs===Fe?i.refs={}:i.refs,c=i.setupState,f=Oe(c),h=c===Fe?rl:w=>Pe(f,w);if(u!=null&&u!==l){if(ir(t),Xe(u))d[u]=null,h(u)&&(c[u]=null);else if(qe(u)){u.value=null;const w=t;w.k&&(d[w.k]=null)}}if(ve(l))Mo(l,i,12,[a,d]);else{const w=Xe(l),p=qe(l);if(w||p){const v=()=>{if(e.f){const _=w?h(l)?c[l]:d[l]:l.value;if(s)re(_)&&ki(_,r);else if(re(_))_.includes(r)||_.push(r);else if(w)d[l]=[r],h(l)&&(c[l]=d[l]);else{const E=[r];l.value=E,e.k&&(d[e.k]=E)}}else w?(d[l]=a,h(l)&&(c[l]=a)):p&&(l.value=a,e.k&&(d[e.k]=a))};if(a){const _=()=>{v(),is.delete(e)};_.id=-1,is.set(e,_),wt(_,n)}else ir(e),v()}}}function ir(e){const t=is.get(e);t&&(t.flags|=8,is.delete(e))}_s().requestIdleCallback;_s().cancelIdleCallback;const mo=e=>!!e.type.__asyncLoader,$l=e=>e.type.__isKeepAlive;function eu(e,t){zl(e,"a",t)}function tu(e,t){zl(e,"da",t)}function zl(e,t,n=ut){const o=e.__wdc||(e.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(Ss(t,o,n),n){let s=n.parent;for(;s&&s.parent;)$l(s.parent.vnode)&&nu(o,t,n,s),s=s.parent}}function nu(e,t,n,o){const s=Ss(t,e,o,!0);ql(()=>{ki(o[t],s)},n)}function Ss(e,t,n=ut,o=!1){if(n){const s=n[e]||(n[e]=[]),r=t.__weh||(t.__weh=(...a)=>{Yt();const i=Po(n),l=Ht(t,n,e,a);return i(),Xt(),l});return o?s.unshift(r):s.push(r),r}}const Qt=e=>(t,n=ut)=>{(!No||e==="sp")&&Ss(e,(...o)=>t(...o),n)},ou=Qt("bm"),Ro=Qt("m"),su=Qt("bu"),iu=Qt("u"),Vl=Qt("bum"),ql=Qt("um"),ru=Qt("sp"),lu=Qt("rtg"),au=Qt("rtc");function cu(e,t=ut){Ss("ec",e,t)}const uu=Symbol.for("v-ndc");function Wn(e,t,n,o){let s;const r=n,a=re(e);if(a||Xe(e)){const i=a&&Gt(e);let l=!1,u=!1;i&&(l=!yt(e),u=Jt(e),e=bs(e)),s=new Array(e.length);for(let d=0,c=e.length;d<c;d++)s[d]=t(l?u?Kn(Nt(e[d])):Nt(e[d]):e[d],d,void 0,r)}else if(typeof e=="number"){s=new Array(e);for(let i=0;i<e;i++)s[i]=t(i+1,i,void 0,r)}else if(He(e))if(e[Symbol.iterator])s=Array.from(e,(i,l)=>t(i,l,void 0,r));else{const i=Object.keys(e);s=new Array(i.length);for(let l=0,u=i.length;l<u;l++){const d=i[l];s[l]=t(e[d],d,l,r)}}else s=[];return s}const ci=e=>e?fa(e)?Is(e):ci(e.parent):null,go=et(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>ci(e.parent),$root:e=>ci(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Kl(e),$forceUpdate:e=>e.f||(e.f=()=>{Fi(e.update)}),$nextTick:e=>e.n||(e.n=On.bind(e.proxy)),$watch:e=>Xc.bind(e)}),Hs=(e,t)=>e!==Fe&&!e.__isScriptSetup&&Pe(e,t),du={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:o,data:s,props:r,accessCache:a,type:i,appContext:l}=e;if(t[0]!=="$"){const f=a[t];if(f!==void 0)switch(f){case 1:return o[t];case 2:return s[t];case 4:return n[t];case 3:return r[t]}else{if(Hs(o,t))return a[t]=1,o[t];if(s!==Fe&&Pe(s,t))return a[t]=2,s[t];if(Pe(r,t))return a[t]=3,r[t];if(n!==Fe&&Pe(n,t))return a[t]=4,n[t];ui&&(a[t]=0)}}const u=go[t];let d,c;if(u)return t==="$attrs"&&ot(e.attrs,"get",""),u(e);if((d=i.__cssModules)&&(d=d[t]))return d;if(n!==Fe&&Pe(n,t))return a[t]=4,n[t];if(c=l.config.globalProperties,Pe(c,t))return c[t]},set({_:e},t,n){const{data:o,setupState:s,ctx:r}=e;return Hs(s,t)?(s[t]=n,!0):o!==Fe&&Pe(o,t)?(o[t]=n,!0):Pe(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(r[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:o,appContext:s,props:r,type:a}},i){let l;return!!(n[i]||e!==Fe&&i[0]!=="$"&&Pe(e,i)||Hs(t,i)||Pe(r,i)||Pe(o,i)||Pe(go,i)||Pe(s.config.globalProperties,i)||(l=a.__cssModules)&&l[i])},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:Pe(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function rr(e){return re(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let ui=!0;function fu(e){const t=Kl(e),n=e.proxy,o=e.ctx;ui=!1,t.beforeCreate&&lr(t.beforeCreate,e,"bc");const{data:s,computed:r,methods:a,watch:i,provide:l,inject:u,created:d,beforeMount:c,mounted:f,beforeUpdate:h,updated:w,activated:p,deactivated:v,beforeDestroy:_,beforeUnmount:E,destroyed:S,unmounted:y,render:R,renderTracked:k,renderTriggered:D,errorCaptured:V,serverPrefetch:B,expose:j,inheritAttrs:ee,components:Ee,directives:ae,filters:me}=t;if(u&&hu(u,o,null),a)for(const P in a){const X=a[P];ve(X)&&(o[P]=X.bind(n))}if(s){const P=s.call(n,n);He(P)&&(e.data=mn(P))}if(ui=!0,r)for(const P in r){const X=r[P],ge=ve(X)?X.bind(n,n):ve(X.get)?X.get.bind(n,n):Lt,we=!ve(X)&&ve(X.set)?X.set.bind(n):Lt,oe=dt({get:ge,set:we});Object.defineProperty(o,P,{enumerable:!0,configurable:!0,get:()=>oe.value,set:se=>oe.value=se})}if(i)for(const P in i)Gl(i[P],o,n,P);if(l){const P=ve(l)?l.call(n):l;Reflect.ownKeys(P).forEach(X=>{Go(X,P[X])})}d&&lr(d,e,"c");function Z(P,X){re(X)?X.forEach(ge=>P(ge.bind(n))):X&&P(X.bind(n))}if(Z(ou,c),Z(Ro,f),Z(su,h),Z(iu,w),Z(eu,p),Z(tu,v),Z(cu,V),Z(au,k),Z(lu,D),Z(Vl,E),Z(ql,y),Z(ru,B),re(j))if(j.length){const P=e.exposed||(e.exposed={});j.forEach(X=>{Object.defineProperty(P,X,{get:()=>n[X],set:ge=>n[X]=ge,enumerable:!0})})}else e.exposed||(e.exposed={});R&&e.render===Lt&&(e.render=R),ee!=null&&(e.inheritAttrs=ee),Ee&&(e.components=Ee),ae&&(e.directives=ae),B&&Ul(e)}function hu(e,t,n=Lt){re(e)&&(e=di(e));for(const o in e){const s=e[o];let r;He(s)?"default"in s?r=Ct(s.from||o,s.default,!0):r=Ct(s.from||o):r=Ct(s),qe(r)?Object.defineProperty(t,o,{enumerable:!0,configurable:!0,get:()=>r.value,set:a=>r.value=a}):t[o]=r}}function lr(e,t,n){Ht(re(e)?e.map(o=>o.bind(t.proxy)):e.bind(t.proxy),t,n)}function Gl(e,t,n,o){let s=o.includes(".")?jl(n,o):()=>n[o];if(Xe(e)){const r=t[e];ve(r)&&In(s,r)}else if(ve(e))In(s,e.bind(n));else if(He(e))if(re(e))e.forEach(r=>Gl(r,t,n,o));else{const r=ve(e.handler)?e.handler.bind(n):t[e.handler];ve(r)&&In(s,r,e)}}function Kl(e){const t=e.type,{mixins:n,extends:o}=t,{mixins:s,optionsCache:r,config:{optionMergeStrategies:a}}=e.appContext,i=r.get(t);let l;return i?l=i:!s.length&&!n&&!o?l=t:(l={},s.length&&s.forEach(u=>rs(l,u,a,!0)),rs(l,t,a)),He(t)&&r.set(t,l),l}function rs(e,t,n,o=!1){const{mixins:s,extends:r}=t;r&&rs(e,r,n,!0),s&&s.forEach(a=>rs(e,a,n,!0));for(const a in t)if(!(o&&a==="expose")){const i=pu[a]||n&&n[a];e[a]=i?i(e[a],t[a]):t[a]}return e}const pu={data:ar,props:cr,emits:cr,methods:ro,computed:ro,beforeCreate:rt,created:rt,beforeMount:rt,mounted:rt,beforeUpdate:rt,updated:rt,beforeDestroy:rt,beforeUnmount:rt,destroyed:rt,unmounted:rt,activated:rt,deactivated:rt,errorCaptured:rt,serverPrefetch:rt,components:ro,directives:ro,watch:gu,provide:ar,inject:mu};function ar(e,t){return t?e?function(){return et(ve(e)?e.call(this,this):e,ve(t)?t.call(this,this):t)}:t:e}function mu(e,t){return ro(di(e),di(t))}function di(e){if(re(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function rt(e,t){return e?[...new Set([].concat(e,t))]:t}function ro(e,t){return e?et(Object.create(null),e,t):t}function cr(e,t){return e?re(e)&&re(t)?[...new Set([...e,...t])]:et(Object.create(null),rr(e),rr(t??{})):t}function gu(e,t){if(!e)return t;if(!t)return e;const n=et(Object.create(null),e);for(const o in t)n[o]=rt(e[o],t[o]);return n}function Yl(){return{app:null,config:{isNativeTag:rl,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let wu=0;function vu(e,t){return function(o,s=null){ve(o)||(o=et({},o)),s!=null&&!He(s)&&(s=null);const r=Yl(),a=new WeakSet,i=[];let l=!1;const u=r.app={_uid:wu++,_component:o,_props:s,_container:null,_context:r,_instance:null,version:Xu,get config(){return r.config},set config(d){},use(d,...c){return a.has(d)||(d&&ve(d.install)?(a.add(d),d.install(u,...c)):ve(d)&&(a.add(d),d(u,...c))),u},mixin(d){return r.mixins.includes(d)||r.mixins.push(d),u},component(d,c){return c?(r.components[d]=c,u):r.components[d]},directive(d,c){return c?(r.directives[d]=c,u):r.directives[d]},mount(d,c,f){if(!l){const h=u._ceVNode||it(o,s);return h.appContext=r,f===!0?f="svg":f===!1&&(f=void 0),e(h,d,f),l=!0,u._container=d,d.__vue_app__=u,Is(h.component)}},onUnmount(d){i.push(d)},unmount(){l&&(Ht(i,u._instance,16),e(null,u._container),delete u._container.__vue_app__)},provide(d,c){return r.provides[d]=c,u},runWithContext(d){const c=Rn;Rn=u;try{return d()}finally{Rn=c}}};return u}}let Rn=null;const _u=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${pn(t)}Modifiers`]||e[`${Tn(t)}Modifiers`];function yu(e,t,...n){if(e.isUnmounted)return;const o=e.vnode.props||Fe;let s=n;const r=t.startsWith("update:"),a=r&&_u(o,t.slice(7));a&&(a.trim&&(s=n.map(d=>Xe(d)?d.trim():d)),a.number&&(s=n.map(vs)));let i,l=o[i=Ms(t)]||o[i=Ms(pn(t))];!l&&r&&(l=o[i=Ms(Tn(t))]),l&&Ht(l,e,6,s);const u=o[i+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[i])return;e.emitted[i]=!0,Ht(u,e,6,s)}}const bu=new WeakMap;function Xl(e,t,n=!1){const o=n?bu:t.emitsCache,s=o.get(e);if(s!==void 0)return s;const r=e.emits;let a={},i=!1;if(!ve(e)){const l=u=>{const d=Xl(u,t,!0);d&&(i=!0,et(a,d))};!n&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!r&&!i?(He(e)&&o.set(e,null),null):(re(r)?r.forEach(l=>a[l]=null):et(a,r),He(e)&&o.set(e,a),a)}function xs(e,t){return!e||!ms(t)?!1:(t=t.slice(2).replace(/Once$/,""),Pe(e,t[0].toLowerCase()+t.slice(1))||Pe(e,Tn(t))||Pe(e,t))}function ur(e){const{type:t,vnode:n,proxy:o,withProxy:s,propsOptions:[r],slots:a,attrs:i,emit:l,render:u,renderCache:d,props:c,data:f,setupState:h,ctx:w,inheritAttrs:p}=e,v=ss(e);let _,E;try{if(n.shapeFlag&4){const y=s||o,R=y;_=Mt(u.call(R,y,d,c,h,f,w)),E=i}else{const y=t;_=Mt(y.length>1?y(c,{attrs:i,slots:a,emit:l}):y(c,null)),E=t.props?i:Eu(i)}}catch(y){wo.length=0,Cs(y,e,1),_=it(gn)}let S=_;if(E&&p!==!1){const y=Object.keys(E),{shapeFlag:R}=S;y.length&&R&7&&(r&&y.some(Ri)&&(E=Cu(E,r)),S=Yn(S,E,!1,!0))}return n.dirs&&(S=Yn(S,null,!1,!0),S.dirs=S.dirs?S.dirs.concat(n.dirs):n.dirs),n.transition&&Hi(S,n.transition),_=S,ss(v),_}const Eu=e=>{let t;for(const n in e)(n==="class"||n==="style"||ms(n))&&((t||(t={}))[n]=e[n]);return t},Cu=(e,t)=>{const n={};for(const o in e)(!Ri(o)||!(o.slice(9)in t))&&(n[o]=e[o]);return n};function Su(e,t,n){const{props:o,children:s,component:r}=e,{props:a,children:i,patchFlag:l}=t,u=r.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return o?dr(o,a,u):!!a;if(l&8){const d=t.dynamicProps;for(let c=0;c<d.length;c++){const f=d[c];if(a[f]!==o[f]&&!xs(u,f))return!0}}}else return(s||i)&&(!i||!i.$stable)?!0:o===a?!1:o?a?dr(o,a,u):!0:!!a;return!1}function dr(e,t,n){const o=Object.keys(t);if(o.length!==Object.keys(e).length)return!0;for(let s=0;s<o.length;s++){const r=o[s];if(t[r]!==e[r]&&!xs(n,r))return!0}return!1}function xu({vnode:e,parent:t},n){for(;t;){const o=t.subTree;if(o.suspense&&o.suspense.activeBranch===e&&(o.el=e.el),o===e)(e=t.vnode).el=n,t=t.parent;else break}}const Jl={},Zl=()=>Object.create(Jl),Ql=e=>Object.getPrototypeOf(e)===Jl;function Au(e,t,n,o=!1){const s={},r=Zl();e.propsDefaults=Object.create(null),ea(e,t,s,r);for(const a in e.propsOptions[0])a in s||(s[a]=void 0);n?e.props=o?s:Ol(s):e.type.props?e.props=s:e.props=r,e.attrs=r}function Iu(e,t,n,o){const{props:s,attrs:r,vnode:{patchFlag:a}}=e,i=Oe(s),[l]=e.propsOptions;let u=!1;if((o||a>0)&&!(a&16)){if(a&8){const d=e.vnode.dynamicProps;for(let c=0;c<d.length;c++){let f=d[c];if(xs(e.emitsOptions,f))continue;const h=t[f];if(l)if(Pe(r,f))h!==r[f]&&(r[f]=h,u=!0);else{const w=pn(f);s[w]=fi(l,i,w,h,e,!1)}else h!==r[f]&&(r[f]=h,u=!0)}}}else{ea(e,t,s,r)&&(u=!0);let d;for(const c in i)(!t||!Pe(t,c)&&((d=Tn(c))===c||!Pe(t,d)))&&(l?n&&(n[c]!==void 0||n[d]!==void 0)&&(s[c]=fi(l,i,c,void 0,e,!0)):delete s[c]);if(r!==i)for(const c in r)(!t||!Pe(t,c))&&(delete r[c],u=!0)}u&&zt(e.attrs,"set","")}function ea(e,t,n,o){const[s,r]=e.propsOptions;let a=!1,i;if(t)for(let l in t){if(uo(l))continue;const u=t[l];let d;s&&Pe(s,d=pn(l))?!r||!r.includes(d)?n[d]=u:(i||(i={}))[d]=u:xs(e.emitsOptions,l)||(!(l in o)||u!==o[l])&&(o[l]=u,a=!0)}if(r){const l=Oe(n),u=i||Fe;for(let d=0;d<r.length;d++){const c=r[d];n[c]=fi(s,l,c,u[c],e,!Pe(u,c))}}return a}function fi(e,t,n,o,s,r){const a=e[n];if(a!=null){const i=Pe(a,"default");if(i&&o===void 0){const l=a.default;if(a.type!==Function&&!a.skipFactory&&ve(l)){const{propsDefaults:u}=s;if(n in u)o=u[n];else{const d=Po(s);o=u[n]=l.call(null,t),d()}}else o=l;s.ce&&s.ce._setProp(n,o)}a[0]&&(r&&!i?o=!1:a[1]&&(o===""||o===Tn(n))&&(o=!0))}return o}const Ru=new WeakMap;function ta(e,t,n=!1){const o=n?Ru:t.propsCache,s=o.get(e);if(s)return s;const r=e.props,a={},i=[];let l=!1;if(!ve(e)){const d=c=>{l=!0;const[f,h]=ta(c,t,!0);et(a,f),h&&i.push(...h)};!n&&t.mixins.length&&t.mixins.forEach(d),e.extends&&d(e.extends),e.mixins&&e.mixins.forEach(d)}if(!r&&!l)return He(e)&&o.set(e,$n),$n;if(re(r))for(let d=0;d<r.length;d++){const c=pn(r[d]);fr(c)&&(a[c]=Fe)}else if(r)for(const d in r){const c=pn(d);if(fr(c)){const f=r[d],h=a[c]=re(f)||ve(f)?{type:f}:et({},f),w=h.type;let p=!1,v=!0;if(re(w))for(let _=0;_<w.length;++_){const E=w[_],S=ve(E)&&E.name;if(S==="Boolean"){p=!0;break}else S==="String"&&(v=!1)}else p=ve(w)&&w.name==="Boolean";h[0]=p,h[1]=v,(p||Pe(h,"default"))&&i.push(c)}}const u=[a,i];return He(e)&&o.set(e,u),u}function fr(e){return e[0]!=="$"&&!uo(e)}const Wi=e=>e==="_"||e==="_ctx"||e==="$stable",ji=e=>re(e)?e.map(Mt):[Mt(e)],ku=(e,t,n)=>{if(t._n)return t;const o=ai((...s)=>ji(t(...s)),n);return o._c=!1,o},na=(e,t,n)=>{const o=e._ctx;for(const s in e){if(Wi(s))continue;const r=e[s];if(ve(r))t[s]=ku(s,r,o);else if(r!=null){const a=ji(r);t[s]=()=>a}}},oa=(e,t)=>{const n=ji(t);e.slots.default=()=>n},sa=(e,t,n)=>{for(const o in t)(n||!Wi(o))&&(e[o]=t[o])},Nu=(e,t,n)=>{const o=e.slots=Zl();if(e.vnode.shapeFlag&32){const s=t._;s?(sa(o,t,n),n&&dl(o,"_",s,!0)):na(t,o)}else t&&oa(e,t)},Tu=(e,t,n)=>{const{vnode:o,slots:s}=e;let r=!0,a=Fe;if(o.shapeFlag&32){const i=t._;i?n&&i===1?r=!1:sa(s,t,n):(r=!t.$stable,na(t,s)),a=t}else t&&(oa(e,t),a={default:1});if(r)for(const i in s)!Wi(i)&&a[i]==null&&delete s[i]},wt=Lu;function Ou(e){return Du(e)}function Du(e,t){const n=_s();n.__VUE__=!0;const{insert:o,remove:s,patchProp:r,createElement:a,createText:i,createComment:l,setText:u,setElementText:d,parentNode:c,nextSibling:f,setScopeId:h=Lt,insertStaticContent:w}=e,p=(m,g,C,A=null,T=null,N=null,$=void 0,H=null,W=!!g.dynamicChildren)=>{if(m===g)return;m&&!so(m,g)&&(A=x(m),se(m,T,N,!0),m=null),g.patchFlag===-2&&(W=!1,g.dynamicChildren=null);const{type:O,ref:ne,shapeFlag:q}=g;switch(O){case As:v(m,g,C,A);break;case gn:_(m,g,C,A);break;case js:m==null&&E(g,C,A,$);break;case st:Ee(m,g,C,A,T,N,$,H,W);break;default:q&1?R(m,g,C,A,T,N,$,H,W):q&6?ae(m,g,C,A,T,N,$,H,W):(q&64||q&128)&&O.process(m,g,C,A,T,N,$,H,W,G)}ne!=null&&T?po(ne,m&&m.ref,N,g||m,!g):ne==null&&m&&m.ref!=null&&po(m.ref,null,N,m,!0)},v=(m,g,C,A)=>{if(m==null)o(g.el=i(g.children),C,A);else{const T=g.el=m.el;g.children!==m.children&&u(T,g.children)}},_=(m,g,C,A)=>{m==null?o(g.el=l(g.children||""),C,A):g.el=m.el},E=(m,g,C,A)=>{[m.el,m.anchor]=w(m.children,g,C,A,m.el,m.anchor)},S=({el:m,anchor:g},C,A)=>{let T;for(;m&&m!==g;)T=f(m),o(m,C,A),m=T;o(g,C,A)},y=({el:m,anchor:g})=>{let C;for(;m&&m!==g;)C=f(m),s(m),m=C;s(g)},R=(m,g,C,A,T,N,$,H,W)=>{if(g.type==="svg"?$="svg":g.type==="math"&&($="mathml"),m==null)k(g,C,A,T,N,$,H,W);else{const O=m.el&&m.el._isVueCE?m.el:null;try{O&&O._beginPatch(),B(m,g,T,N,$,H,W)}finally{O&&O._endPatch()}}},k=(m,g,C,A,T,N,$,H)=>{let W,O;const{props:ne,shapeFlag:q,transition:te,dirs:fe}=m;if(W=m.el=a(m.type,N,ne&&ne.is,ne),q&8?d(W,m.children):q&16&&V(m.children,W,null,A,T,Ws(m,N),$,H),fe&&_n(m,null,A,"created"),D(W,m,m.scopeId,$,A),ne){for(const Le in ne)Le!=="value"&&!uo(Le)&&r(W,Le,null,ne[Le],N,A);"value"in ne&&r(W,"value",null,ne.value,N),(O=ne.onVnodeBeforeMount)&&Ot(O,A,m)}fe&&_n(m,null,A,"beforeMount");const Ce=Mu(T,te);Ce&&te.beforeEnter(W),o(W,g,C),((O=ne&&ne.onVnodeMounted)||Ce||fe)&&wt(()=>{O&&Ot(O,A,m),Ce&&te.enter(W),fe&&_n(m,null,A,"mounted")},T)},D=(m,g,C,A,T)=>{if(C&&h(m,C),A)for(let N=0;N<A.length;N++)h(m,A[N]);if(T){let N=T.subTree;if(g===N||aa(N.type)&&(N.ssContent===g||N.ssFallback===g)){const $=T.vnode;D(m,$,$.scopeId,$.slotScopeIds,T.parent)}}},V=(m,g,C,A,T,N,$,H,W=0)=>{for(let O=W;O<m.length;O++){const ne=m[O]=H?ln(m[O]):Mt(m[O]);p(null,ne,g,C,A,T,N,$,H)}},B=(m,g,C,A,T,N,$)=>{const H=g.el=m.el;let{patchFlag:W,dynamicChildren:O,dirs:ne}=g;W|=m.patchFlag&16;const q=m.props||Fe,te=g.props||Fe;let fe;if(C&&yn(C,!1),(fe=te.onVnodeBeforeUpdate)&&Ot(fe,C,g,m),ne&&_n(g,m,C,"beforeUpdate"),C&&yn(C,!0),(q.innerHTML&&te.innerHTML==null||q.textContent&&te.textContent==null)&&d(H,""),O?j(m.dynamicChildren,O,H,C,A,Ws(g,T),N):$||X(m,g,H,null,C,A,Ws(g,T),N,!1),W>0){if(W&16)ee(H,q,te,C,T);else if(W&2&&q.class!==te.class&&r(H,"class",null,te.class,T),W&4&&r(H,"style",q.style,te.style,T),W&8){const Ce=g.dynamicProps;for(let Le=0;Le<Ce.length;Le++){const b=Ce[Le],I=q[b],F=te[b];(F!==I||b==="value")&&r(H,b,I,F,T,C)}}W&1&&m.children!==g.children&&d(H,g.children)}else!$&&O==null&&ee(H,q,te,C,T);((fe=te.onVnodeUpdated)||ne)&&wt(()=>{fe&&Ot(fe,C,g,m),ne&&_n(g,m,C,"updated")},A)},j=(m,g,C,A,T,N,$)=>{for(let H=0;H<g.length;H++){const W=m[H],O=g[H],ne=W.el&&(W.type===st||!so(W,O)||W.shapeFlag&198)?c(W.el):C;p(W,O,ne,null,A,T,N,$,!0)}},ee=(m,g,C,A,T)=>{if(g!==C){if(g!==Fe)for(const N in g)!uo(N)&&!(N in C)&&r(m,N,g[N],null,T,A);for(const N in C){if(uo(N))continue;const $=C[N],H=g[N];$!==H&&N!=="value"&&r(m,N,H,$,T,A)}"value"in C&&r(m,"value",g.value,C.value,T)}},Ee=(m,g,C,A,T,N,$,H,W)=>{const O=g.el=m?m.el:i(""),ne=g.anchor=m?m.anchor:i("");let{patchFlag:q,dynamicChildren:te,slotScopeIds:fe}=g;fe&&(H=H?H.concat(fe):fe),m==null?(o(O,C,A),o(ne,C,A),V(g.children||[],C,ne,T,N,$,H,W)):q>0&&q&64&&te&&m.dynamicChildren&&m.dynamicChildren.length===te.length?(j(m.dynamicChildren,te,C,T,N,$,H),(g.key!=null||T&&g===T.subTree)&&ia(m,g,!0)):X(m,g,C,ne,T,N,$,H,W)},ae=(m,g,C,A,T,N,$,H,W)=>{g.slotScopeIds=H,m==null?g.shapeFlag&512?T.ctx.activate(g,C,A,$,W):me(g,C,A,T,N,$,W):ce(m,g,W)},me=(m,g,C,A,T,N,$)=>{const H=m.component=zu(m,A,T);if($l(m)&&(H.ctx.renderer=G),Vu(H,!1,$),H.asyncDep){if(T&&T.registerDep(H,Z,$),!m.el){const W=H.subTree=it(gn);_(null,W,g,C),m.placeholder=W.el}}else Z(H,m,g,C,T,N,$)},ce=(m,g,C)=>{const A=g.component=m.component;if(Su(m,g,C))if(A.asyncDep&&!A.asyncResolved){P(A,g,C);return}else A.next=g,A.update();else g.el=m.el,A.vnode=g},Z=(m,g,C,A,T,N,$)=>{const H=()=>{if(m.isMounted){let{next:q,bu:te,u:fe,parent:Ce,vnode:Le}=m;{const K=ra(m);if(K){q&&(q.el=Le.el,P(m,q,$)),K.asyncDep.then(()=>{m.isUnmounted||H()});return}}let b=q,I;yn(m,!1),q?(q.el=Le.el,P(m,q,$)):q=Le,te&&qo(te),(I=q.props&&q.props.onVnodeBeforeUpdate)&&Ot(I,Ce,q,Le),yn(m,!0);const F=ur(m),Q=m.subTree;m.subTree=F,p(Q,F,c(Q.el),x(Q),m,T,N),q.el=F.el,b===null&&xu(m,F.el),fe&&wt(fe,T),(I=q.props&&q.props.onVnodeUpdated)&&wt(()=>Ot(I,Ce,q,Le),T)}else{let q;const{el:te,props:fe}=g,{bm:Ce,m:Le,parent:b,root:I,type:F}=m,Q=mo(g);yn(m,!1),Ce&&qo(Ce),!Q&&(q=fe&&fe.onVnodeBeforeMount)&&Ot(q,b,g),yn(m,!0);{I.ce&&I.ce._def.shadowRoot!==!1&&I.ce._injectChildStyle(F);const K=m.subTree=ur(m);p(null,K,C,A,m,T,N),g.el=K.el}if(Le&&wt(Le,T),!Q&&(q=fe&&fe.onVnodeMounted)){const K=g;wt(()=>Ot(q,b,K),T)}(g.shapeFlag&256||b&&mo(b.vnode)&&b.vnode.shapeFlag&256)&&m.a&&wt(m.a,T),m.isMounted=!0,g=C=A=null}};m.scope.on();const W=m.effect=new vl(H);m.scope.off();const O=m.update=W.run.bind(W),ne=m.job=W.runIfDirty.bind(W);ne.i=m,ne.id=m.uid,W.scheduler=()=>Fi(ne),yn(m,!0),O()},P=(m,g,C)=>{g.component=m;const A=m.vnode.props;m.vnode=g,m.next=null,Iu(m,g.props,A,C),Tu(m,g.children,C),Yt(),sr(m),Xt()},X=(m,g,C,A,T,N,$,H,W=!1)=>{const O=m&&m.children,ne=m?m.shapeFlag:0,q=g.children,{patchFlag:te,shapeFlag:fe}=g;if(te>0){if(te&128){we(O,q,C,A,T,N,$,H,W);return}else if(te&256){ge(O,q,C,A,T,N,$,H,W);return}}fe&8?(ne&16&&he(O,T,N),q!==O&&d(C,q)):ne&16?fe&16?we(O,q,C,A,T,N,$,H,W):he(O,T,N,!0):(ne&8&&d(C,""),fe&16&&V(q,C,A,T,N,$,H,W))},ge=(m,g,C,A,T,N,$,H,W)=>{m=m||$n,g=g||$n;const O=m.length,ne=g.length,q=Math.min(O,ne);let te;for(te=0;te<q;te++){const fe=g[te]=W?ln(g[te]):Mt(g[te]);p(m[te],fe,C,null,T,N,$,H,W)}O>ne?he(m,T,N,!0,!1,q):V(g,C,A,T,N,$,H,W,q)},we=(m,g,C,A,T,N,$,H,W)=>{let O=0;const ne=g.length;let q=m.length-1,te=ne-1;for(;O<=q&&O<=te;){const fe=m[O],Ce=g[O]=W?ln(g[O]):Mt(g[O]);if(so(fe,Ce))p(fe,Ce,C,null,T,N,$,H,W);else break;O++}for(;O<=q&&O<=te;){const fe=m[q],Ce=g[te]=W?ln(g[te]):Mt(g[te]);if(so(fe,Ce))p(fe,Ce,C,null,T,N,$,H,W);else break;q--,te--}if(O>q){if(O<=te){const fe=te+1,Ce=fe<ne?g[fe].el:A;for(;O<=te;)p(null,g[O]=W?ln(g[O]):Mt(g[O]),C,Ce,T,N,$,H,W),O++}}else if(O>te)for(;O<=q;)se(m[O],T,N,!0),O++;else{const fe=O,Ce=O,Le=new Map;for(O=Ce;O<=te;O++){const De=g[O]=W?ln(g[O]):Mt(g[O]);De.key!=null&&Le.set(De.key,O)}let b,I=0;const F=te-Ce+1;let Q=!1,K=0;const _e=new Array(F);for(O=0;O<F;O++)_e[O]=0;for(O=fe;O<=q;O++){const De=m[O];if(I>=F){se(De,T,N,!0);continue}let be;if(De.key!=null)be=Le.get(De.key);else for(b=Ce;b<=te;b++)if(_e[b-Ce]===0&&so(De,g[b])){be=b;break}be===void 0?se(De,T,N,!0):(_e[be-Ce]=O+1,be>=K?K=be:Q=!0,p(De,g[be],C,null,T,N,$,H,W),I++)}const ke=Q?Pu(_e):$n;for(b=ke.length-1,O=F-1;O>=0;O--){const De=Ce+O,be=g[De],xe=g[De+1],Ue=De+1<ne?xe.el||la(xe):A;_e[O]===0?p(null,be,C,Ue,T,N,$,H,W):Q&&(b<0||O!==ke[b]?oe(be,C,Ue,2):b--)}}},oe=(m,g,C,A,T=null)=>{const{el:N,type:$,transition:H,children:W,shapeFlag:O}=m;if(O&6){oe(m.component.subTree,g,C,A);return}if(O&128){m.suspense.move(g,C,A);return}if(O&64){$.move(m,g,C,G);return}if($===st){o(N,g,C);for(let q=0;q<W.length;q++)oe(W[q],g,C,A);o(m.anchor,g,C);return}if($===js){S(m,g,C);return}if(A!==2&&O&1&&H)if(A===0)H.beforeEnter(N),o(N,g,C),wt(()=>H.enter(N),T);else{const{leave:q,delayLeave:te,afterLeave:fe}=H,Ce=()=>{m.ctx.isUnmounted?s(N):o(N,g,C)},Le=()=>{N._isLeaving&&N[Qc](!0),q(N,()=>{Ce(),fe&&fe()})};te?te(N,Ce,Le):Le()}else o(N,g,C)},se=(m,g,C,A=!1,T=!1)=>{const{type:N,props:$,ref:H,children:W,dynamicChildren:O,shapeFlag:ne,patchFlag:q,dirs:te,cacheIndex:fe}=m;if(q===-2&&(T=!1),H!=null&&(Yt(),po(H,null,C,m,!0),Xt()),fe!=null&&(g.renderCache[fe]=void 0),ne&256){g.ctx.deactivate(m);return}const Ce=ne&1&&te,Le=!mo(m);let b;if(Le&&(b=$&&$.onVnodeBeforeUnmount)&&Ot(b,g,m),ne&6)Re(m.component,C,A);else{if(ne&128){m.suspense.unmount(C,A);return}Ce&&_n(m,null,g,"beforeUnmount"),ne&64?m.type.remove(m,g,C,G,A):O&&!O.hasOnce&&(N!==st||q>0&&q&64)?he(O,g,C,!1,!0):(N===st&&q&384||!T&&ne&16)&&he(W,g,C),A&&ye(m)}(Le&&(b=$&&$.onVnodeUnmounted)||Ce)&&wt(()=>{b&&Ot(b,g,m),Ce&&_n(m,null,g,"unmounted")},C)},ye=m=>{const{type:g,el:C,anchor:A,transition:T}=m;if(g===st){Te(C,A);return}if(g===js){y(m);return}const N=()=>{s(C),T&&!T.persisted&&T.afterLeave&&T.afterLeave()};if(m.shapeFlag&1&&T&&!T.persisted){const{leave:$,delayLeave:H}=T,W=()=>$(C,N);H?H(m.el,N,W):W()}else N()},Te=(m,g)=>{let C;for(;m!==g;)C=f(m),s(m),m=C;s(g)},Re=(m,g,C)=>{const{bum:A,scope:T,job:N,subTree:$,um:H,m:W,a:O}=m;hr(W),hr(O),A&&qo(A),T.stop(),N&&(N.flags|=8,se($,m,g,C)),H&&wt(H,g),wt(()=>{m.isUnmounted=!0},g)},he=(m,g,C,A=!1,T=!1,N=0)=>{for(let $=N;$<m.length;$++)se(m[$],g,C,A,T)},x=m=>{if(m.shapeFlag&6)return x(m.component.subTree);if(m.shapeFlag&128)return m.suspense.next();const g=f(m.anchor||m.el),C=g&&g[Jc];return C?f(C):g};let z=!1;const L=(m,g,C)=>{let A;m==null?g._vnode&&(se(g._vnode,null,null,!0),A=g._vnode.component):p(g._vnode||null,m,g,null,null,null,C),g._vnode=m,z||(z=!0,sr(A),Bl(),z=!1)},G={p,um:se,m:oe,r:ye,mt:me,mc:V,pc:X,pbc:j,n:x,o:e};return{render:L,hydrate:void 0,createApp:vu(L)}}function Ws({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function yn({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function Mu(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function ia(e,t,n=!1){const o=e.children,s=t.children;if(re(o)&&re(s))for(let r=0;r<o.length;r++){const a=o[r];let i=s[r];i.shapeFlag&1&&!i.dynamicChildren&&((i.patchFlag<=0||i.patchFlag===32)&&(i=s[r]=ln(s[r]),i.el=a.el),!n&&i.patchFlag!==-2&&ia(a,i)),i.type===As&&(i.patchFlag!==-1?i.el=a.el:i.__elIndex=r+(e.type===st?1:0)),i.type===gn&&!i.el&&(i.el=a.el)}}function Pu(e){const t=e.slice(),n=[0];let o,s,r,a,i;const l=e.length;for(o=0;o<l;o++){const u=e[o];if(u!==0){if(s=n[n.length-1],e[s]<u){t[o]=s,n.push(o);continue}for(r=0,a=n.length-1;r<a;)i=r+a>>1,e[n[i]]<u?r=i+1:a=i;u<e[n[r]]&&(r>0&&(t[o]=n[r-1]),n[r]=o)}}for(r=n.length,a=n[r-1];r-- >0;)n[r]=a,a=t[a];return n}function ra(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:ra(t)}function hr(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}function la(e){if(e.placeholder)return e.placeholder;const t=e.component;return t?la(t.subTree):null}const aa=e=>e.__isSuspense;function Lu(e,t){t&&t.pendingBranch?re(e)?t.effects.push(...e):t.effects.push(e):qc(e)}const st=Symbol.for("v-fgt"),As=Symbol.for("v-txt"),gn=Symbol.for("v-cmt"),js=Symbol.for("v-stc"),wo=[];let _t=null;function Ie(e=!1){wo.push(_t=e?null:[])}function Bu(){wo.pop(),_t=wo[wo.length-1]||null}let ko=1;function ls(e,t=!1){ko+=e,e<0&&_t&&t&&(_t.hasOnce=!0)}function ca(e){return e.dynamicChildren=ko>0?_t||$n:null,Bu(),ko>0&&_t&&_t.push(e),e}function Ne(e,t,n,o,s,r){return ca(M(e,t,n,o,s,r,!0))}function Fu(e,t,n,o,s){return ca(it(e,t,n,o,s,!0))}function as(e){return e?e.__v_isVNode===!0:!1}function so(e,t){return e.type===t.type&&e.key===t.key}const ua=({key:e})=>e??null,Ko=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?Xe(e)||qe(e)||ve(e)?{i:Et,r:e,k:t,f:!!n}:e:null);function M(e,t=null,n=null,o=0,s=null,r=e===st?0:1,a=!1,i=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&ua(t),ref:t&&Ko(t),scopeId:Hl,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:o,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Et};return i?(Ui(l,n),r&128&&e.normalize(l)):n&&(l.shapeFlag|=Xe(n)?8:16),ko>0&&!a&&_t&&(l.patchFlag>0||r&6)&&l.patchFlag!==32&&_t.push(l),l}const it=Hu;function Hu(e,t=null,n=null,o=0,s=null,r=!1){if((!e||e===uu)&&(e=gn),as(e)){const i=Yn(e,t,!0);return n&&Ui(i,n),ko>0&&!r&&_t&&(i.shapeFlag&6?_t[_t.indexOf(e)]=i:_t.push(i)),i.patchFlag=-2,i}if(Yu(e)&&(e=e.__vccOpts),t){t=Wu(t);let{class:i,style:l}=t;i&&!Xe(i)&&(t.class=Gn(i)),He(l)&&(Es(l)&&!re(l)&&(l=et({},l)),t.style=ys(l))}const a=Xe(e)?1:aa(e)?128:Zc(e)?64:He(e)?4:ve(e)?2:0;return M(e,t,n,o,s,a,r,!0)}function Wu(e){return e?Es(e)||Ql(e)?et({},e):e:null}function Yn(e,t,n=!1,o=!1){const{props:s,ref:r,patchFlag:a,children:i,transition:l}=e,u=t?ju(s||{},t):s,d={__v_isVNode:!0,__v_skip:!0,type:e.type,props:u,key:u&&ua(u),ref:t&&t.ref?n&&r?re(r)?r.concat(Ko(t)):[r,Ko(t)]:Ko(t):r,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:i,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==st?a===-1?16:a|16:a,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Yn(e.ssContent),ssFallback:e.ssFallback&&Yn(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&o&&Hi(d,l.clone(d)),d}function Nn(e=" ",t=0){return it(As,null,e,t)}function hn(e="",t=!1){return t?(Ie(),Fu(gn,null,e)):it(gn,null,e)}function Mt(e){return e==null||typeof e=="boolean"?it(gn):re(e)?it(st,null,e.slice()):as(e)?ln(e):it(As,null,String(e))}function ln(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Yn(e)}function Ui(e,t){let n=0;const{shapeFlag:o}=e;if(t==null)t=null;else if(re(t))n=16;else if(typeof t=="object")if(o&65){const s=t.default;s&&(s._c&&(s._d=!1),Ui(e,s()),s._c&&(s._d=!0));return}else{n=32;const s=t._;!s&&!Ql(t)?t._ctx=Et:s===3&&Et&&(Et.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else ve(t)?(t={default:t,_ctx:Et},n=32):(t=String(t),o&64?(n=16,t=[Nn(t)]):n=8);e.children=t,e.shapeFlag|=n}function ju(...e){const t={};for(let n=0;n<e.length;n++){const o=e[n];for(const s in o)if(s==="class")t.class!==o.class&&(t.class=Gn([t.class,o.class]));else if(s==="style")t.style=ys([t.style,o.style]);else if(ms(s)){const r=t[s],a=o[s];a&&r!==a&&!(re(r)&&r.includes(a))&&(t[s]=r?[].concat(r,a):a)}else s!==""&&(t[s]=o[s])}return t}function Ot(e,t,n,o=null){Ht(e,t,7,[n,o])}const Uu=Yl();let $u=0;function zu(e,t,n){const o=e.type,s=(t?t.appContext:e.appContext)||Uu,r={uid:$u++,vnode:e,type:o,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new ml(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:ta(o,s),emitsOptions:Xl(o,s),emit:null,emitted:null,propsDefaults:Fe,inheritAttrs:o.inheritAttrs,ctx:Fe,data:Fe,props:Fe,attrs:Fe,slots:Fe,refs:Fe,setupState:Fe,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=yu.bind(null,r),e.ce&&e.ce(r),r}let ut=null;const da=()=>ut||Et;let cs,hi;{const e=_s(),t=(n,o)=>{let s;return(s=e[n])||(s=e[n]=[]),s.push(o),r=>{s.length>1?s.forEach(a=>a(r)):s[0](r)}};cs=t("__VUE_INSTANCE_SETTERS__",n=>ut=n),hi=t("__VUE_SSR_SETTERS__",n=>No=n)}const Po=e=>{const t=ut;return cs(e),e.scope.on(),()=>{e.scope.off(),cs(t)}},pr=()=>{ut&&ut.scope.off(),cs(null)};function fa(e){return e.vnode.shapeFlag&4}let No=!1;function Vu(e,t=!1,n=!1){t&&hi(t);const{props:o,children:s}=e.vnode,r=fa(e);Au(e,o,r,t),Nu(e,s,n||t);const a=r?qu(e,t):void 0;return t&&hi(!1),a}function qu(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,du);const{setup:o}=n;if(o){Yt();const s=e.setupContext=o.length>1?Ku(e):null,r=Po(e),a=Mo(o,e,0,[e.props,s]),i=ll(a);if(Xt(),r(),(i||e.sp)&&!mo(e)&&Ul(e),i){if(a.then(pr,pr),t)return a.then(l=>{mr(e,l)}).catch(l=>{Cs(l,e,0)});e.asyncDep=a}else mr(e,a)}else ha(e)}function mr(e,t,n){ve(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:He(t)&&(e.setupState=Ml(t)),ha(e)}function ha(e,t,n){const o=e.type;e.render||(e.render=o.render||Lt);{const s=Po(e);Yt();try{fu(e)}finally{Xt(),s()}}}const Gu={get(e,t){return ot(e,"get",""),e[t]}};function Ku(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,Gu),slots:e.slots,emit:e.emit,expose:t}}function Is(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Ml(Bi(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in go)return go[n](e)},has(t,n){return n in t||n in go}})):e.proxy}function Yu(e){return ve(e)&&"__vccOpts"in e}const dt=(e,t)=>jc(e,t,No);function pa(e,t,n){try{ls(-1);const o=arguments.length;return o===2?He(t)&&!re(t)?as(t)?it(e,null,[t]):it(e,t):it(e,null,t):(o>3?n=Array.prototype.slice.call(arguments,2):o===3&&as(n)&&(n=[n]),it(e,t,n))}finally{ls(1)}}const Xu="3.5.27";/**
* @vue/runtime-dom v3.5.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let pi;const gr=typeof window<"u"&&window.trustedTypes;if(gr)try{pi=gr.createPolicy("vue",{createHTML:e=>e})}catch{}const ma=pi?e=>pi.createHTML(e):e=>e,Ju="http://www.w3.org/2000/svg",Zu="http://www.w3.org/1998/Math/MathML",$t=typeof document<"u"?document:null,wr=$t&&$t.createElement("template"),Qu={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,o)=>{const s=t==="svg"?$t.createElementNS(Ju,e):t==="mathml"?$t.createElementNS(Zu,e):n?$t.createElement(e,{is:n}):$t.createElement(e);return e==="select"&&o&&o.multiple!=null&&s.setAttribute("multiple",o.multiple),s},createText:e=>$t.createTextNode(e),createComment:e=>$t.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>$t.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,o,s,r){const a=n?n.previousSibling:t.lastChild;if(s&&(s===r||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),n),!(s===r||!(s=s.nextSibling)););else{wr.innerHTML=ma(o==="svg"?`<svg>${e}</svg>`:o==="mathml"?`<math>${e}</math>`:e);const i=wr.content;if(o==="svg"||o==="mathml"){const l=i.firstChild;for(;l.firstChild;)i.appendChild(l.firstChild);i.removeChild(l)}t.insertBefore(i,n)}return[a?a.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},ed=Symbol("_vtc");function td(e,t,n){const o=e[ed];o&&(t=(t?[t,...o]:[...o]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const vr=Symbol("_vod"),nd=Symbol("_vsh"),od=Symbol(""),sd=/(?:^|;)\s*display\s*:/;function id(e,t,n){const o=e.style,s=Xe(n);let r=!1;if(n&&!s){if(t)if(Xe(t))for(const a of t.split(";")){const i=a.slice(0,a.indexOf(":")).trim();n[i]==null&&Yo(o,i,"")}else for(const a in t)n[a]==null&&Yo(o,a,"");for(const a in n)a==="display"&&(r=!0),Yo(o,a,n[a])}else if(s){if(t!==n){const a=o[od];a&&(n+=";"+a),o.cssText=n,r=sd.test(n)}}else t&&e.removeAttribute("style");vr in e&&(e[vr]=r?o.display:"",e[nd]&&(o.display="none"))}const _r=/\s*!important$/;function Yo(e,t,n){if(re(n))n.forEach(o=>Yo(e,t,o));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const o=rd(e,t);_r.test(n)?e.setProperty(Tn(o),n.replace(_r,""),"important"):e[o]=n}}const yr=["Webkit","Moz","ms"],Us={};function rd(e,t){const n=Us[t];if(n)return n;let o=pn(t);if(o!=="filter"&&o in e)return Us[t]=o;o=ul(o);for(let s=0;s<yr.length;s++){const r=yr[s]+o;if(r in e)return Us[t]=r}return t}const br="http://www.w3.org/1999/xlink";function Er(e,t,n,o,s,r=fc(t)){o&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(br,t.slice(6,t.length)):e.setAttributeNS(br,t,n):n==null||r&&!fl(n)?e.removeAttribute(t):e.setAttribute(t,r?"":Ft(n)?String(n):n)}function Cr(e,t,n,o,s){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?ma(n):n);return}const r=e.tagName;if(t==="value"&&r!=="PROGRESS"&&!r.includes("-")){const i=r==="OPTION"?e.getAttribute("value")||"":e.value,l=n==null?e.type==="checkbox"?"on":"":String(n);(i!==l||!("_value"in e))&&(e.value=l),n==null&&e.removeAttribute(t),e._value=n;return}let a=!1;if(n===""||n==null){const i=typeof e[t];i==="boolean"?n=fl(n):n==null&&i==="string"?(n="",a=!0):i==="number"&&(n=0,a=!0)}try{e[t]=n}catch{}a&&e.removeAttribute(s||t)}function qt(e,t,n,o){e.addEventListener(t,n,o)}function ld(e,t,n,o){e.removeEventListener(t,n,o)}const Sr=Symbol("_vei");function ad(e,t,n,o,s=null){const r=e[Sr]||(e[Sr]={}),a=r[t];if(o&&a)a.value=o;else{const[i,l]=cd(t);if(o){const u=r[t]=fd(o,s);qt(e,i,u,l)}else a&&(ld(e,i,a,l),r[t]=void 0)}}const xr=/(?:Once|Passive|Capture)$/;function cd(e){let t;if(xr.test(e)){t={};let o;for(;o=e.match(xr);)e=e.slice(0,e.length-o[0].length),t[o[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Tn(e.slice(2)),t]}let $s=0;const ud=Promise.resolve(),dd=()=>$s||(ud.then(()=>$s=0),$s=Date.now());function fd(e,t){const n=o=>{if(!o._vts)o._vts=Date.now();else if(o._vts<=n.attached)return;Ht(hd(o,n.value),t,5,[o])};return n.value=e,n.attached=dd(),n}function hd(e,t){if(re(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(o=>s=>!s._stopped&&o&&o(s))}else return t}const Ar=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,pd=(e,t,n,o,s,r)=>{const a=s==="svg";t==="class"?td(e,o,a):t==="style"?id(e,n,o):ms(t)?Ri(t)||ad(e,t,n,o,r):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):md(e,t,o,a))?(Cr(e,t,o),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Er(e,t,o,a,r,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Xe(o))?Cr(e,pn(t),o,r,t):(t==="true-value"?e._trueValue=o:t==="false-value"&&(e._falseValue=o),Er(e,t,o,a))};function md(e,t,n,o){if(o)return!!(t==="innerHTML"||t==="textContent"||t in e&&Ar(t)&&ve(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="sandbox"&&e.tagName==="IFRAME"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const s=e.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return Ar(t)&&Xe(n)?!1:t in e}const wn=e=>{const t=e.props["onUpdate:modelValue"]||!1;return re(t)?n=>qo(t,n):t};function gd(e){e.target.composing=!0}function Ir(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const St=Symbol("_assign");function Rr(e,t,n){return t&&(e=e.trim()),n&&(e=vs(e)),e}const vn={created(e,{modifiers:{lazy:t,trim:n,number:o}},s){e[St]=wn(s);const r=o||s.props&&s.props.type==="number";qt(e,t?"change":"input",a=>{a.target.composing||e[St](Rr(e.value,n,r))}),(n||r)&&qt(e,"change",()=>{e.value=Rr(e.value,n,r)}),t||(qt(e,"compositionstart",gd),qt(e,"compositionend",Ir),qt(e,"change",Ir))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:o,trim:s,number:r}},a){if(e[St]=wn(a),e.composing)return;const i=(r||e.type==="number")&&!/^0\d/.test(e.value)?vs(e.value):e.value,l=t??"";i!==l&&(document.activeElement===e&&e.type!=="range"&&(o&&t===n||s&&e.value.trim()===l)||(e.value=l))}},mi={deep:!0,created(e,t,n){e[St]=wn(n),qt(e,"change",()=>{const o=e._modelValue,s=Xn(e),r=e.checked,a=e[St];if(re(o)){const i=Ni(o,s),l=i!==-1;if(r&&!l)a(o.concat(s));else if(!r&&l){const u=[...o];u.splice(i,1),a(u)}}else if(eo(o)){const i=new Set(o);r?i.add(s):i.delete(s),a(i)}else a(wa(e,r))})},mounted:kr,beforeUpdate(e,t,n){e[St]=wn(n),kr(e,t,n)}};function kr(e,{value:t,oldValue:n},o){e._modelValue=t;let s;if(re(t))s=Ni(t,o.props.value)>-1;else if(eo(t))s=t.has(o.props.value);else{if(t===n)return;s=kn(t,wa(e,!0))}e.checked!==s&&(e.checked=s)}const wd={created(e,{value:t},n){e.checked=kn(t,n.props.value),e[St]=wn(n),qt(e,"change",()=>{e[St](Xn(e))})},beforeUpdate(e,{value:t,oldValue:n},o){e[St]=wn(o),t!==n&&(e.checked=kn(t,o.props.value))}},ga={deep:!0,created(e,{value:t,modifiers:{number:n}},o){const s=eo(t);qt(e,"change",()=>{const r=Array.prototype.filter.call(e.options,a=>a.selected).map(a=>n?vs(Xn(a)):Xn(a));e[St](e.multiple?s?new Set(r):r:r[0]),e._assigning=!0,On(()=>{e._assigning=!1})}),e[St]=wn(o)},mounted(e,{value:t}){Nr(e,t)},beforeUpdate(e,t,n){e[St]=wn(n)},updated(e,{value:t}){e._assigning||Nr(e,t)}};function Nr(e,t){const n=e.multiple,o=re(t);if(!(n&&!o&&!eo(t))){for(let s=0,r=e.options.length;s<r;s++){const a=e.options[s],i=Xn(a);if(n)if(o){const l=typeof i;l==="string"||l==="number"?a.selected=t.some(u=>String(u)===String(i)):a.selected=Ni(t,i)>-1}else a.selected=t.has(i);else if(kn(Xn(a),t)){e.selectedIndex!==s&&(e.selectedIndex=s);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function Xn(e){return"_value"in e?e._value:e.value}function wa(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const vd={created(e,t,n){jo(e,t,n,null,"created")},mounted(e,t,n){jo(e,t,n,null,"mounted")},beforeUpdate(e,t,n,o){jo(e,t,n,o,"beforeUpdate")},updated(e,t,n,o){jo(e,t,n,o,"updated")}};function _d(e,t){switch(e){case"SELECT":return ga;case"TEXTAREA":return vn;default:switch(t){case"checkbox":return mi;case"radio":return wd;default:return vn}}}function jo(e,t,n,o,s){const a=_d(e.tagName,n.props&&n.props.type)[s];a&&a(e,t,n,o)}const yd=["ctrl","shift","alt","meta"],bd={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>yd.some(n=>e[`${n}Key`]&&!t.includes(n))},va=(e,t)=>{const n=e._withMods||(e._withMods={}),o=t.join(".");return n[o]||(n[o]=(s,...r)=>{for(let a=0;a<t.length;a++){const i=bd[t[a]];if(i&&i(s,t))return}return e(s,...r)})},Ed=et({patchProp:pd},Qu);let Tr;function Cd(){return Tr||(Tr=Ou(Ed))}const Sd=(...e)=>{const t=Cd().createApp(...e),{mount:n}=t;return t.mount=o=>{const s=Ad(o);if(!s)return;const r=t._component;!ve(r)&&!r.render&&!r.template&&(r.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const a=n(s,!1,xd(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),a},t};function xd(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Ad(e){return Xe(e)?document.querySelector(e):e}/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let _a;const Rs=e=>_a=e,ya=Symbol();function gi(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var vo;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(vo||(vo={}));function Id(){const e=gl(!0),t=e.run(()=>kt({}));let n=[],o=[];const s=Bi({install(r){Rs(s),s._a=r,r.provide(ya,s),r.config.globalProperties.$pinia=s,o.forEach(a=>n.push(a)),o=[]},use(r){return this._a?n.push(r):o.push(r),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return s}const ba=()=>{};function Or(e,t,n,o=ba){e.push(t);const s=()=>{const r=e.indexOf(t);r>-1&&(e.splice(r,1),o())};return!n&&wl()&&pc(s),s}function Mn(e,...t){e.slice().forEach(n=>{n(...t)})}const Rd=e=>e(),Dr=Symbol(),zs=Symbol();function wi(e,t){e instanceof Map&&t instanceof Map?t.forEach((n,o)=>e.set(o,n)):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const o=t[n],s=e[n];gi(s)&&gi(o)&&e.hasOwnProperty(n)&&!qe(o)&&!Gt(o)?e[n]=wi(s,o):e[n]=o}return e}const kd=Symbol();function Nd(e){return!gi(e)||!e.hasOwnProperty(kd)}const{assign:on}=Object;function Td(e){return!!(qe(e)&&e.effect)}function Od(e,t,n,o){const{state:s,actions:r,getters:a}=t,i=n.state.value[e];let l;function u(){i||(n.state.value[e]=s?s():{});const d=Bc(n.state.value[e]);return on(d,r,Object.keys(a||{}).reduce((c,f)=>(c[f]=Bi(dt(()=>{Rs(n);const h=n._s.get(e);return a[f].call(h,h)})),c),{}))}return l=Ea(e,u,t,n,o,!0),l}function Ea(e,t,n={},o,s,r){let a;const i=on({actions:{}},n),l={deep:!0};let u,d,c=[],f=[],h;const w=o.state.value[e];!r&&!w&&(o.state.value[e]={});let p;function v(V){let B;u=d=!1,typeof V=="function"?(V(o.state.value[e]),B={type:vo.patchFunction,storeId:e,events:h}):(wi(o.state.value[e],V),B={type:vo.patchObject,payload:V,storeId:e,events:h});const j=p=Symbol();On().then(()=>{p===j&&(u=!0)}),d=!0,Mn(c,B,o.state.value[e])}const _=r?function(){const{state:B}=n,j=B?B():{};this.$patch(ee=>{on(ee,j)})}:ba;function E(){a.stop(),c=[],f=[],o._s.delete(e)}const S=(V,B="")=>{if(Dr in V)return V[zs]=B,V;const j=function(){Rs(o);const ee=Array.from(arguments),Ee=[],ae=[];function me(P){Ee.push(P)}function ce(P){ae.push(P)}Mn(f,{args:ee,name:j[zs],store:R,after:me,onError:ce});let Z;try{Z=V.apply(this&&this.$id===e?this:R,ee)}catch(P){throw Mn(ae,P),P}return Z instanceof Promise?Z.then(P=>(Mn(Ee,P),P)).catch(P=>(Mn(ae,P),Promise.reject(P))):(Mn(Ee,Z),Z)};return j[Dr]=!0,j[zs]=B,j},y={_p:o,$id:e,$onAction:Or.bind(null,f),$patch:v,$reset:_,$subscribe(V,B={}){const j=Or(c,V,B.detached,()=>ee()),ee=a.run(()=>In(()=>o.state.value[e],Ee=>{(B.flush==="sync"?d:u)&&V({storeId:e,type:vo.direct,events:h},Ee)},on({},l,B)));return j},$dispose:E},R=mn(y);o._s.set(e,R);const D=(o._a&&o._a.runWithContext||Rd)(()=>o._e.run(()=>(a=gl()).run(()=>t({action:S}))));for(const V in D){const B=D[V];if(qe(B)&&!Td(B)||Gt(B))r||(w&&Nd(B)&&(qe(B)?B.value=w[V]:wi(B,w[V])),o.state.value[e][V]=B);else if(typeof B=="function"){const j=S(B,V);D[V]=j,i.actions[V]=B}}return on(R,D),on(Oe(R),D),Object.defineProperty(R,"$state",{get:()=>o.state.value[e],set:V=>{v(B=>{on(B,V)})}}),o._p.forEach(V=>{on(R,a.run(()=>V({store:R,app:o._a,pinia:o,options:i})))}),w&&r&&n.hydrate&&n.hydrate(R.$state,w),u=!0,d=!0,R}/*! #__NO_SIDE_EFFECTS__ */function Dd(e,t,n){let o,s;const r=typeof t=="function";o=e,s=r?n:t;function a(i,l){const u=Gc();return i=i||(u?Ct(ya,null):null),i&&Rs(i),i=_a,i._s.has(o)||(r?Ea(o,t,s,i):Od(o,s,i)),i._s.get(o)}return a.$id=o,a}/*!
 * vue-router v4.6.4
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */const Fn=typeof document<"u";function Ca(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function Md(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&Ca(e.default)}const Me=Object.assign;function Vs(e,t){const n={};for(const o in t){const s=t[o];n[o]=Tt(s)?s.map(e):e(s)}return n}const _o=()=>{},Tt=Array.isArray;function Mr(e,t){const n={};for(const o in e)n[o]=o in t?t[o]:e[o];return n}const Sa=/#/g,Pd=/&/g,Ld=/\//g,Bd=/=/g,Fd=/\?/g,xa=/\+/g,Hd=/%5B/g,Wd=/%5D/g,Aa=/%5E/g,jd=/%60/g,Ia=/%7B/g,Ud=/%7C/g,Ra=/%7D/g,$d=/%20/g;function $i(e){return e==null?"":encodeURI(""+e).replace(Ud,"|").replace(Hd,"[").replace(Wd,"]")}function zd(e){return $i(e).replace(Ia,"{").replace(Ra,"}").replace(Aa,"^")}function vi(e){return $i(e).replace(xa,"%2B").replace($d,"+").replace(Sa,"%23").replace(Pd,"%26").replace(jd,"`").replace(Ia,"{").replace(Ra,"}").replace(Aa,"^")}function Vd(e){return vi(e).replace(Bd,"%3D")}function qd(e){return $i(e).replace(Sa,"%23").replace(Fd,"%3F")}function Gd(e){return qd(e).replace(Ld,"%2F")}function To(e){if(e==null)return null;try{return decodeURIComponent(""+e)}catch{}return""+e}const Kd=/\/$/,Yd=e=>e.replace(Kd,"");function qs(e,t,n="/"){let o,s={},r="",a="";const i=t.indexOf("#");let l=t.indexOf("?");return l=i>=0&&l>i?-1:l,l>=0&&(o=t.slice(0,l),r=t.slice(l,i>0?i:t.length),s=e(r.slice(1))),i>=0&&(o=o||t.slice(0,i),a=t.slice(i,t.length)),o=Qd(o??t,n),{fullPath:o+r+a,path:o,query:s,hash:To(a)}}function Xd(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function Pr(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function Jd(e,t,n){const o=t.matched.length-1,s=n.matched.length-1;return o>-1&&o===s&&Jn(t.matched[o],n.matched[s])&&ka(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function Jn(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function ka(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var n in e)if(!Zd(e[n],t[n]))return!1;return!0}function Zd(e,t){return Tt(e)?Lr(e,t):Tt(t)?Lr(t,e):(e==null?void 0:e.valueOf())===(t==null?void 0:t.valueOf())}function Lr(e,t){return Tt(t)?e.length===t.length&&e.every((n,o)=>n===t[o]):e.length===1&&e[0]===t}function Qd(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),o=e.split("/"),s=o[o.length-1];(s===".."||s===".")&&o.push("");let r=n.length-1,a,i;for(a=0;a<o.length;a++)if(i=o[a],i!==".")if(i==="..")r>1&&r--;else break;return n.slice(0,r).join("/")+"/"+o.slice(a).join("/")}const nn={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let _i=function(e){return e.pop="pop",e.push="push",e}({}),Gs=function(e){return e.back="back",e.forward="forward",e.unknown="",e}({});function ef(e){if(!e)if(Fn){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),Yd(e)}const tf=/^[^#]+#/;function nf(e,t){return e.replace(tf,"#")+t}function of(e,t){const n=document.documentElement.getBoundingClientRect(),o=e.getBoundingClientRect();return{behavior:t.behavior,left:o.left-n.left-(t.left||0),top:o.top-n.top-(t.top||0)}}const ks=()=>({left:window.scrollX,top:window.scrollY});function sf(e){let t;if("el"in e){const n=e.el,o=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?o?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;t=of(s,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function Br(e,t){return(history.state?history.state.position-t:-1)+e}const yi=new Map;function rf(e,t){yi.set(e,t)}function lf(e){const t=yi.get(e);return yi.delete(e),t}function af(e){return typeof e=="string"||e&&typeof e=="object"}function Na(e){return typeof e=="string"||typeof e=="symbol"}let Ve=function(e){return e[e.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",e[e.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",e[e.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",e[e.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",e[e.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",e}({});const Ta=Symbol("");Ve.MATCHER_NOT_FOUND+"",Ve.NAVIGATION_GUARD_REDIRECT+"",Ve.NAVIGATION_ABORTED+"",Ve.NAVIGATION_CANCELLED+"",Ve.NAVIGATION_DUPLICATED+"";function Zn(e,t){return Me(new Error,{type:e,[Ta]:!0},t)}function Ut(e,t){return e instanceof Error&&Ta in e&&(t==null||!!(e.type&t))}const cf=["params","query","hash"];function uf(e){if(typeof e=="string")return e;if(e.path!=null)return e.path;const t={};for(const n of cf)n in e&&(t[n]=e[n]);return JSON.stringify(t,null,2)}function df(e){const t={};if(e===""||e==="?")return t;const n=(e[0]==="?"?e.slice(1):e).split("&");for(let o=0;o<n.length;++o){const s=n[o].replace(xa," "),r=s.indexOf("="),a=To(r<0?s:s.slice(0,r)),i=r<0?null:To(s.slice(r+1));if(a in t){let l=t[a];Tt(l)||(l=t[a]=[l]),l.push(i)}else t[a]=i}return t}function Fr(e){let t="";for(let n in e){const o=e[n];if(n=Vd(n),o==null){o!==void 0&&(t+=(t.length?"&":"")+n);continue}(Tt(o)?o.map(s=>s&&vi(s)):[o&&vi(o)]).forEach(s=>{s!==void 0&&(t+=(t.length?"&":"")+n,s!=null&&(t+="="+s))})}return t}function ff(e){const t={};for(const n in e){const o=e[n];o!==void 0&&(t[n]=Tt(o)?o.map(s=>s==null?null:""+s):o==null?o:""+o)}return t}const hf=Symbol(""),Hr=Symbol(""),Ns=Symbol(""),zi=Symbol(""),bi=Symbol("");function io(){let e=[];function t(o){return e.push(o),()=>{const s=e.indexOf(o);s>-1&&e.splice(s,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function an(e,t,n,o,s,r=a=>a()){const a=o&&(o.enterCallbacks[s]=o.enterCallbacks[s]||[]);return()=>new Promise((i,l)=>{const u=f=>{f===!1?l(Zn(Ve.NAVIGATION_ABORTED,{from:n,to:t})):f instanceof Error?l(f):af(f)?l(Zn(Ve.NAVIGATION_GUARD_REDIRECT,{from:t,to:f})):(a&&o.enterCallbacks[s]===a&&typeof f=="function"&&a.push(f),i())},d=r(()=>e.call(o&&o.instances[s],t,n,u));let c=Promise.resolve(d);e.length<3&&(c=c.then(u)),c.catch(f=>l(f))})}function Ks(e,t,n,o,s=r=>r()){const r=[];for(const a of e)for(const i in a.components){let l=a.components[i];if(!(t!=="beforeRouteEnter"&&!a.instances[i]))if(Ca(l)){const u=(l.__vccOpts||l)[t];u&&r.push(an(u,n,o,a,i,s))}else{let u=l();r.push(()=>u.then(d=>{if(!d)throw new Error(`Couldn't resolve component "${i}" at "${a.path}"`);const c=Md(d)?d.default:d;a.mods[i]=d,a.components[i]=c;const f=(c.__vccOpts||c)[t];return f&&an(f,n,o,a,i,s)()}))}}return r}function pf(e,t){const n=[],o=[],s=[],r=Math.max(t.matched.length,e.matched.length);for(let a=0;a<r;a++){const i=t.matched[a];i&&(e.matched.find(u=>Jn(u,i))?o.push(i):n.push(i));const l=e.matched[a];l&&(t.matched.find(u=>Jn(u,l))||s.push(l))}return[n,o,s]}/*!
 * vue-router v4.6.4
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let mf=()=>location.protocol+"//"+location.host;function Oa(e,t){const{pathname:n,search:o,hash:s}=t,r=e.indexOf("#");if(r>-1){let a=s.includes(e.slice(r))?e.slice(r).length:1,i=s.slice(a);return i[0]!=="/"&&(i="/"+i),Pr(i,"")}return Pr(n,e)+o+s}function gf(e,t,n,o){let s=[],r=[],a=null;const i=({state:f})=>{const h=Oa(e,location),w=n.value,p=t.value;let v=0;if(f){if(n.value=h,t.value=f,a&&a===w){a=null;return}v=p?f.position-p.position:0}else o(h);s.forEach(_=>{_(n.value,w,{delta:v,type:_i.pop,direction:v?v>0?Gs.forward:Gs.back:Gs.unknown})})};function l(){a=n.value}function u(f){s.push(f);const h=()=>{const w=s.indexOf(f);w>-1&&s.splice(w,1)};return r.push(h),h}function d(){if(document.visibilityState==="hidden"){const{history:f}=window;if(!f.state)return;f.replaceState(Me({},f.state,{scroll:ks()}),"")}}function c(){for(const f of r)f();r=[],window.removeEventListener("popstate",i),window.removeEventListener("pagehide",d),document.removeEventListener("visibilitychange",d)}return window.addEventListener("popstate",i),window.addEventListener("pagehide",d),document.addEventListener("visibilitychange",d),{pauseListeners:l,listen:u,destroy:c}}function Wr(e,t,n,o=!1,s=!1){return{back:e,current:t,forward:n,replaced:o,position:window.history.length,scroll:s?ks():null}}function wf(e){const{history:t,location:n}=window,o={value:Oa(e,n)},s={value:t.state};s.value||r(o.value,{back:null,current:o.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function r(l,u,d){const c=e.indexOf("#"),f=c>-1?(n.host&&document.querySelector("base")?e:e.slice(c))+l:mf()+e+l;try{t[d?"replaceState":"pushState"](u,"",f),s.value=u}catch(h){console.error(h),n[d?"replace":"assign"](f)}}function a(l,u){r(l,Me({},t.state,Wr(s.value.back,l,s.value.forward,!0),u,{position:s.value.position}),!0),o.value=l}function i(l,u){const d=Me({},s.value,t.state,{forward:l,scroll:ks()});r(d.current,d,!0),r(l,Me({},Wr(o.value,l,null),{position:d.position+1},u),!1),o.value=l}return{location:o,state:s,push:i,replace:a}}function vf(e){e=ef(e);const t=wf(e),n=gf(e,t.state,t.location,t.replace);function o(r,a=!0){a||n.pauseListeners(),history.go(r)}const s=Me({location:"",base:e,go:o,createHref:nf.bind(null,e)},t,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>t.state.value}),s}let xn=function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.Group=2]="Group",e}({});var Je=function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.ParamRegExp=2]="ParamRegExp",e[e.ParamRegExpEnd=3]="ParamRegExpEnd",e[e.EscapeNext=4]="EscapeNext",e}(Je||{});const _f={type:xn.Static,value:""},yf=/[a-zA-Z0-9_]/;function bf(e){if(!e)return[[]];if(e==="/")return[[_f]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(h){throw new Error(`ERR (${n})/"${u}": ${h}`)}let n=Je.Static,o=n;const s=[];let r;function a(){r&&s.push(r),r=[]}let i=0,l,u="",d="";function c(){u&&(n===Je.Static?r.push({type:xn.Static,value:u}):n===Je.Param||n===Je.ParamRegExp||n===Je.ParamRegExpEnd?(r.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),r.push({type:xn.Param,value:u,regexp:d,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),u="")}function f(){u+=l}for(;i<e.length;){if(l=e[i++],l==="\\"&&n!==Je.ParamRegExp){o=n,n=Je.EscapeNext;continue}switch(n){case Je.Static:l==="/"?(u&&c(),a()):l===":"?(c(),n=Je.Param):f();break;case Je.EscapeNext:f(),n=o;break;case Je.Param:l==="("?n=Je.ParamRegExp:yf.test(l)?f():(c(),n=Je.Static,l!=="*"&&l!=="?"&&l!=="+"&&i--);break;case Je.ParamRegExp:l===")"?d[d.length-1]=="\\"?d=d.slice(0,-1)+l:n=Je.ParamRegExpEnd:d+=l;break;case Je.ParamRegExpEnd:c(),n=Je.Static,l!=="*"&&l!=="?"&&l!=="+"&&i--,d="";break;default:t("Unknown state");break}}return n===Je.ParamRegExp&&t(`Unfinished custom RegExp for param "${u}"`),c(),a(),s}const jr="[^/]+?",Ef={sensitive:!1,strict:!1,start:!0,end:!0};var at=function(e){return e[e._multiplier=10]="_multiplier",e[e.Root=90]="Root",e[e.Segment=40]="Segment",e[e.SubSegment=30]="SubSegment",e[e.Static=40]="Static",e[e.Dynamic=20]="Dynamic",e[e.BonusCustomRegExp=10]="BonusCustomRegExp",e[e.BonusWildcard=-50]="BonusWildcard",e[e.BonusRepeatable=-20]="BonusRepeatable",e[e.BonusOptional=-8]="BonusOptional",e[e.BonusStrict=.7000000000000001]="BonusStrict",e[e.BonusCaseSensitive=.25]="BonusCaseSensitive",e}(at||{});const Cf=/[.+*?^${}()[\]/\\]/g;function Sf(e,t){const n=Me({},Ef,t),o=[];let s=n.start?"^":"";const r=[];for(const u of e){const d=u.length?[]:[at.Root];n.strict&&!u.length&&(s+="/");for(let c=0;c<u.length;c++){const f=u[c];let h=at.Segment+(n.sensitive?at.BonusCaseSensitive:0);if(f.type===xn.Static)c||(s+="/"),s+=f.value.replace(Cf,"\\$&"),h+=at.Static;else if(f.type===xn.Param){const{value:w,repeatable:p,optional:v,regexp:_}=f;r.push({name:w,repeatable:p,optional:v});const E=_||jr;if(E!==jr){h+=at.BonusCustomRegExp;try{`${E}`}catch(y){throw new Error(`Invalid custom RegExp for param "${w}" (${E}): `+y.message)}}let S=p?`((?:${E})(?:/(?:${E}))*)`:`(${E})`;c||(S=v&&u.length<2?`(?:/${S})`:"/"+S),v&&(S+="?"),s+=S,h+=at.Dynamic,v&&(h+=at.BonusOptional),p&&(h+=at.BonusRepeatable),E===".*"&&(h+=at.BonusWildcard)}d.push(h)}o.push(d)}if(n.strict&&n.end){const u=o.length-1;o[u][o[u].length-1]+=at.BonusStrict}n.strict||(s+="/?"),n.end?s+="$":n.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const a=new RegExp(s,n.sensitive?"":"i");function i(u){const d=u.match(a),c={};if(!d)return null;for(let f=1;f<d.length;f++){const h=d[f]||"",w=r[f-1];c[w.name]=h&&w.repeatable?h.split("/"):h}return c}function l(u){let d="",c=!1;for(const f of e){(!c||!d.endsWith("/"))&&(d+="/"),c=!1;for(const h of f)if(h.type===xn.Static)d+=h.value;else if(h.type===xn.Param){const{value:w,repeatable:p,optional:v}=h,_=w in u?u[w]:"";if(Tt(_)&&!p)throw new Error(`Provided param "${w}" is an array but it is not repeatable (* or + modifiers)`);const E=Tt(_)?_.join("/"):_;if(!E)if(v)f.length<2&&(d.endsWith("/")?d=d.slice(0,-1):c=!0);else throw new Error(`Missing required param "${w}"`);d+=E}}return d||"/"}return{re:a,score:o,keys:r,parse:i,stringify:l}}function xf(e,t){let n=0;for(;n<e.length&&n<t.length;){const o=t[n]-e[n];if(o)return o;n++}return e.length<t.length?e.length===1&&e[0]===at.Static+at.Segment?-1:1:e.length>t.length?t.length===1&&t[0]===at.Static+at.Segment?1:-1:0}function Da(e,t){let n=0;const o=e.score,s=t.score;for(;n<o.length&&n<s.length;){const r=xf(o[n],s[n]);if(r)return r;n++}if(Math.abs(s.length-o.length)===1){if(Ur(o))return 1;if(Ur(s))return-1}return s.length-o.length}function Ur(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const Af={strict:!1,end:!0,sensitive:!1};function If(e,t,n){const o=Sf(bf(e.path),n),s=Me(o,{record:e,parent:t,children:[],alias:[]});return t&&!s.record.aliasOf==!t.record.aliasOf&&t.children.push(s),s}function Rf(e,t){const n=[],o=new Map;t=Mr(Af,t);function s(c){return o.get(c)}function r(c,f,h){const w=!h,p=zr(c);p.aliasOf=h&&h.record;const v=Mr(t,c),_=[p];if("alias"in c){const y=typeof c.alias=="string"?[c.alias]:c.alias;for(const R of y)_.push(zr(Me({},p,{components:h?h.record.components:p.components,path:R,aliasOf:h?h.record:p})))}let E,S;for(const y of _){const{path:R}=y;if(f&&R[0]!=="/"){const k=f.record.path,D=k[k.length-1]==="/"?"":"/";y.path=f.record.path+(R&&D+R)}if(E=If(y,f,v),h?h.alias.push(E):(S=S||E,S!==E&&S.alias.push(E),w&&c.name&&!Vr(E)&&a(c.name)),Ma(E)&&l(E),p.children){const k=p.children;for(let D=0;D<k.length;D++)r(k[D],E,h&&h.children[D])}h=h||E}return S?()=>{a(S)}:_o}function a(c){if(Na(c)){const f=o.get(c);f&&(o.delete(c),n.splice(n.indexOf(f),1),f.children.forEach(a),f.alias.forEach(a))}else{const f=n.indexOf(c);f>-1&&(n.splice(f,1),c.record.name&&o.delete(c.record.name),c.children.forEach(a),c.alias.forEach(a))}}function i(){return n}function l(c){const f=Tf(c,n);n.splice(f,0,c),c.record.name&&!Vr(c)&&o.set(c.record.name,c)}function u(c,f){let h,w={},p,v;if("name"in c&&c.name){if(h=o.get(c.name),!h)throw Zn(Ve.MATCHER_NOT_FOUND,{location:c});v=h.record.name,w=Me($r(f.params,h.keys.filter(S=>!S.optional).concat(h.parent?h.parent.keys.filter(S=>S.optional):[]).map(S=>S.name)),c.params&&$r(c.params,h.keys.map(S=>S.name))),p=h.stringify(w)}else if(c.path!=null)p=c.path,h=n.find(S=>S.re.test(p)),h&&(w=h.parse(p),v=h.record.name);else{if(h=f.name?o.get(f.name):n.find(S=>S.re.test(f.path)),!h)throw Zn(Ve.MATCHER_NOT_FOUND,{location:c,currentLocation:f});v=h.record.name,w=Me({},f.params,c.params),p=h.stringify(w)}const _=[];let E=h;for(;E;)_.unshift(E.record),E=E.parent;return{name:v,path:p,params:w,matched:_,meta:Nf(_)}}e.forEach(c=>r(c));function d(){n.length=0,o.clear()}return{addRoute:r,resolve:u,removeRoute:a,clearRoutes:d,getRoutes:i,getRecordMatcher:s}}function $r(e,t){const n={};for(const o of t)o in e&&(n[o]=e[o]);return n}function zr(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:kf(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function kf(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const o in e.components)t[o]=typeof n=="object"?n[o]:n;return t}function Vr(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function Nf(e){return e.reduce((t,n)=>Me(t,n.meta),{})}function Tf(e,t){let n=0,o=t.length;for(;n!==o;){const r=n+o>>1;Da(e,t[r])<0?o=r:n=r+1}const s=Of(e);return s&&(o=t.lastIndexOf(s,o-1)),o}function Of(e){let t=e;for(;t=t.parent;)if(Ma(t)&&Da(e,t)===0)return t}function Ma({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function qr(e){const t=Ct(Ns),n=Ct(zi),o=dt(()=>{const l=J(e.to);return t.resolve(l)}),s=dt(()=>{const{matched:l}=o.value,{length:u}=l,d=l[u-1],c=n.matched;if(!d||!c.length)return-1;const f=c.findIndex(Jn.bind(null,d));if(f>-1)return f;const h=Gr(l[u-2]);return u>1&&Gr(d)===h&&c[c.length-1].path!==h?c.findIndex(Jn.bind(null,l[u-2])):f}),r=dt(()=>s.value>-1&&Lf(n.params,o.value.params)),a=dt(()=>s.value>-1&&s.value===n.matched.length-1&&ka(n.params,o.value.params));function i(l={}){if(Pf(l)){const u=t[J(e.replace)?"replace":"push"](J(e.to)).catch(_o);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:o,href:dt(()=>o.value.href),isActive:r,isExactActive:a,navigate:i}}function Df(e){return e.length===1?e[0]:e}const Mf=to({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:qr,setup(e,{slots:t}){const n=mn(qr(e)),{options:o}=Ct(Ns),s=dt(()=>({[Kr(e.activeClass,o.linkActiveClass,"router-link-active")]:n.isActive,[Kr(e.exactActiveClass,o.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const r=t.default&&Df(t.default(n));return e.custom?r:pa("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},r)}}}),Ei=Mf;function Pf(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function Lf(e,t){for(const n in t){const o=t[n],s=e[n];if(typeof o=="string"){if(o!==s)return!1}else if(!Tt(s)||s.length!==o.length||o.some((r,a)=>r.valueOf()!==s[a].valueOf()))return!1}return!0}function Gr(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Kr=(e,t,n)=>e??t??n,Bf=to({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const o=Ct(bi),s=dt(()=>e.route||o.value),r=Ct(Hr,0),a=dt(()=>{let u=J(r);const{matched:d}=s.value;let c;for(;(c=d[u])&&!c.components;)u++;return u}),i=dt(()=>s.value.matched[a.value]);Go(Hr,dt(()=>a.value+1)),Go(hf,i),Go(bi,s);const l=kt();return In(()=>[l.value,i.value,e.name],([u,d,c],[f,h,w])=>{d&&(d.instances[c]=u,h&&h!==d&&u&&u===f&&(d.leaveGuards.size||(d.leaveGuards=h.leaveGuards),d.updateGuards.size||(d.updateGuards=h.updateGuards))),u&&d&&(!h||!Jn(d,h)||!f)&&(d.enterCallbacks[c]||[]).forEach(p=>p(u))},{flush:"post"}),()=>{const u=s.value,d=e.name,c=i.value,f=c&&c.components[d];if(!f)return Yr(n.default,{Component:f,route:u});const h=c.props[d],w=h?h===!0?u.params:typeof h=="function"?h(u):h:null,v=pa(f,Me({},w,t,{onVnodeUnmounted:_=>{_.component.isUnmounted&&(c.instances[d]=null)},ref:l}));return Yr(n.default,{Component:v,route:u})||v}}});function Yr(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const Pa=Bf;function Ff(e){const t=Rf(e.routes,e),n=e.parseQuery||df,o=e.stringifyQuery||Fr,s=e.history,r=io(),a=io(),i=io(),l=Mc(nn);let u=nn;Fn&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const d=Vs.bind(null,x=>""+x),c=Vs.bind(null,Gd),f=Vs.bind(null,To);function h(x,z){let L,G;return Na(x)?(L=t.getRecordMatcher(x),G=z):G=x,t.addRoute(G,L)}function w(x){const z=t.getRecordMatcher(x);z&&t.removeRoute(z)}function p(){return t.getRoutes().map(x=>x.record)}function v(x){return!!t.getRecordMatcher(x)}function _(x,z){if(z=Me({},z||l.value),typeof x=="string"){const C=qs(n,x,z.path),A=t.resolve({path:C.path},z),T=s.createHref(C.fullPath);return Me(C,A,{params:f(A.params),hash:To(C.hash),redirectedFrom:void 0,href:T})}let L;if(x.path!=null)L=Me({},x,{path:qs(n,x.path,z.path).path});else{const C=Me({},x.params);for(const A in C)C[A]==null&&delete C[A];L=Me({},x,{params:c(C)}),z.params=c(z.params)}const G=t.resolve(L,z),le=x.hash||"";G.params=d(f(G.params));const m=Xd(o,Me({},x,{hash:zd(le),path:G.path})),g=s.createHref(m);return Me({fullPath:m,hash:le,query:o===Fr?ff(x.query):x.query||{}},G,{redirectedFrom:void 0,href:g})}function E(x){return typeof x=="string"?qs(n,x,l.value.path):Me({},x)}function S(x,z){if(u!==x)return Zn(Ve.NAVIGATION_CANCELLED,{from:z,to:x})}function y(x){return D(x)}function R(x){return y(Me(E(x),{replace:!0}))}function k(x,z){const L=x.matched[x.matched.length-1];if(L&&L.redirect){const{redirect:G}=L;let le=typeof G=="function"?G(x,z):G;return typeof le=="string"&&(le=le.includes("?")||le.includes("#")?le=E(le):{path:le},le.params={}),Me({query:x.query,hash:x.hash,params:le.path!=null?{}:x.params},le)}}function D(x,z){const L=u=_(x),G=l.value,le=x.state,m=x.force,g=x.replace===!0,C=k(L,G);if(C)return D(Me(E(C),{state:typeof C=="object"?Me({},le,C.state):le,force:m,replace:g}),z||L);const A=L;A.redirectedFrom=z;let T;return!m&&Jd(o,G,L)&&(T=Zn(Ve.NAVIGATION_DUPLICATED,{to:A,from:G}),oe(G,G,!0,!1)),(T?Promise.resolve(T):j(A,G)).catch(N=>Ut(N)?Ut(N,Ve.NAVIGATION_GUARD_REDIRECT)?N:we(N):X(N,A,G)).then(N=>{if(N){if(Ut(N,Ve.NAVIGATION_GUARD_REDIRECT))return D(Me({replace:g},E(N.to),{state:typeof N.to=="object"?Me({},le,N.to.state):le,force:m}),z||A)}else N=Ee(A,G,!0,g,le);return ee(A,G,N),N})}function V(x,z){const L=S(x,z);return L?Promise.reject(L):Promise.resolve()}function B(x){const z=Te.values().next().value;return z&&typeof z.runWithContext=="function"?z.runWithContext(x):x()}function j(x,z){let L;const[G,le,m]=pf(x,z);L=Ks(G.reverse(),"beforeRouteLeave",x,z);for(const C of G)C.leaveGuards.forEach(A=>{L.push(an(A,x,z))});const g=V.bind(null,x,z);return L.push(g),he(L).then(()=>{L=[];for(const C of r.list())L.push(an(C,x,z));return L.push(g),he(L)}).then(()=>{L=Ks(le,"beforeRouteUpdate",x,z);for(const C of le)C.updateGuards.forEach(A=>{L.push(an(A,x,z))});return L.push(g),he(L)}).then(()=>{L=[];for(const C of m)if(C.beforeEnter)if(Tt(C.beforeEnter))for(const A of C.beforeEnter)L.push(an(A,x,z));else L.push(an(C.beforeEnter,x,z));return L.push(g),he(L)}).then(()=>(x.matched.forEach(C=>C.enterCallbacks={}),L=Ks(m,"beforeRouteEnter",x,z,B),L.push(g),he(L))).then(()=>{L=[];for(const C of a.list())L.push(an(C,x,z));return L.push(g),he(L)}).catch(C=>Ut(C,Ve.NAVIGATION_CANCELLED)?C:Promise.reject(C))}function ee(x,z,L){i.list().forEach(G=>B(()=>G(x,z,L)))}function Ee(x,z,L,G,le){const m=S(x,z);if(m)return m;const g=z===nn,C=Fn?history.state:{};L&&(G||g?s.replace(x.fullPath,Me({scroll:g&&C&&C.scroll},le)):s.push(x.fullPath,le)),l.value=x,oe(x,z,L,g),we()}let ae;function me(){ae||(ae=s.listen((x,z,L)=>{if(!Re.listening)return;const G=_(x),le=k(G,Re.currentRoute.value);if(le){D(Me(le,{replace:!0,force:!0}),G).catch(_o);return}u=G;const m=l.value;Fn&&rf(Br(m.fullPath,L.delta),ks()),j(G,m).catch(g=>Ut(g,Ve.NAVIGATION_ABORTED|Ve.NAVIGATION_CANCELLED)?g:Ut(g,Ve.NAVIGATION_GUARD_REDIRECT)?(D(Me(E(g.to),{force:!0}),G).then(C=>{Ut(C,Ve.NAVIGATION_ABORTED|Ve.NAVIGATION_DUPLICATED)&&!L.delta&&L.type===_i.pop&&s.go(-1,!1)}).catch(_o),Promise.reject()):(L.delta&&s.go(-L.delta,!1),X(g,G,m))).then(g=>{g=g||Ee(G,m,!1),g&&(L.delta&&!Ut(g,Ve.NAVIGATION_CANCELLED)?s.go(-L.delta,!1):L.type===_i.pop&&Ut(g,Ve.NAVIGATION_ABORTED|Ve.NAVIGATION_DUPLICATED)&&s.go(-1,!1)),ee(G,m,g)}).catch(_o)}))}let ce=io(),Z=io(),P;function X(x,z,L){we(x);const G=Z.list();return G.length?G.forEach(le=>le(x,z,L)):console.error(x),Promise.reject(x)}function ge(){return P&&l.value!==nn?Promise.resolve():new Promise((x,z)=>{ce.add([x,z])})}function we(x){return P||(P=!x,me(),ce.list().forEach(([z,L])=>x?L(x):z()),ce.reset()),x}function oe(x,z,L,G){const{scrollBehavior:le}=e;if(!Fn||!le)return Promise.resolve();const m=!L&&lf(Br(x.fullPath,0))||(G||!L)&&history.state&&history.state.scroll||null;return On().then(()=>le(x,z,m)).then(g=>g&&sf(g)).catch(g=>X(g,x,z))}const se=x=>s.go(x);let ye;const Te=new Set,Re={currentRoute:l,listening:!0,addRoute:h,removeRoute:w,clearRoutes:t.clearRoutes,hasRoute:v,getRoutes:p,resolve:_,options:e,push:y,replace:R,go:se,back:()=>se(-1),forward:()=>se(1),beforeEach:r.add,beforeResolve:a.add,afterEach:i.add,onError:Z.add,isReady:ge,install(x){x.component("RouterLink",Ei),x.component("RouterView",Pa),x.config.globalProperties.$router=Re,Object.defineProperty(x.config.globalProperties,"$route",{enumerable:!0,get:()=>J(l)}),Fn&&!ye&&l.value===nn&&(ye=!0,y(s.location).catch(G=>{}));const z={};for(const G in nn)Object.defineProperty(z,G,{get:()=>l.value[G],enumerable:!0});x.provide(Ns,Re),x.provide(zi,Ol(z)),x.provide(bi,l);const L=x.unmount;Te.add(x),x.unmount=function(){Te.delete(x),Te.size<1&&(u=nn,ae&&ae(),ae=null,l.value=nn,ye=!1,P=!1),L()}}};function he(x){return x.reduce((z,L)=>z.then(()=>B(L)),Promise.resolve())}return Re}function La(){return Ct(Ns)}function Hf(e){return Ct(zi)}const Vi="tg-button-auth-token";function Ba(){try{return localStorage.getItem(Vi)||""}catch{return""}}function Wf(e){try{localStorage.setItem(Vi,e)}catch{}}function jf(){try{localStorage.removeItem(Vi)}catch{}}async function Fa(e,t={}){const n=new Headers(t.headers||{}),o=Ba();o&&n.set("X-Auth-Token",o),t.body instanceof FormData||n.set("Content-Type",n.get("Content-Type")||"application/json");const s=await fetch(e,{...t,headers:n});if(s.status===401)throw jf(),window.location.href="/login",new Error("unauthorized");return s}async function jn(e,t={}){const n=await Fa(e,t);if(!n.ok){const s=await n.text();throw new Error(`API ${n.status}: ${s}`)}return(n.headers.get("Content-Type")||"").includes("application/json")?await n.json():await n.text()}const Xr={version:2,menus:{},buttons:{},actions:{},web_apps:{},workflows:{}},qi=Dd("app",{state:()=>({state:{...Xr},modularActions:[],localActions:[],secureUploadEnabled:!1,loading:!1}),actions:{async loadAll(){this.loading=!0;try{const[e,t,n]=await Promise.all([jn("/api/state"),jn("/api/actions/modular/available").catch(()=>({actions:[],secure_upload_enabled:!1})),jn("/api/actions/local/available").catch(()=>({actions:[]}))]);this.state={...Xr,...e},this.modularActions=t.actions||[],this.secureUploadEnabled=!!t.secure_upload_enabled,this.localActions=n.actions||[]}finally{this.loading=!1}},async saveState(){await jn("/api/state",{method:"PUT",body:JSON.stringify(this.state)})},buildActionPalette(){const e={};for(const[t,n]of Object.entries(this.state.actions||{}))e[t]={...n,id:t,name:n.name||t,description:n.description||""};for(const t of this.localActions||[]){const n=t.name;e[n]={id:n,name:`[] ${t.name}`,description:t.description||"",parameters:t.parameters||[],isLocal:!0}}for(const t of this.modularActions||[])e[t.id]={id:t.id,name:t.name,description:t.description||"",inputs:t.inputs||[],outputs:t.outputs||[],isModular:!0};return e}}}),Uf={app:{title:"Telegram  WebUI",subtitle:" Vue3 ",tabs:{layout:"",workflow:""},saveSuccess:"",saveFailed:": {error}"},toolbar:{refresh:"",saveAll:"",export:" JSON"},login:{title:"WebUI ",subtitle:" WebUI ",placeholder:"X-Auth-Token",submit:"",submitting:"...",emptyToken:" Token",authFailed:""},buttons:{menus:" (Menus)",addMenu:"",emptyMenus:"",menuName:"",menuHeader:"",deleteMenu:"",deleteMenuTitle:"",deleteMenuMessage:" {menuId} ",rootProtected:" root ",unassigned:"",addButton:"",emptyUnassigned:"",defaultMenuName:"",defaultMenuHeader:"",defaultButtonName:""},workflow:{title:"",description:"",create:"",save:"",remove:"",paletteTitle:"",paletteSubtitle:"",paletteSearch:"...",paletteSearchAria:"",paletteUpload:"",paletteList:"",paletteCollapse:"",selectorAria:"",nameLabel:"",namePlaceholder:"",selectPlaceholder:"",zoomLabel:"",zoomOut:"",zoomIn:"",zoomReset:"",nodeEdit:"",nodeMissing:"",advancedJson:" JSON",useRawJson:" JSON",jsonParseFailed:"JSON : {error}",legacy:{paletteSearchMissing:"Palette search input #nodePaletteSearch ",uploadControlMissing:"",authFailed:"",addNodeMissingAction:":  ID",noDescription:"",download:"",delete:"",actionId:" ID",downloadFailed:": {error}",deleteActionSuccess:" '{name}' ",deleteActionFailed:": {error}",passwordRequired:"",deletePasswordPrompt:":",passwordPlaceholder:"...",deleteCancelled:"",deleteActionConfirmTitle:"",deleteActionConfirmMessage:" {name} <br><br>",actionListInvalid:"",actionListEmptyFiltered:" {term} ",actionListEmptyAll:"",uploadSuccess:" '{name}' ",uploadFailed:": {error}",uploadPasswordPrompt:":",uploadCancelled:"",descriptionTitle:"{description}",descriptionEmptyTitle:"",descriptionEditTitle:"",descriptionEditPrompt:"",descriptionEditPlaceholder:"",descriptionPromptFallback:"",paletteExpandAria:"",paletteCollapseAria:"",paletteExpandLabel:"",paletteCollapseLabel:"",paletteStateReadFailed:"",paletteStateSaveFailed:"",workflowSelectPlaceholder:"--  --",workflowNameEmpty:"",workflowNameInvalid:"",nodeMissingAction:" {id} ",saveFailed:": {error}",saveSuccess:" {name} ",loadFailed:"",actionDefinitionMissing:" ID  {id}  {nodeId} ",connectionMissingNode:": {edgeId}",connectionPortMissing:": {edgeId}",loadWorkflowErrorAlert:"",deleteWorkflowSelectFirst:"",deleteWorkflowConfirmTitle:"",deleteWorkflowConfirmMessage:" {name} <br><br>",deleteWorkflowSuccess:" {name} ",loadWorkflowConfirmTitle:"",loadWorkflowConfirmMessage:"",newWorkflowConfirmTitle:"",newWorkflowConfirmMessage:"<br><br>",updateNodeConfigMissing:":  ID  {id} ",getNodeFailed:" {id} :"}},common:{unnamed:"",ok:"",confirm:"",cancel:"",notice:"",error:""}},$f={app:{title:"Telegram Button WebUI",subtitle:"Vue3 refactor with focus on layout & workflow editor.",tabs:{layout:"Menus & Layout",workflow:"Workflows"},saveSuccess:"Saved successfully",saveFailed:"Save failed: {error}"},toolbar:{refresh:"Refresh",saveAll:"Save All",export:"Export JSON"},login:{title:"WebUI Login",subtitle:"Enter WebUI access token.",placeholder:"X-Auth-Token",submit:"Enter",submitting:"Verifying...",emptyToken:"Please enter token",authFailed:"Authentication failed"},buttons:{menus:"Menus",addMenu:"Add Menu",emptyMenus:"No menus yet.",menuName:"Name",menuHeader:"Header",deleteMenu:"Delete Menu",deleteMenuTitle:"Confirm Menu Deletion",deleteMenuMessage:"Delete menu {menuId}? Buttons in it will become unassigned.",rootProtected:"Root menu cannot be deleted",unassigned:"Unassigned Buttons",addButton:"Create Button",emptyUnassigned:"No unassigned buttons.",defaultMenuName:"New Menu",defaultMenuHeader:"New Menu Header",defaultButtonName:"New Button"},workflow:{title:"Workflow Editor",description:"Description",create:"New",save:"Save Workflow",remove:"Delete",paletteTitle:"Modular Actions",paletteSubtitle:"Drag action nodes to the canvas.",paletteSearch:"Search actions...",paletteSearchAria:"Search modular actions",paletteUpload:"Upload",paletteList:"Available actions",paletteCollapse:"Collapse list",selectorAria:"Select workflow",nameLabel:"Workflow name",namePlaceholder:"Enter workflow name",selectPlaceholder:"(Select)",zoomLabel:"Canvas Zoom",zoomOut:"Zoom Out",zoomIn:"Zoom In",zoomReset:"Reset Zoom",nodeEdit:"Edit Node",nodeMissing:"Action definition not found.",advancedJson:"Advanced: Raw JSON",useRawJson:"Save using raw JSON",jsonParseFailed:"JSON parse failed: {error}",legacy:{paletteSearchMissing:"Palette search input #nodePaletteSearch is missing, search filtering disabled.",uploadControlMissing:"Upload controls missing; cannot upload modular actions from the UI.",authFailed:"Authentication failed. Please log in again.",addNodeMissingAction:"Cannot create node on canvas: missing action definition or ID.",noDescription:"No description",download:"Download",delete:"Delete",actionId:"Action ID",downloadFailed:"Download failed: {error}",deleteActionSuccess:"Action '{name}' deleted. The page will refresh.",deleteActionFailed:"Delete failed: {error}",passwordRequired:"Password required",deletePasswordPrompt:"Secure password enabled. Enter password to delete:",passwordPlaceholder:"Enter password...",deleteCancelled:"Delete cancelled.",deleteActionConfirmTitle:"Confirm deletion",deleteActionConfirmMessage:"Delete modular action {name} permanently?<br><br>This cannot be undone.",actionListInvalid:"Action list data is invalid.",actionListEmptyFiltered:"No actions matched {term}.",actionListEmptyAll:"No modular actions available.",uploadSuccess:"Action '{name}' uploaded. The page will refresh to sync.",uploadFailed:"Upload failed: {error}",uploadPasswordPrompt:"Upload password enabled. Enter password to upload:",uploadCancelled:"Upload cancelled.",descriptionTitle:"Description: {description}",descriptionEmptyTitle:"Add a description for this workflow",descriptionEditTitle:"Edit description",descriptionEditPrompt:"Enter a description for this workflow:",descriptionEditPlaceholder:"(Optional) Briefly describe what this workflow does.",descriptionPromptFallback:"Enter workflow description:",paletteExpandAria:"Expand modular action list",paletteCollapseAria:"Collapse modular action list",paletteExpandLabel:"Expand list",paletteCollapseLabel:"Collapse list",paletteStateReadFailed:"Failed to read palette collapse state; defaulting to expanded.",paletteStateSaveFailed:"Failed to save palette collapse state.",workflowSelectPlaceholder:"-- Select workflow --",workflowNameEmpty:"Workflow name cannot be empty.",workflowNameInvalid:"Invalid workflow name. Please enter valid characters.",nodeMissingAction:"Node {id} is missing action data and will be skipped.",saveFailed:"Save failed: {error}",saveSuccess:"Workflow {name} saved!",loadFailed:"Failed to load workflow",actionDefinitionMissing:"Action ID {id} not found; node {nodeId} will be skipped.",connectionMissingNode:"Cannot create connection; source or target node missing: {edgeId}",connectionPortMissing:"Cannot find connection ports: {edgeId}",loadWorkflowErrorAlert:"Load failed. See console for details.",deleteWorkflowSelectFirst:"Please select a workflow to delete.",deleteWorkflowConfirmTitle:"Confirm deletion",deleteWorkflowConfirmMessage:"Delete workflow {name} permanently?<br><br>This cannot be undone.",deleteWorkflowSuccess:"Workflow {name} deleted.",loadWorkflowConfirmTitle:"Confirm load",loadWorkflowConfirmMessage:"Loading a new workflow will overwrite unsaved changes. Continue?",newWorkflowConfirmTitle:"Confirm new workflow",newWorkflowConfirmMessage:"Create a new workflow?<br><br>Unsaved changes on the canvas will be lost.",updateNodeConfigMissing:"Failed to update node config: node ID {id} not found.",getNodeFailed:"Error while getting node {id}:"}},common:{unnamed:"Unnamed",ok:"OK",confirm:"Confirm",cancel:"Cancel",notice:"Notice",error:"Error"}},Oo={"zh-CN":Uf,"en-US":$f},Ha="tg-button-locale",zf=()=>{try{const e=localStorage.getItem(Ha);if(e&&Oo[e])return e}catch{}return"zh-CN"},Gi=kt(zf()),Vf=e=>{if(Oo[e]){Gi.value=e;try{localStorage.setItem(Ha,e)}catch{}}},qf=(e,t)=>t.split(".").reduce((n,o)=>{if(!(!n||typeof n!="object"))return n[o]},e),Gf=(e,t)=>t?e.replace(/\{(\w+)\}/g,(n,o)=>{const s=t[o];return s==null?"":String(s)}):e,Y=(e,t)=>{const n=Oo[Gi.value]||Oo["zh-CN"],o=qf(n,e);return typeof o=="string"?Gf(o,t):e},Ts=()=>({t:Y,locale:Gi,setLocale:Vf,messages:Oo}),Kf={class:"app-shell"},Yf={key:0},Xf={class:"muted"},Jf={key:1},Zf={class:"toolbar"},Qf={class:"tab-nav"},eh={class:"modal-container"},th={class:"modal-header"},nh={id:"modalTitle"},oh={id:"modalBody",class:"modal-body"},sh={key:0},ih=["innerHTML"],rh=["placeholder"],lh=["type","placeholder"],ah=["innerHTML"],ch={id:"modalFooter",class:"modal-footer"},uh={style:{display:"flex","justify-content":"flex-end",gap:"12px",width:"100%"}},dh=to({__name:"App",setup(e){const t=Hf(),n=La(),o=qi(),{t:s}=Ts(),r=dt(()=>t.name==="login"),a=mn({visible:!1,title:"",message:"",isError:!1,type:"info",inputType:"text",placeholder:"",inputValue:"",confirmLabel:"",showCancel:!1,onConfirm:null,onCancel:null}),i=p=>{Object.assign(a,{visible:!0,title:p.title??s("common.notice"),message:p.message??"",isError:p.isError??!1,type:p.type??"info",inputType:p.inputType??"text",placeholder:p.placeholder??"",inputValue:p.inputValue??"",confirmLabel:p.confirmLabel??(p.type==="confirm"?s("common.confirm"):s("common.ok")),showCancel:p.showCancel??p.type!=="info",onConfirm:p.onConfirm??null,onCancel:p.onCancel??null})},l=()=>{a.visible=!1},u=()=>{const p=a.type==="input"?a.inputValue:void 0,v=a.onConfirm;l(),v&&v(p)},d=()=>{const p=a.onCancel;l(),p&&p()},c=async()=>{await o.loadAll()},f=async()=>{var p,v;try{const _=window.tgButtonEditor;_&&typeof _.saveCurrentWorkflow=="function"&&await _.saveCurrentWorkflow();const E=await jn("/api/workflows");o.state.workflows=E,await o.saveState(),(p=window.showInfoModal)==null||p.call(window,s("app.saveSuccess"))}catch(_){(v=window.showInfoModal)==null||v.call(window,s("app.saveFailed",{error:_.message||_}),!0)}},h=()=>{const p=new Blob([JSON.stringify(o.state,null,2)],{type:"application/json"}),v=URL.createObjectURL(p),_=document.createElement("a");_.href=v,_.download="tg_button_config.json",document.body.appendChild(_),_.click(),_.remove(),URL.revokeObjectURL(v)};Ro(()=>{window.showInfoModal=(p,v=!1)=>i({title:s(v?"common.error":"common.notice"),message:p.replace(/\n/g,"<br>"),isError:v,type:"info"}),window.showConfirmModal=(p,v,_,E)=>i({title:p||s("common.confirm"),message:v.replace(/\n/g,"<br>"),type:"confirm",showCancel:!0,confirmLabel:s("common.confirm"),onConfirm:_,onCancel:E}),window.showInputModal=(p,v,_="text",E="",S,y)=>i({title:p||s("common.confirm"),message:v.replace(/\n/g,"<br>"),type:"input",inputType:_,placeholder:E,showCancel:!0,confirmLabel:s("common.confirm"),onConfirm:S,onCancel:y}),r.value||o.loadAll().catch(()=>{t.name!=="login"&&n.push({name:"login"})})});const w=()=>{const p=document.querySelector(".tab-nav"),v=document.getElementById("tabIndicator"),_=document.querySelector(".tab-link.active");if(!p||!v||!_)return;const E=p.getBoundingClientRect(),S=_.getBoundingClientRect();v.style.left=`${S.left-E.left}px`,v.style.width=`${S.width}px`};return In(()=>t.path,async()=>{await On(),w()}),Ro(()=>{w()}),(p,v)=>(Ie(),Ne("div",Kf,[r.value?hn("",!0):(Ie(),Ne("header",Yf,[M("h1",null,ie(J(s)("app.title")),1),M("p",Xf,ie(J(s)("app.subtitle")),1)])),r.value?hn("",!0):(Ie(),Ne("main",Jf,[M("div",Zf,[M("button",{onClick:c},ie(J(s)("toolbar.refresh")),1),M("button",{onClick:f},ie(J(s)("toolbar.saveAll")),1),M("button",{class:"secondary",onClick:h},ie(J(s)("toolbar.export")),1)]),M("div",Qf,[v[2]||(v[2]=M("div",{id:"tabIndicator"},null,-1)),it(J(Ei),{class:"tab-link",to:"/","exact-active-class":"active"},{default:ai(()=>[Nn(ie(J(s)("app.tabs.layout")),1)]),_:1}),it(J(Ei),{class:"tab-link",to:"/workflow","exact-active-class":"active"},{default:ai(()=>[Nn(ie(J(s)("app.tabs.workflow")),1)]),_:1})])])),it(J(Pa)),M("div",{id:"modal",class:Gn(["modal-overlay",{visible:a.visible}]),onClick:va(l,["self"])},[M("div",eh,[M("div",th,[M("h2",nh,ie(a.title),1),M("button",{id:"modalCloseBtn",class:"close-btn",onClick:l},"")]),M("div",oh,[a.type==="input"?(Ie(),Ne("div",sh,[M("p",{innerHTML:a.message},null,8,ih),a.inputType==="textarea"?Pt((Ie(),Ne("textarea",{key:0,class:"modal-input modal-input--textarea",placeholder:a.placeholder,"onUpdate:modelValue":v[0]||(v[0]=_=>a.inputValue=_),rows:"4"},null,8,rh)),[[vn,a.inputValue]]):Pt((Ie(),Ne("input",{key:1,class:"modal-input",type:a.inputType,placeholder:a.placeholder,"onUpdate:modelValue":v[1]||(v[1]=_=>a.inputValue=_)},null,8,lh)),[[vd,a.inputValue]])])):(Ie(),Ne("p",{key:1,innerHTML:a.message,style:ys(a.isError?"color: var(--danger-primary)":"")},null,12,ah))]),M("div",ch,[M("div",uh,[a.showCancel?(Ie(),Ne("button",{key:0,class:"secondary",onClick:d},ie(J(s)("common.cancel")),1)):hn("",!0),M("button",{class:Gn(a.type==="confirm"?"danger":""),onClick:u},ie(a.confirmLabel),3)])])])],2)]))}});/**!
 * Sortable 1.15.6
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Jr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,o)}return n}function Wt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Jr(Object(n),!0).forEach(function(o){fh(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jr(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function Xo(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Xo=function(t){return typeof t}:Xo=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xo(e)}function fh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zt(){return Zt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Zt.apply(this,arguments)}function hh(e,t){if(e==null)return{};var n={},o=Object.keys(e),s,r;for(r=0;r<o.length;r++)s=o[r],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function ph(e,t){if(e==null)return{};var n=hh(e,t),o,s;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(s=0;s<r.length;s++)o=r[s],!(t.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}var mh="1.15.6";function Kt(e){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(e)}var en=Kt(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Lo=Kt(/Edge/i),Zr=Kt(/firefox/i),yo=Kt(/safari/i)&&!Kt(/chrome/i)&&!Kt(/android/i),Ki=Kt(/iP(ad|od|hone)/i),Wa=Kt(/chrome/i)&&Kt(/android/i),ja={capture:!1,passive:!1};function Ae(e,t,n){e.addEventListener(t,n,!en&&ja)}function Se(e,t,n){e.removeEventListener(t,n,!en&&ja)}function us(e,t){if(t){if(t[0]===">"&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch{return!1}return!1}}function Ua(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function It(e,t,n,o){if(e){n=n||document;do{if(t!=null&&(t[0]===">"?e.parentNode===n&&us(e,t):us(e,t))||o&&e===n)return e;if(e===n)break}while(e=Ua(e))}return null}var Qr=/\s+/g;function gt(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var o=(" "+e.className+" ").replace(Qr," ").replace(" "+t+" "," ");e.className=(o+(n?" "+t:"")).replace(Qr," ")}}function ue(e,t,n){var o=e&&e.style;if(o){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),t===void 0?n:n[t];!(t in o)&&t.indexOf("webkit")===-1&&(t="-webkit-"+t),o[t]=n+(typeof n=="string"?"":"px")}}function qn(e,t){var n="";if(typeof e=="string")n=e;else do{var o=ue(e,"transform");o&&o!=="none"&&(n=o+" "+n)}while(!t&&(e=e.parentNode));var s=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return s&&new s(n)}function $a(e,t,n){if(e){var o=e.getElementsByTagName(t),s=0,r=o.length;if(n)for(;s<r;s++)n(o[s],s);return o}return[]}function Bt(){var e=document.scrollingElement;return e||document.documentElement}function Ye(e,t,n,o,s){if(!(!e.getBoundingClientRect&&e!==window)){var r,a,i,l,u,d,c;if(e!==window&&e.parentNode&&e!==Bt()?(r=e.getBoundingClientRect(),a=r.top,i=r.left,l=r.bottom,u=r.right,d=r.height,c=r.width):(a=0,i=0,l=window.innerHeight,u=window.innerWidth,d=window.innerHeight,c=window.innerWidth),(t||n)&&e!==window&&(s=s||e.parentNode,!en))do if(s&&s.getBoundingClientRect&&(ue(s,"transform")!=="none"||n&&ue(s,"position")!=="static")){var f=s.getBoundingClientRect();a-=f.top+parseInt(ue(s,"border-top-width")),i-=f.left+parseInt(ue(s,"border-left-width")),l=a+r.height,u=i+r.width;break}while(s=s.parentNode);if(o&&e!==window){var h=qn(s||e),w=h&&h.a,p=h&&h.d;h&&(a/=p,i/=w,c/=w,d/=p,l=a+d,u=i+c)}return{top:a,left:i,bottom:l,right:u,width:c,height:d}}}function el(e,t,n){for(var o=dn(e,!0),s=Ye(e)[t];o;){var r=Ye(o)[n],a=void 0;if(a=s>=r,!a)return o;if(o===Bt())break;o=dn(o,!1)}return!1}function Qn(e,t,n,o){for(var s=0,r=0,a=e.children;r<a.length;){if(a[r].style.display!=="none"&&a[r]!==de.ghost&&(o||a[r]!==de.dragged)&&It(a[r],n.draggable,e,!1)){if(s===t)return a[r];s++}r++}return null}function Yi(e,t){for(var n=e.lastElementChild;n&&(n===de.ghost||ue(n,"display")==="none"||t&&!us(n,t));)n=n.previousElementSibling;return n||null}function bt(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)e.nodeName.toUpperCase()!=="TEMPLATE"&&e!==de.clone&&(!t||us(e,t))&&n++;return n}function tl(e){var t=0,n=0,o=Bt();if(e)do{var s=qn(e),r=s.a,a=s.d;t+=e.scrollLeft*r,n+=e.scrollTop*a}while(e!==o&&(e=e.parentNode));return[t,n]}function gh(e,t){for(var n in e)if(e.hasOwnProperty(n)){for(var o in t)if(t.hasOwnProperty(o)&&t[o]===e[n][o])return Number(n)}return-1}function dn(e,t){if(!e||!e.getBoundingClientRect)return Bt();var n=e,o=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var s=ue(n);if(n.clientWidth<n.scrollWidth&&(s.overflowX=="auto"||s.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(s.overflowY=="auto"||s.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return Bt();if(o||t)return n;o=!0}}while(n=n.parentNode);return Bt()}function wh(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function Ys(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}var bo;function za(e,t){return function(){if(!bo){var n=arguments,o=this;n.length===1?e.call(o,n[0]):e.apply(o,n),bo=setTimeout(function(){bo=void 0},t)}}}function vh(){clearTimeout(bo),bo=void 0}function Va(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function qa(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}function Ga(e,t,n){var o={};return Array.from(e.children).forEach(function(s){var r,a,i,l;if(!(!It(s,t.draggable,e,!1)||s.animated||s===n)){var u=Ye(s);o.left=Math.min((r=o.left)!==null&&r!==void 0?r:1/0,u.left),o.top=Math.min((a=o.top)!==null&&a!==void 0?a:1/0,u.top),o.right=Math.max((i=o.right)!==null&&i!==void 0?i:-1/0,u.right),o.bottom=Math.max((l=o.bottom)!==null&&l!==void 0?l:-1/0,u.bottom)}}),o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}var pt="Sortable"+new Date().getTime();function _h(){var e=[],t;return{captureAnimationState:function(){if(e=[],!!this.options.animation){var o=[].slice.call(this.el.children);o.forEach(function(s){if(!(ue(s,"display")==="none"||s===de.ghost)){e.push({target:s,rect:Ye(s)});var r=Wt({},e[e.length-1].rect);if(s.thisAnimationDuration){var a=qn(s,!0);a&&(r.top-=a.f,r.left-=a.e)}s.fromRect=r}})}},addAnimationState:function(o){e.push(o)},removeAnimationState:function(o){e.splice(gh(e,{target:o}),1)},animateAll:function(o){var s=this;if(!this.options.animation){clearTimeout(t),typeof o=="function"&&o();return}var r=!1,a=0;e.forEach(function(i){var l=0,u=i.target,d=u.fromRect,c=Ye(u),f=u.prevFromRect,h=u.prevToRect,w=i.rect,p=qn(u,!0);p&&(c.top-=p.f,c.left-=p.e),u.toRect=c,u.thisAnimationDuration&&Ys(f,c)&&!Ys(d,c)&&(w.top-c.top)/(w.left-c.left)===(d.top-c.top)/(d.left-c.left)&&(l=bh(w,f,h,s.options)),Ys(c,d)||(u.prevFromRect=d,u.prevToRect=c,l||(l=s.options.animation),s.animate(u,w,c,l)),l&&(r=!0,a=Math.max(a,l),clearTimeout(u.animationResetTimer),u.animationResetTimer=setTimeout(function(){u.animationTime=0,u.prevFromRect=null,u.fromRect=null,u.prevToRect=null,u.thisAnimationDuration=null},l),u.thisAnimationDuration=l)}),clearTimeout(t),r?t=setTimeout(function(){typeof o=="function"&&o()},a):typeof o=="function"&&o(),e=[]},animate:function(o,s,r,a){if(a){ue(o,"transition",""),ue(o,"transform","");var i=qn(this.el),l=i&&i.a,u=i&&i.d,d=(s.left-r.left)/(l||1),c=(s.top-r.top)/(u||1);o.animatingX=!!d,o.animatingY=!!c,ue(o,"transform","translate3d("+d+"px,"+c+"px,0)"),this.forRepaintDummy=yh(o),ue(o,"transition","transform "+a+"ms"+(this.options.easing?" "+this.options.easing:"")),ue(o,"transform","translate3d(0,0,0)"),typeof o.animated=="number"&&clearTimeout(o.animated),o.animated=setTimeout(function(){ue(o,"transition",""),ue(o,"transform",""),o.animated=!1,o.animatingX=!1,o.animatingY=!1},a)}}}}function yh(e){return e.offsetWidth}function bh(e,t,n,o){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*o.animation}var Pn=[],Xs={initializeByDefault:!0},Bo={mount:function(t){for(var n in Xs)Xs.hasOwnProperty(n)&&!(n in t)&&(t[n]=Xs[n]);Pn.forEach(function(o){if(o.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),Pn.push(t)},pluginEvent:function(t,n,o){var s=this;this.eventCanceled=!1,o.cancel=function(){s.eventCanceled=!0};var r=t+"Global";Pn.forEach(function(a){n[a.pluginName]&&(n[a.pluginName][r]&&n[a.pluginName][r](Wt({sortable:n},o)),n.options[a.pluginName]&&n[a.pluginName][t]&&n[a.pluginName][t](Wt({sortable:n},o)))})},initializePlugins:function(t,n,o,s){Pn.forEach(function(i){var l=i.pluginName;if(!(!t.options[l]&&!i.initializeByDefault)){var u=new i(t,n,t.options);u.sortable=t,u.options=t.options,t[l]=u,Zt(o,u.defaults)}});for(var r in t.options)if(t.options.hasOwnProperty(r)){var a=this.modifyOption(t,r,t.options[r]);typeof a<"u"&&(t.options[r]=a)}},getEventProperties:function(t,n){var o={};return Pn.forEach(function(s){typeof s.eventProperties=="function"&&Zt(o,s.eventProperties.call(n[s.pluginName],t))}),o},modifyOption:function(t,n,o){var s;return Pn.forEach(function(r){t[r.pluginName]&&r.optionListeners&&typeof r.optionListeners[n]=="function"&&(s=r.optionListeners[n].call(t[r.pluginName],o))}),s}};function Eh(e){var t=e.sortable,n=e.rootEl,o=e.name,s=e.targetEl,r=e.cloneEl,a=e.toEl,i=e.fromEl,l=e.oldIndex,u=e.newIndex,d=e.oldDraggableIndex,c=e.newDraggableIndex,f=e.originalEvent,h=e.putSortable,w=e.extraEventProperties;if(t=t||n&&n[pt],!!t){var p,v=t.options,_="on"+o.charAt(0).toUpperCase()+o.substr(1);window.CustomEvent&&!en&&!Lo?p=new CustomEvent(o,{bubbles:!0,cancelable:!0}):(p=document.createEvent("Event"),p.initEvent(o,!0,!0)),p.to=a||n,p.from=i||n,p.item=s||n,p.clone=r,p.oldIndex=l,p.newIndex=u,p.oldDraggableIndex=d,p.newDraggableIndex=c,p.originalEvent=f,p.pullMode=h?h.lastPutMode:void 0;var E=Wt(Wt({},w),Bo.getEventProperties(o,t));for(var S in E)p[S]=E[S];n&&n.dispatchEvent(p),v[_]&&v[_].call(t,p)}}var Ch=["evt"],ht=function(t,n){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=o.evt,r=ph(o,Ch);Bo.pluginEvent.bind(de)(t,n,Wt({dragEl:U,parentEl:ze,ghostEl:pe,rootEl:je,nextEl:Sn,lastDownEl:Jo,cloneEl:$e,cloneHidden:un,dragStarted:lo,putSortable:Qe,activeSortable:de.active,originalEvent:s,oldIndex:Un,oldDraggableIndex:Eo,newIndex:vt,newDraggableIndex:cn,hideGhostForTarget:Ja,unhideGhostForTarget:Za,cloneNowHidden:function(){un=!0},cloneNowShown:function(){un=!1},dispatchSortableEvent:function(i){lt({sortable:n,name:i,originalEvent:s})}},r))};function lt(e){Eh(Wt({putSortable:Qe,cloneEl:$e,targetEl:U,rootEl:je,oldIndex:Un,oldDraggableIndex:Eo,newIndex:vt,newDraggableIndex:cn},e))}var U,ze,pe,je,Sn,Jo,$e,un,Un,vt,Eo,cn,Uo,Qe,Hn=!1,ds=!1,fs=[],bn,At,Js,Zs,nl,ol,lo,Ln,Co,So=!1,$o=!1,Zo,tt,Qs=[],Ci=!1,hs=[],Os=typeof document<"u",zo=Ki,sl=Lo||en?"cssFloat":"float",Sh=Os&&!Wa&&!Ki&&"draggable"in document.createElement("div"),Ka=function(){if(Os){if(en)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"}}(),Ya=function(t,n){var o=ue(t),s=parseInt(o.width)-parseInt(o.paddingLeft)-parseInt(o.paddingRight)-parseInt(o.borderLeftWidth)-parseInt(o.borderRightWidth),r=Qn(t,0,n),a=Qn(t,1,n),i=r&&ue(r),l=a&&ue(a),u=i&&parseInt(i.marginLeft)+parseInt(i.marginRight)+Ye(r).width,d=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+Ye(a).width;if(o.display==="flex")return o.flexDirection==="column"||o.flexDirection==="column-reverse"?"vertical":"horizontal";if(o.display==="grid")return o.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(r&&i.float&&i.float!=="none"){var c=i.float==="left"?"left":"right";return a&&(l.clear==="both"||l.clear===c)?"vertical":"horizontal"}return r&&(i.display==="block"||i.display==="flex"||i.display==="table"||i.display==="grid"||u>=s&&o[sl]==="none"||a&&o[sl]==="none"&&u+d>s)?"vertical":"horizontal"},xh=function(t,n,o){var s=o?t.left:t.top,r=o?t.right:t.bottom,a=o?t.width:t.height,i=o?n.left:n.top,l=o?n.right:n.bottom,u=o?n.width:n.height;return s===i||r===l||s+a/2===i+u/2},Ah=function(t,n){var o;return fs.some(function(s){var r=s[pt].options.emptyInsertThreshold;if(!(!r||Yi(s))){var a=Ye(s),i=t>=a.left-r&&t<=a.right+r,l=n>=a.top-r&&n<=a.bottom+r;if(i&&l)return o=s}}),o},Xa=function(t){function n(r,a){return function(i,l,u,d){var c=i.options.group.name&&l.options.group.name&&i.options.group.name===l.options.group.name;if(r==null&&(a||c))return!0;if(r==null||r===!1)return!1;if(a&&r==="clone")return r;if(typeof r=="function")return n(r(i,l,u,d),a)(i,l,u,d);var f=(a?i:l).options.group.name;return r===!0||typeof r=="string"&&r===f||r.join&&r.indexOf(f)>-1}}var o={},s=t.group;(!s||Xo(s)!="object")&&(s={name:s}),o.name=s.name,o.checkPull=n(s.pull,!0),o.checkPut=n(s.put),o.revertClone=s.revertClone,t.group=o},Ja=function(){!Ka&&pe&&ue(pe,"display","none")},Za=function(){!Ka&&pe&&ue(pe,"display","")};Os&&!Wa&&document.addEventListener("click",function(e){if(ds)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),ds=!1,!1},!0);var En=function(t){if(U){t=t.touches?t.touches[0]:t;var n=Ah(t.clientX,t.clientY);if(n){var o={};for(var s in t)t.hasOwnProperty(s)&&(o[s]=t[s]);o.target=o.rootEl=n,o.preventDefault=void 0,o.stopPropagation=void 0,n[pt]._onDragOver(o)}}},Ih=function(t){U&&U.parentNode[pt]._isOutsideThisEl(t.target)};function de(e,t){if(!(e&&e.nodeType&&e.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=Zt({},t),e[pt]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Ya(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(a,i){a.setData("Text",i.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:de.supportPointer!==!1&&"PointerEvent"in window&&(!yo||Ki),emptyInsertThreshold:5};Bo.initializePlugins(this,e,n);for(var o in n)!(o in t)&&(t[o]=n[o]);Xa(t);for(var s in this)s.charAt(0)==="_"&&typeof this[s]=="function"&&(this[s]=this[s].bind(this));this.nativeDraggable=t.forceFallback?!1:Sh,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?Ae(e,"pointerdown",this._onTapStart):(Ae(e,"mousedown",this._onTapStart),Ae(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(Ae(e,"dragover",this),Ae(e,"dragenter",this)),fs.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),Zt(this,_h())}de.prototype={constructor:de,_isOutsideThisEl:function(t){!this.el.contains(t)&&t!==this.el&&(Ln=null)},_getDirection:function(t,n){return typeof this.options.direction=="function"?this.options.direction.call(this,t,n,U):this.options.direction},_onTapStart:function(t){if(t.cancelable){var n=this,o=this.el,s=this.options,r=s.preventOnFilter,a=t.type,i=t.touches&&t.touches[0]||t.pointerType&&t.pointerType==="touch"&&t,l=(i||t).target,u=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||l,d=s.filter;if(Ph(o),!U&&!(/mousedown|pointerdown/.test(a)&&t.button!==0||s.disabled)&&!u.isContentEditable&&!(!this.nativeDraggable&&yo&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=It(l,s.draggable,o,!1),!(l&&l.animated)&&Jo!==l)){if(Un=bt(l),Eo=bt(l,s.draggable),typeof d=="function"){if(d.call(this,t,l,this)){lt({sortable:n,rootEl:u,name:"filter",targetEl:l,toEl:o,fromEl:o}),ht("filter",n,{evt:t}),r&&t.preventDefault();return}}else if(d&&(d=d.split(",").some(function(c){if(c=It(u,c.trim(),o,!1),c)return lt({sortable:n,rootEl:c,name:"filter",targetEl:l,fromEl:o,toEl:o}),ht("filter",n,{evt:t}),!0}),d)){r&&t.preventDefault();return}s.handle&&!It(u,s.handle,o,!1)||this._prepareDragStart(t,i,l)}}},_prepareDragStart:function(t,n,o){var s=this,r=s.el,a=s.options,i=r.ownerDocument,l;if(o&&!U&&o.parentNode===r){var u=Ye(o);if(je=r,U=o,ze=U.parentNode,Sn=U.nextSibling,Jo=o,Uo=a.group,de.dragged=U,bn={target:U,clientX:(n||t).clientX,clientY:(n||t).clientY},nl=bn.clientX-u.left,ol=bn.clientY-u.top,this._lastX=(n||t).clientX,this._lastY=(n||t).clientY,U.style["will-change"]="all",l=function(){if(ht("delayEnded",s,{evt:t}),de.eventCanceled){s._onDrop();return}s._disableDelayedDragEvents(),!Zr&&s.nativeDraggable&&(U.draggable=!0),s._triggerDragStart(t,n),lt({sortable:s,name:"choose",originalEvent:t}),gt(U,a.chosenClass,!0)},a.ignore.split(",").forEach(function(d){$a(U,d.trim(),ei)}),Ae(i,"dragover",En),Ae(i,"mousemove",En),Ae(i,"touchmove",En),a.supportPointer?(Ae(i,"pointerup",s._onDrop),!this.nativeDraggable&&Ae(i,"pointercancel",s._onDrop)):(Ae(i,"mouseup",s._onDrop),Ae(i,"touchend",s._onDrop),Ae(i,"touchcancel",s._onDrop)),Zr&&this.nativeDraggable&&(this.options.touchStartThreshold=4,U.draggable=!0),ht("delayStart",this,{evt:t}),a.delay&&(!a.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(Lo||en))){if(de.eventCanceled){this._onDrop();return}a.supportPointer?(Ae(i,"pointerup",s._disableDelayedDrag),Ae(i,"pointercancel",s._disableDelayedDrag)):(Ae(i,"mouseup",s._disableDelayedDrag),Ae(i,"touchend",s._disableDelayedDrag),Ae(i,"touchcancel",s._disableDelayedDrag)),Ae(i,"mousemove",s._delayedDragTouchMoveHandler),Ae(i,"touchmove",s._delayedDragTouchMoveHandler),a.supportPointer&&Ae(i,"pointermove",s._delayedDragTouchMoveHandler),s._dragStartTimer=setTimeout(l,a.delay)}else l()}},_delayedDragTouchMoveHandler:function(t){var n=t.touches?t.touches[0]:t;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){U&&ei(U),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;Se(t,"mouseup",this._disableDelayedDrag),Se(t,"touchend",this._disableDelayedDrag),Se(t,"touchcancel",this._disableDelayedDrag),Se(t,"pointerup",this._disableDelayedDrag),Se(t,"pointercancel",this._disableDelayedDrag),Se(t,"mousemove",this._delayedDragTouchMoveHandler),Se(t,"touchmove",this._delayedDragTouchMoveHandler),Se(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,n){n=n||t.pointerType=="touch"&&t,!this.nativeDraggable||n?this.options.supportPointer?Ae(document,"pointermove",this._onTouchMove):n?Ae(document,"touchmove",this._onTouchMove):Ae(document,"mousemove",this._onTouchMove):(Ae(U,"dragend",this),Ae(je,"dragstart",this._onDragStart));try{document.selection?Qo(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(t,n){if(Hn=!1,je&&U){ht("dragStarted",this,{evt:n}),this.nativeDraggable&&Ae(document,"dragover",Ih);var o=this.options;!t&&gt(U,o.dragClass,!1),gt(U,o.ghostClass,!0),de.active=this,t&&this._appendGhost(),lt({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(At){this._lastX=At.clientX,this._lastY=At.clientY,Ja();for(var t=document.elementFromPoint(At.clientX,At.clientY),n=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(At.clientX,At.clientY),t!==n);)n=t;if(U.parentNode[pt]._isOutsideThisEl(t),n)do{if(n[pt]){var o=void 0;if(o=n[pt]._onDragOver({clientX:At.clientX,clientY:At.clientY,target:t,rootEl:n}),o&&!this.options.dragoverBubble)break}t=n}while(n=Ua(n));Za()}},_onTouchMove:function(t){if(bn){var n=this.options,o=n.fallbackTolerance,s=n.fallbackOffset,r=t.touches?t.touches[0]:t,a=pe&&qn(pe,!0),i=pe&&a&&a.a,l=pe&&a&&a.d,u=zo&&tt&&tl(tt),d=(r.clientX-bn.clientX+s.x)/(i||1)+(u?u[0]-Qs[0]:0)/(i||1),c=(r.clientY-bn.clientY+s.y)/(l||1)+(u?u[1]-Qs[1]:0)/(l||1);if(!de.active&&!Hn){if(o&&Math.max(Math.abs(r.clientX-this._lastX),Math.abs(r.clientY-this._lastY))<o)return;this._onDragStart(t,!0)}if(pe){a?(a.e+=d-(Js||0),a.f+=c-(Zs||0)):a={a:1,b:0,c:0,d:1,e:d,f:c};var f="matrix(".concat(a.a,",").concat(a.b,",").concat(a.c,",").concat(a.d,",").concat(a.e,",").concat(a.f,")");ue(pe,"webkitTransform",f),ue(pe,"mozTransform",f),ue(pe,"msTransform",f),ue(pe,"transform",f),Js=d,Zs=c,At=r}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!pe){var t=this.options.fallbackOnBody?document.body:je,n=Ye(U,!0,zo,!0,t),o=this.options;if(zo){for(tt=t;ue(tt,"position")==="static"&&ue(tt,"transform")==="none"&&tt!==document;)tt=tt.parentNode;tt!==document.body&&tt!==document.documentElement?(tt===document&&(tt=Bt()),n.top+=tt.scrollTop,n.left+=tt.scrollLeft):tt=Bt(),Qs=tl(tt)}pe=U.cloneNode(!0),gt(pe,o.ghostClass,!1),gt(pe,o.fallbackClass,!0),gt(pe,o.dragClass,!0),ue(pe,"transition",""),ue(pe,"transform",""),ue(pe,"box-sizing","border-box"),ue(pe,"margin",0),ue(pe,"top",n.top),ue(pe,"left",n.left),ue(pe,"width",n.width),ue(pe,"height",n.height),ue(pe,"opacity","0.8"),ue(pe,"position",zo?"absolute":"fixed"),ue(pe,"zIndex","100000"),ue(pe,"pointerEvents","none"),de.ghost=pe,t.appendChild(pe),ue(pe,"transform-origin",nl/parseInt(pe.style.width)*100+"% "+ol/parseInt(pe.style.height)*100+"%")}},_onDragStart:function(t,n){var o=this,s=t.dataTransfer,r=o.options;if(ht("dragStart",this,{evt:t}),de.eventCanceled){this._onDrop();return}ht("setupClone",this),de.eventCanceled||($e=qa(U),$e.removeAttribute("id"),$e.draggable=!1,$e.style["will-change"]="",this._hideClone(),gt($e,this.options.chosenClass,!1),de.clone=$e),o.cloneId=Qo(function(){ht("clone",o),!de.eventCanceled&&(o.options.removeCloneOnHide||je.insertBefore($e,U),o._hideClone(),lt({sortable:o,name:"clone"}))}),!n&&gt(U,r.dragClass,!0),n?(ds=!0,o._loopId=setInterval(o._emulateDragOver,50)):(Se(document,"mouseup",o._onDrop),Se(document,"touchend",o._onDrop),Se(document,"touchcancel",o._onDrop),s&&(s.effectAllowed="move",r.setData&&r.setData.call(o,s,U)),Ae(document,"drop",o),ue(U,"transform","translateZ(0)")),Hn=!0,o._dragStartId=Qo(o._dragStarted.bind(o,n,t)),Ae(document,"selectstart",o),lo=!0,window.getSelection().removeAllRanges(),yo&&ue(document.body,"user-select","none")},_onDragOver:function(t){var n=this.el,o=t.target,s,r,a,i=this.options,l=i.group,u=de.active,d=Uo===l,c=i.sort,f=Qe||u,h,w=this,p=!1;if(Ci)return;function v(X,ge){ht(X,w,Wt({evt:t,isOwner:d,axis:h?"vertical":"horizontal",revert:a,dragRect:s,targetRect:r,canSort:c,fromSortable:f,target:o,completed:E,onMove:function(oe,se){return Vo(je,n,U,s,oe,Ye(oe),t,se)},changed:S},ge))}function _(){v("dragOverAnimationCapture"),w.captureAnimationState(),w!==f&&f.captureAnimationState()}function E(X){return v("dragOverCompleted",{insertion:X}),X&&(d?u._hideClone():u._showClone(w),w!==f&&(gt(U,Qe?Qe.options.ghostClass:u.options.ghostClass,!1),gt(U,i.ghostClass,!0)),Qe!==w&&w!==de.active?Qe=w:w===de.active&&Qe&&(Qe=null),f===w&&(w._ignoreWhileAnimating=o),w.animateAll(function(){v("dragOverAnimationComplete"),w._ignoreWhileAnimating=null}),w!==f&&(f.animateAll(),f._ignoreWhileAnimating=null)),(o===U&&!U.animated||o===n&&!o.animated)&&(Ln=null),!i.dragoverBubble&&!t.rootEl&&o!==document&&(U.parentNode[pt]._isOutsideThisEl(t.target),!X&&En(t)),!i.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),p=!0}function S(){vt=bt(U),cn=bt(U,i.draggable),lt({sortable:w,name:"change",toEl:n,newIndex:vt,newDraggableIndex:cn,originalEvent:t})}if(t.preventDefault!==void 0&&t.cancelable&&t.preventDefault(),o=It(o,i.draggable,n,!0),v("dragOver"),de.eventCanceled)return p;if(U.contains(t.target)||o.animated&&o.animatingX&&o.animatingY||w._ignoreWhileAnimating===o)return E(!1);if(ds=!1,u&&!i.disabled&&(d?c||(a=ze!==je):Qe===this||(this.lastPutMode=Uo.checkPull(this,u,U,t))&&l.checkPut(this,u,U,t))){if(h=this._getDirection(t,o)==="vertical",s=Ye(U),v("dragOverValid"),de.eventCanceled)return p;if(a)return ze=je,_(),this._hideClone(),v("revert"),de.eventCanceled||(Sn?je.insertBefore(U,Sn):je.appendChild(U)),E(!0);var y=Yi(n,i.draggable);if(!y||Th(t,h,this)&&!y.animated){if(y===U)return E(!1);if(y&&n===t.target&&(o=y),o&&(r=Ye(o)),Vo(je,n,U,s,o,r,t,!!o)!==!1)return _(),y&&y.nextSibling?n.insertBefore(U,y.nextSibling):n.appendChild(U),ze=n,S(),E(!0)}else if(y&&Nh(t,h,this)){var R=Qn(n,0,i,!0);if(R===U)return E(!1);if(o=R,r=Ye(o),Vo(je,n,U,s,o,r,t,!1)!==!1)return _(),n.insertBefore(U,R),ze=n,S(),E(!0)}else if(o.parentNode===n){r=Ye(o);var k=0,D,V=U.parentNode!==n,B=!xh(U.animated&&U.toRect||s,o.animated&&o.toRect||r,h),j=h?"top":"left",ee=el(o,"top","top")||el(U,"top","top"),Ee=ee?ee.scrollTop:void 0;Ln!==o&&(D=r[j],So=!1,$o=!B&&i.invertSwap||V),k=Oh(t,o,r,h,B?1:i.swapThreshold,i.invertedSwapThreshold==null?i.swapThreshold:i.invertedSwapThreshold,$o,Ln===o);var ae;if(k!==0){var me=bt(U);do me-=k,ae=ze.children[me];while(ae&&(ue(ae,"display")==="none"||ae===pe))}if(k===0||ae===o)return E(!1);Ln=o,Co=k;var ce=o.nextElementSibling,Z=!1;Z=k===1;var P=Vo(je,n,U,s,o,r,t,Z);if(P!==!1)return(P===1||P===-1)&&(Z=P===1),Ci=!0,setTimeout(kh,30),_(),Z&&!ce?n.appendChild(U):o.parentNode.insertBefore(U,Z?ce:o),ee&&Va(ee,0,Ee-ee.scrollTop),ze=U.parentNode,D!==void 0&&!$o&&(Zo=Math.abs(D-Ye(o)[j])),S(),E(!0)}if(n.contains(U))return E(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){Se(document,"mousemove",this._onTouchMove),Se(document,"touchmove",this._onTouchMove),Se(document,"pointermove",this._onTouchMove),Se(document,"dragover",En),Se(document,"mousemove",En),Se(document,"touchmove",En)},_offUpEvents:function(){var t=this.el.ownerDocument;Se(t,"mouseup",this._onDrop),Se(t,"touchend",this._onDrop),Se(t,"pointerup",this._onDrop),Se(t,"pointercancel",this._onDrop),Se(t,"touchcancel",this._onDrop),Se(document,"selectstart",this)},_onDrop:function(t){var n=this.el,o=this.options;if(vt=bt(U),cn=bt(U,o.draggable),ht("drop",this,{evt:t}),ze=U&&U.parentNode,vt=bt(U),cn=bt(U,o.draggable),de.eventCanceled){this._nulling();return}Hn=!1,$o=!1,So=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Si(this.cloneId),Si(this._dragStartId),this.nativeDraggable&&(Se(document,"drop",this),Se(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),yo&&ue(document.body,"user-select",""),ue(U,"transform",""),t&&(lo&&(t.cancelable&&t.preventDefault(),!o.dropBubble&&t.stopPropagation()),pe&&pe.parentNode&&pe.parentNode.removeChild(pe),(je===ze||Qe&&Qe.lastPutMode!=="clone")&&$e&&$e.parentNode&&$e.parentNode.removeChild($e),U&&(this.nativeDraggable&&Se(U,"dragend",this),ei(U),U.style["will-change"]="",lo&&!Hn&&gt(U,Qe?Qe.options.ghostClass:this.options.ghostClass,!1),gt(U,this.options.chosenClass,!1),lt({sortable:this,name:"unchoose",toEl:ze,newIndex:null,newDraggableIndex:null,originalEvent:t}),je!==ze?(vt>=0&&(lt({rootEl:ze,name:"add",toEl:ze,fromEl:je,originalEvent:t}),lt({sortable:this,name:"remove",toEl:ze,originalEvent:t}),lt({rootEl:ze,name:"sort",toEl:ze,fromEl:je,originalEvent:t}),lt({sortable:this,name:"sort",toEl:ze,originalEvent:t})),Qe&&Qe.save()):vt!==Un&&vt>=0&&(lt({sortable:this,name:"update",toEl:ze,originalEvent:t}),lt({sortable:this,name:"sort",toEl:ze,originalEvent:t})),de.active&&((vt==null||vt===-1)&&(vt=Un,cn=Eo),lt({sortable:this,name:"end",toEl:ze,originalEvent:t}),this.save()))),this._nulling()},_nulling:function(){ht("nulling",this),je=U=ze=pe=Sn=$e=Jo=un=bn=At=lo=vt=cn=Un=Eo=Ln=Co=Qe=Uo=de.dragged=de.ghost=de.clone=de.active=null,hs.forEach(function(t){t.checked=!0}),hs.length=Js=Zs=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":U&&(this._onDragOver(t),Rh(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t=[],n,o=this.el.children,s=0,r=o.length,a=this.options;s<r;s++)n=o[s],It(n,a.draggable,this.el,!1)&&t.push(n.getAttribute(a.dataIdAttr)||Mh(n));return t},sort:function(t,n){var o={},s=this.el;this.toArray().forEach(function(r,a){var i=s.children[a];It(i,this.options.draggable,s,!1)&&(o[r]=i)},this),n&&this.captureAnimationState(),t.forEach(function(r){o[r]&&(s.removeChild(o[r]),s.appendChild(o[r]))}),n&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,n){return It(t,n||this.options.draggable,this.el,!1)},option:function(t,n){var o=this.options;if(n===void 0)return o[t];var s=Bo.modifyOption(this,t,n);typeof s<"u"?o[t]=s:o[t]=n,t==="group"&&Xa(o)},destroy:function(){ht("destroy",this);var t=this.el;t[pt]=null,Se(t,"mousedown",this._onTapStart),Se(t,"touchstart",this._onTapStart),Se(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(Se(t,"dragover",this),Se(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),fs.splice(fs.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!un){if(ht("hideClone",this),de.eventCanceled)return;ue($e,"display","none"),this.options.removeCloneOnHide&&$e.parentNode&&$e.parentNode.removeChild($e),un=!0}},_showClone:function(t){if(t.lastPutMode!=="clone"){this._hideClone();return}if(un){if(ht("showClone",this),de.eventCanceled)return;U.parentNode==je&&!this.options.group.revertClone?je.insertBefore($e,U):Sn?je.insertBefore($e,Sn):je.appendChild($e),this.options.group.revertClone&&this.animate(U,$e),ue($e,"display",""),un=!1}}};function Rh(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function Vo(e,t,n,o,s,r,a,i){var l,u=e[pt],d=u.options.onMove,c;return window.CustomEvent&&!en&&!Lo?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=t,l.from=e,l.dragged=n,l.draggedRect=o,l.related=s||t,l.relatedRect=r||Ye(t),l.willInsertAfter=i,l.originalEvent=a,e.dispatchEvent(l),d&&(c=d.call(u,l,a)),c}function ei(e){e.draggable=!1}function kh(){Ci=!1}function Nh(e,t,n){var o=Ye(Qn(n.el,0,n.options,!0)),s=Ga(n.el,n.options,pe),r=10;return t?e.clientX<s.left-r||e.clientY<o.top&&e.clientX<o.right:e.clientY<s.top-r||e.clientY<o.bottom&&e.clientX<o.left}function Th(e,t,n){var o=Ye(Yi(n.el,n.options.draggable)),s=Ga(n.el,n.options,pe),r=10;return t?e.clientX>s.right+r||e.clientY>o.bottom&&e.clientX>o.left:e.clientY>s.bottom+r||e.clientX>o.right&&e.clientY>o.top}function Oh(e,t,n,o,s,r,a,i){var l=o?e.clientY:e.clientX,u=o?n.height:n.width,d=o?n.top:n.left,c=o?n.bottom:n.right,f=!1;if(!a){if(i&&Zo<u*s){if(!So&&(Co===1?l>d+u*r/2:l<c-u*r/2)&&(So=!0),So)f=!0;else if(Co===1?l<d+Zo:l>c-Zo)return-Co}else if(l>d+u*(1-s)/2&&l<c-u*(1-s)/2)return Dh(t)}return f=f||a,f&&(l<d+u*r/2||l>c-u*r/2)?l>d+u/2?1:-1:0}function Dh(e){return bt(U)<bt(e)?1:-1}function Mh(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,o=0;n--;)o+=t.charCodeAt(n);return o.toString(36)}function Ph(e){hs.length=0;for(var t=e.getElementsByTagName("input"),n=t.length;n--;){var o=t[n];o.checked&&hs.push(o)}}function Qo(e){return setTimeout(e,0)}function Si(e){return clearTimeout(e)}Os&&Ae(document,"touchmove",function(e){(de.active||Hn)&&e.cancelable&&e.preventDefault()});de.utils={on:Ae,off:Se,css:ue,find:$a,is:function(t,n){return!!It(t,n,t,!1)},extend:wh,throttle:za,closest:It,toggleClass:gt,clone:qa,index:bt,nextTick:Qo,cancelNextTick:Si,detectDirection:Ya,getChild:Qn,expando:pt};de.get=function(e){return e[pt]};de.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach(function(o){if(!o.prototype||!o.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(o));o.utils&&(de.utils=Wt(Wt({},de.utils),o.utils)),Bo.mount(o)})};de.create=function(e,t){return new de(e,t)};de.version=mh;var Ke=[],ao,xi,Ai=!1,ti,ni,ps,co;function Lh(){function e(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}return e.prototype={dragStarted:function(n){var o=n.originalEvent;this.sortable.nativeDraggable?Ae(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Ae(document,"pointermove",this._handleFallbackAutoScroll):o.touches?Ae(document,"touchmove",this._handleFallbackAutoScroll):Ae(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var o=n.originalEvent;!this.options.dragOverBubble&&!o.rootEl&&this._handleAutoScroll(o)},drop:function(){this.sortable.nativeDraggable?Se(document,"dragover",this._handleAutoScroll):(Se(document,"pointermove",this._handleFallbackAutoScroll),Se(document,"touchmove",this._handleFallbackAutoScroll),Se(document,"mousemove",this._handleFallbackAutoScroll)),il(),es(),vh()},nulling:function(){ps=xi=ao=Ai=co=ti=ni=null,Ke.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,o){var s=this,r=(n.touches?n.touches[0]:n).clientX,a=(n.touches?n.touches[0]:n).clientY,i=document.elementFromPoint(r,a);if(ps=n,o||this.options.forceAutoScrollFallback||Lo||en||yo){oi(n,this.options,i,o);var l=dn(i,!0);Ai&&(!co||r!==ti||a!==ni)&&(co&&il(),co=setInterval(function(){var u=dn(document.elementFromPoint(r,a),!0);u!==l&&(l=u,es()),oi(n,s.options,u,o)},10),ti=r,ni=a)}else{if(!this.options.bubbleScroll||dn(i,!0)===Bt()){es();return}oi(n,this.options,dn(i,!1),!1)}}},Zt(e,{pluginName:"scroll",initializeByDefault:!0})}function es(){Ke.forEach(function(e){clearInterval(e.pid)}),Ke=[]}function il(){clearInterval(co)}var oi=za(function(e,t,n,o){if(t.scroll){var s=(e.touches?e.touches[0]:e).clientX,r=(e.touches?e.touches[0]:e).clientY,a=t.scrollSensitivity,i=t.scrollSpeed,l=Bt(),u=!1,d;xi!==n&&(xi=n,es(),ao=t.scroll,d=t.scrollFn,ao===!0&&(ao=dn(n,!0)));var c=0,f=ao;do{var h=f,w=Ye(h),p=w.top,v=w.bottom,_=w.left,E=w.right,S=w.width,y=w.height,R=void 0,k=void 0,D=h.scrollWidth,V=h.scrollHeight,B=ue(h),j=h.scrollLeft,ee=h.scrollTop;h===l?(R=S<D&&(B.overflowX==="auto"||B.overflowX==="scroll"||B.overflowX==="visible"),k=y<V&&(B.overflowY==="auto"||B.overflowY==="scroll"||B.overflowY==="visible")):(R=S<D&&(B.overflowX==="auto"||B.overflowX==="scroll"),k=y<V&&(B.overflowY==="auto"||B.overflowY==="scroll"));var Ee=R&&(Math.abs(E-s)<=a&&j+S<D)-(Math.abs(_-s)<=a&&!!j),ae=k&&(Math.abs(v-r)<=a&&ee+y<V)-(Math.abs(p-r)<=a&&!!ee);if(!Ke[c])for(var me=0;me<=c;me++)Ke[me]||(Ke[me]={});(Ke[c].vx!=Ee||Ke[c].vy!=ae||Ke[c].el!==h)&&(Ke[c].el=h,Ke[c].vx=Ee,Ke[c].vy=ae,clearInterval(Ke[c].pid),(Ee!=0||ae!=0)&&(u=!0,Ke[c].pid=setInterval((function(){o&&this.layer===0&&de.active._onTouchMove(ps);var ce=Ke[this.layer].vy?Ke[this.layer].vy*i:0,Z=Ke[this.layer].vx?Ke[this.layer].vx*i:0;typeof d=="function"&&d.call(de.dragged.parentNode[pt],Z,ce,e,ps,Ke[this.layer].el)!=="continue"||Va(Ke[this.layer].el,Z,ce)}).bind({layer:c}),24))),c++}while(t.bubbleScroll&&f!==l&&(f=dn(f,!1)));Ai=u}},30),Qa=function(t){var n=t.originalEvent,o=t.putSortable,s=t.dragEl,r=t.activeSortable,a=t.dispatchSortableEvent,i=t.hideGhostForTarget,l=t.unhideGhostForTarget;if(n){var u=o||r;i();var d=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,c=document.elementFromPoint(d.clientX,d.clientY);l(),u&&!u.el.contains(c)&&(a("spill"),this.onSpill({dragEl:s,putSortable:o}))}};function Xi(){}Xi.prototype={startIndex:null,dragStart:function(t){var n=t.oldDraggableIndex;this.startIndex=n},onSpill:function(t){var n=t.dragEl,o=t.putSortable;this.sortable.captureAnimationState(),o&&o.captureAnimationState();var s=Qn(this.sortable.el,this.startIndex,this.options);s?this.sortable.el.insertBefore(n,s):this.sortable.el.appendChild(n),this.sortable.animateAll(),o&&o.animateAll()},drop:Qa};Zt(Xi,{pluginName:"revertOnSpill"});function Ji(){}Ji.prototype={onSpill:function(t){var n=t.dragEl,o=t.putSortable,s=o||this.sortable;s.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),s.animateAll()},drop:Qa};Zt(Ji,{pluginName:"removeOnSpill"});de.mount(new Lh);de.mount(Ji,Xi);const Bh={class:"layout-page"},Fh={class:"layout-container"},Hh={id:"menus-column"},Wh={id:"menuSection"},jh={key:0,class:"muted"},Uh={class:"details-content"},$h={class:"field"},zh=["onUpdate:modelValue"],Vh={class:"field"},qh=["onUpdate:modelValue"],Gh=["data-menu-id"],Kh=["data-menu-id","data-row-index"],Yh=["data-button-id"],Xh=["onClick"],Jh={id:"button-bank-column"},Zh={id:"buttonBankSection"},Qh={class:"menu-layout-row","data-unassigned":"true"},ep=["data-button-id"],tp={key:0,class:"muted",style:{"margin-top":"12px"}},np=to({__name:"ButtonsView",setup(e){const t=qi(),{t:n}=Ts(),o=kt({}),s=kt([]),r=kt([]);let a=!1;const i=dt(()=>Object.values(t.state.menus||{})),l=()=>{var D,V,B;const y={},R=new Set;for(const j of i.value){const ee=new Map;for(const me of j.items||[]){const ce=(D=t.state.buttons)==null?void 0:D[me];if(!ce)continue;const Z=((V=ce.layout)==null?void 0:V.row)??0,P=((B=ce.layout)==null?void 0:B.col)??0;ee.has(Z)||ee.set(Z,[]),ee.get(Z).push(ce),ce.__tmpCol=P,R.add(ce.id)}const ae=Array.from(ee.keys()).sort((me,ce)=>me-ce).map(me=>{const ce=ee.get(me)||[];return ce.sort((Z,P)=>(Z.__tmpCol??0)-(P.__tmpCol??0)),ce.forEach(Z=>delete Z.__tmpCol),ce});u(ae),y[j.id]=ae}const k=[];for(const j of Object.values(t.state.buttons||{}))R.has(j.id)||k.push(j);o.value=y,s.value=k,p()},u=y=>{(y.length===0||y[y.length-1].length>0)&&y.push([])},d=()=>{const y=new Set;for(const k of i.value){const D=o.value[k.id]||[],V=[];let B=0;for(const j of D)!j||j.length===0||(j.forEach((ee,Ee)=>{ee.layout||(ee.layout={}),ee.layout.row=B,ee.layout.col=Ee,ee.layout.rowspan=ee.layout.rowspan??1,ee.layout.colspan=ee.layout.colspan??1,V.push(ee.id),y.add(ee.id)}),B+=1);k.items=V,u(D)}for(const k of Object.values(t.state.buttons||{}))y.has(k.id)||k.layout&&(delete k.layout.row,delete k.layout.col);const R=s.value.filter(k=>!y.has(k.id));for(const k of Object.values(t.state.buttons||{}))!y.has(k.id)&&!R.find(D=>D.id===k.id)&&R.push(k);s.value=R},c=y=>{if(y.dataset.unassigned==="true")return s.value;const R=y.dataset.menuId,k=Number(y.dataset.rowIndex);return!R||Number.isNaN(k)?[]:(o.value[R]||(o.value[R]=[]),o.value[R][k]||(o.value[R][k]=[]),o.value[R][k])},f=y=>{var ee,Ee,ae;const R=y.from,k=y.to,D=c(R),V=c(k),B=y.oldIndex,j=y.newIndex;if(!(B===void 0||j===void 0)){if(D===V){const[me]=D.splice(B,1);me&&D.splice(j,0,me)}else{const[me]=D.splice(B,1),ce=(Ee=(ee=y.item)==null?void 0:ee.dataset)==null?void 0:Ee.buttonId,Z=me||(ce?(ae=t.state.buttons)==null?void 0:ae[ce]:void 0);Z&&V.splice(j,0,Z)}d(),p()}},h=()=>{r.value.forEach(y=>y.destroy()),r.value=[]},w=()=>{h(),document.querySelectorAll(".menu-layout-row").forEach(R=>{const k=de.create(R,{group:"buttons",draggable:".menu-btn-wrapper",animation:150,ghostClass:"sortable-ghost",dragClass:"sortable-drag",fallbackOnBody:!0,forceFallback:!0,fallbackTolerance:6,touchStartThreshold:8,delay:150,delayOnTouchOnly:!0,onEnd:f});r.value.push(k)})},p=()=>{a||(a=!0,requestAnimationFrame(async()=>{a=!1,await On(),w()}))},v=async()=>{const y=await S("menu");t.state.menus[y]={id:y,name:n("buttons.defaultMenuName"),header:n("buttons.defaultMenuHeader"),items:[]},l()},_=async()=>{const y=await S("button");t.state.buttons[y]={id:y,text:n("buttons.defaultButtonName"),type:"command",payload:{},layout:{row:0,col:0,rowspan:1,colspan:1}},l()},E=y=>{var R,k;if(y==="root"){(R=window.showInfoModal)==null||R.call(window,n("buttons.rootProtected"),!0);return}(k=window.showConfirmModal)==null||k.call(window,n("buttons.deleteMenuTitle"),n("buttons.deleteMenuMessage",{menuId:y}),()=>{delete t.state.menus[y],l()})},S=async y=>(await jn("/api/util/ids",{method:"POST",body:JSON.stringify({type:y})})).id;return In(()=>t.state,()=>{l()},{deep:!0,immediate:!0}),Ro(async()=>{!t.loading&&Object.keys(t.state.buttons||{}).length===0&&await t.loadAll(),l()}),Vl(()=>{h()}),(y,R)=>(Ie(),Ne("main",Bh,[M("div",Fh,[M("div",Hh,[M("section",Wh,[M("h2",null,[Nn(ie(J(n)("buttons.menus"))+" ",1),M("button",{class:"secondary",style:{"margin-left":"8px"},onClick:v},ie(J(n)("buttons.addMenu")),1)]),i.value.length===0?(Ie(),Ne("div",jh,ie(J(n)("buttons.emptyMenus")),1)):hn("",!0),(Ie(!0),Ne(st,null,Wn(i.value,k=>(Ie(),Ne("details",{key:k.id,open:""},[M("summary",null,ie(k.id)+" ("+ie(k.name||J(n)("common.unnamed"))+")",1),M("div",Uh,[M("div",$h,[M("label",null,ie(J(n)("buttons.menuName")),1),Pt(M("input",{"onUpdate:modelValue":D=>k.name=D,type:"text"},null,8,zh),[[vn,k.name]])]),M("div",Vh,[M("label",null,ie(J(n)("buttons.menuHeader")),1),Pt(M("textarea",{"onUpdate:modelValue":D=>k.header=D,rows:"2"},null,8,qh),[[vn,k.header]])]),M("div",{class:"menu-layout-grid","data-menu-id":k.id},[(Ie(!0),Ne(st,null,Wn(o.value[k.id],(D,V)=>(Ie(),Ne("div",{key:`${k.id}-row-${V}`,class:Gn(["menu-layout-row",{"empty-row":D.length===0}]),"data-menu-id":k.id,"data-row-index":V},[(Ie(!0),Ne(st,null,Wn(D,B=>(Ie(),Ne("div",{key:B.id,class:"menu-btn-wrapper","data-button-id":B.id},ie(B.text||B.id),9,Yh))),128))],10,Kh))),128))],8,Gh),M("button",{class:"danger",style:{"margin-top":"12px"},onClick:D=>E(k.id)},ie(J(n)("buttons.deleteMenu")),9,Xh)])]))),128))])]),M("div",Jh,[M("section",Zh,[M("h2",null,[Nn(ie(J(n)("buttons.unassigned"))+" ",1),M("button",{class:"secondary",style:{"margin-left":"8px"},onClick:_},ie(J(n)("buttons.addButton")),1)]),M("div",Qh,[(Ie(!0),Ne(st,null,Wn(s.value,k=>(Ie(),Ne("div",{key:k.id,class:"menu-btn-wrapper","data-button-id":k.id},ie(k.text||k.id),9,ep))),128))]),s.value.length===0?(Ie(),Ne("p",tp,ie(J(n)("buttons.emptyUnassigned")),1)):hn("",!0)])])])]))}});var op=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function sp(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ec={exports:{}};(function(e,t){(function(n,o){e.exports=o()})(typeof self<"u"?self:op,function(){return function(n){var o={};function s(r){if(o[r])return o[r].exports;var a=o[r]={i:r,l:!1,exports:{}};return n[r].call(a.exports,a,a.exports,s),a.l=!0,a.exports}return s.m=n,s.c=o,s.d=function(r,a,i){s.o(r,a)||Object.defineProperty(r,a,{enumerable:!0,get:i})},s.r=function(r){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},s.t=function(r,a){if(1&a&&(r=s(r)),8&a||4&a&&typeof r=="object"&&r&&r.__esModule)return r;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:r}),2&a&&typeof r!="string")for(var l in r)s.d(i,l,(function(u){return r[u]}).bind(null,l));return i},s.n=function(r){var a=r&&r.__esModule?function(){return r.default}:function(){return r};return s.d(a,"a",a),a},s.o=function(r,a){return Object.prototype.hasOwnProperty.call(r,a)},s.p="",s(s.s=0)}([function(n,o,s){s.r(o),s.d(o,"default",function(){return r});class r{constructor(i,l=null,u=null){this.events={},this.container=i,this.precanvas=null,this.nodeId=1,this.ele_selected=null,this.node_selected=null,this.drag=!1,this.reroute=!1,this.reroute_fix_curvature=!1,this.curvature=.5,this.reroute_curvature_start_end=.5,this.reroute_curvature=.5,this.reroute_width=6,this.drag_point=!1,this.editor_selected=!1,this.connection=!1,this.connection_ele=null,this.connection_selected=null,this.canvas_x=0,this.canvas_y=0,this.pos_x=0,this.pos_x_start=0,this.pos_y=0,this.pos_y_start=0,this.mouse_x=0,this.mouse_y=0,this.line_path=5,this.first_click=null,this.force_first_input=!1,this.draggable_inputs=!0,this.useuuid=!1,this.parent=u,this.noderegister={},this.render=l,this.drawflow={drawflow:{Home:{data:{}}}},this.module="Home",this.editor_mode="edit",this.zoom=1,this.zoom_max=1.6,this.zoom_min=.5,this.zoom_value=.1,this.zoom_last_value=1,this.evCache=new Array,this.prevDiff=-1}start(){this.container.classList.add("parent-drawflow"),this.container.tabIndex=0,this.precanvas=document.createElement("div"),this.precanvas.classList.add("drawflow"),this.container.appendChild(this.precanvas),this.container.addEventListener("mouseup",this.dragEnd.bind(this)),this.container.addEventListener("mousemove",this.position.bind(this)),this.container.addEventListener("mousedown",this.click.bind(this)),this.container.addEventListener("touchend",this.dragEnd.bind(this)),this.container.addEventListener("touchmove",this.position.bind(this)),this.container.addEventListener("touchstart",this.click.bind(this)),this.container.addEventListener("contextmenu",this.contextmenu.bind(this)),this.container.addEventListener("keydown",this.key.bind(this)),this.container.addEventListener("wheel",this.zoom_enter.bind(this)),this.container.addEventListener("input",this.updateNodeValue.bind(this)),this.container.addEventListener("dblclick",this.dblclick.bind(this)),this.container.onpointerdown=this.pointerdown_handler.bind(this),this.container.onpointermove=this.pointermove_handler.bind(this),this.container.onpointerup=this.pointerup_handler.bind(this),this.container.onpointercancel=this.pointerup_handler.bind(this),this.container.onpointerout=this.pointerup_handler.bind(this),this.container.onpointerleave=this.pointerup_handler.bind(this),this.load()}pointerdown_handler(i){this.evCache.push(i)}pointermove_handler(i){for(var l=0;l<this.evCache.length;l++)if(i.pointerId==this.evCache[l].pointerId){this.evCache[l]=i;break}if(this.evCache.length==2){var u=Math.abs(this.evCache[0].clientX-this.evCache[1].clientX);this.prevDiff>100&&(u>this.prevDiff&&this.zoom_in(),u<this.prevDiff&&this.zoom_out()),this.prevDiff=u}}pointerup_handler(i){this.remove_event(i),this.evCache.length<2&&(this.prevDiff=-1)}remove_event(i){for(var l=0;l<this.evCache.length;l++)if(this.evCache[l].pointerId==i.pointerId){this.evCache.splice(l,1);break}}load(){for(var i in this.drawflow.drawflow[this.module].data)this.addNodeImport(this.drawflow.drawflow[this.module].data[i],this.precanvas);if(this.reroute)for(var i in this.drawflow.drawflow[this.module].data)this.addRerouteImport(this.drawflow.drawflow[this.module].data[i]);for(var i in this.drawflow.drawflow[this.module].data)this.updateConnectionNodes("node-"+i);const l=this.drawflow.drawflow;let u=1;Object.keys(l).map(function(d,c){Object.keys(l[d].data).map(function(f,h){parseInt(f)>=u&&(u=parseInt(f)+1)})}),this.nodeId=u}removeReouteConnectionSelected(){this.dispatch("connectionUnselected",!0),this.reroute_fix_curvature&&this.connection_selected.parentElement.querySelectorAll(".main-path").forEach((i,l)=>{i.classList.remove("selected")})}click(i){if(this.dispatch("click",i),this.editor_mode==="fixed"){if(i.target.classList[0]!=="parent-drawflow"&&i.target.classList[0]!=="drawflow")return!1;this.ele_selected=i.target.closest(".parent-drawflow"),i.preventDefault()}else this.editor_mode==="view"?(i.target.closest(".drawflow")!=null||i.target.matches(".parent-drawflow"))&&(this.ele_selected=i.target.closest(".parent-drawflow"),i.preventDefault()):(this.first_click=i.target,this.ele_selected=i.target,i.button===0&&this.contextmenuDel(),i.target.closest(".drawflow_content_node")!=null&&(this.ele_selected=i.target.closest(".drawflow_content_node").parentElement));switch(this.ele_selected.classList[0]){case"drawflow-node":this.node_selected!=null&&(this.node_selected.classList.remove("selected"),this.node_selected!=this.ele_selected&&this.dispatch("nodeUnselected",!0)),this.connection_selected!=null&&(this.connection_selected.classList.remove("selected"),this.removeReouteConnectionSelected(),this.connection_selected=null),this.node_selected!=this.ele_selected&&this.dispatch("nodeSelected",this.ele_selected.id.slice(5)),this.node_selected=this.ele_selected,this.node_selected.classList.add("selected"),this.draggable_inputs?i.target.tagName!=="SELECT"&&(this.drag=!0):i.target.tagName!=="INPUT"&&i.target.tagName!=="TEXTAREA"&&i.target.tagName!=="SELECT"&&i.target.hasAttribute("contenteditable")!==!0&&(this.drag=!0);break;case"output":this.connection=!0,this.node_selected!=null&&(this.node_selected.classList.remove("selected"),this.node_selected=null,this.dispatch("nodeUnselected",!0)),this.connection_selected!=null&&(this.connection_selected.classList.remove("selected"),this.removeReouteConnectionSelected(),this.connection_selected=null),this.drawConnection(i.target);break;case"parent-drawflow":case"drawflow":this.node_selected!=null&&(this.node_selected.classList.remove("selected"),this.node_selected=null,this.dispatch("nodeUnselected",!0)),this.connection_selected!=null&&(this.connection_selected.classList.remove("selected"),this.removeReouteConnectionSelected(),this.connection_selected=null),this.editor_selected=!0;break;case"main-path":this.node_selected!=null&&(this.node_selected.classList.remove("selected"),this.node_selected=null,this.dispatch("nodeUnselected",!0)),this.connection_selected!=null&&(this.connection_selected.classList.remove("selected"),this.removeReouteConnectionSelected(),this.connection_selected=null),this.connection_selected=this.ele_selected,this.connection_selected.classList.add("selected");const l=this.connection_selected.parentElement.classList;l.length>1&&(this.dispatch("connectionSelected",{output_id:l[2].slice(14),input_id:l[1].slice(13),output_class:l[3],input_class:l[4]}),this.reroute_fix_curvature&&this.connection_selected.parentElement.querySelectorAll(".main-path").forEach((u,d)=>{u.classList.add("selected")}));break;case"point":this.drag_point=!0,this.ele_selected.classList.add("selected");break;case"drawflow-delete":this.node_selected&&this.removeNodeId(this.node_selected.id),this.connection_selected&&this.removeConnection(),this.node_selected!=null&&(this.node_selected.classList.remove("selected"),this.node_selected=null,this.dispatch("nodeUnselected",!0)),this.connection_selected!=null&&(this.connection_selected.classList.remove("selected"),this.removeReouteConnectionSelected(),this.connection_selected=null)}i.type==="touchstart"?(this.pos_x=i.touches[0].clientX,this.pos_x_start=i.touches[0].clientX,this.pos_y=i.touches[0].clientY,this.pos_y_start=i.touches[0].clientY,this.mouse_x=i.touches[0].clientX,this.mouse_y=i.touches[0].clientY):(this.pos_x=i.clientX,this.pos_x_start=i.clientX,this.pos_y=i.clientY,this.pos_y_start=i.clientY),["input","output","main-path"].includes(this.ele_selected.classList[0])&&i.preventDefault(),this.dispatch("clickEnd",i)}position(i){if(i.type==="touchmove")var l=i.touches[0].clientX,u=i.touches[0].clientY;else l=i.clientX,u=i.clientY;if(this.connection&&this.updateConnection(l,u),this.editor_selected&&(d=this.canvas_x+-(this.pos_x-l),c=this.canvas_y+-(this.pos_y-u),this.dispatch("translate",{x:d,y:c}),this.precanvas.style.transform="translate("+d+"px, "+c+"px) scale("+this.zoom+")"),this.drag){i.preventDefault();var d=(this.pos_x-l)*this.precanvas.clientWidth/(this.precanvas.clientWidth*this.zoom),c=(this.pos_y-u)*this.precanvas.clientHeight/(this.precanvas.clientHeight*this.zoom);this.pos_x=l,this.pos_y=u,this.ele_selected.style.top=this.ele_selected.offsetTop-c+"px",this.ele_selected.style.left=this.ele_selected.offsetLeft-d+"px",this.drawflow.drawflow[this.module].data[this.ele_selected.id.slice(5)].pos_x=this.ele_selected.offsetLeft-d,this.drawflow.drawflow[this.module].data[this.ele_selected.id.slice(5)].pos_y=this.ele_selected.offsetTop-c,this.updateConnectionNodes(this.ele_selected.id)}if(this.drag_point){d=(this.pos_x-l)*this.precanvas.clientWidth/(this.precanvas.clientWidth*this.zoom),c=(this.pos_y-u)*this.precanvas.clientHeight/(this.precanvas.clientHeight*this.zoom),this.pos_x=l,this.pos_y=u;var f=this.pos_x*(this.precanvas.clientWidth/(this.precanvas.clientWidth*this.zoom))-this.precanvas.getBoundingClientRect().x*(this.precanvas.clientWidth/(this.precanvas.clientWidth*this.zoom)),h=this.pos_y*(this.precanvas.clientHeight/(this.precanvas.clientHeight*this.zoom))-this.precanvas.getBoundingClientRect().y*(this.precanvas.clientHeight/(this.precanvas.clientHeight*this.zoom));this.ele_selected.setAttributeNS(null,"cx",f),this.ele_selected.setAttributeNS(null,"cy",h);const w=this.ele_selected.parentElement.classList[2].slice(9),p=this.ele_selected.parentElement.classList[1].slice(13),v=this.ele_selected.parentElement.classList[3],_=this.ele_selected.parentElement.classList[4];let E=Array.from(this.ele_selected.parentElement.children).indexOf(this.ele_selected)-1;this.reroute_fix_curvature&&(E-=this.ele_selected.parentElement.querySelectorAll(".main-path").length-1,E<0&&(E=0));const S=w.slice(5),y=this.drawflow.drawflow[this.module].data[S].outputs[v].connections.findIndex(function(k,D){return k.node===p&&k.output===_});this.drawflow.drawflow[this.module].data[S].outputs[v].connections[y].points[E]={pos_x:f,pos_y:h};const R=this.ele_selected.parentElement.classList[2].slice(9);this.updateConnectionNodes(R)}i.type==="touchmove"&&(this.mouse_x=l,this.mouse_y=u),this.dispatch("mouseMove",{x:l,y:u})}dragEnd(i){if(i.type==="touchend")var l=this.mouse_x,u=this.mouse_y,d=document.elementFromPoint(l,u);else l=i.clientX,u=i.clientY,d=i.target;if(this.drag&&(this.pos_x_start==l&&this.pos_y_start==u||this.dispatch("nodeMoved",this.ele_selected.id.slice(5))),this.drag_point&&(this.ele_selected.classList.remove("selected"),this.pos_x_start==l&&this.pos_y_start==u||this.dispatch("rerouteMoved",this.ele_selected.parentElement.classList[2].slice(14))),this.editor_selected&&(this.canvas_x=this.canvas_x+-(this.pos_x-l),this.canvas_y=this.canvas_y+-(this.pos_y-u),this.editor_selected=!1),this.connection===!0)if(d.classList[0]==="input"||this.force_first_input&&(d.closest(".drawflow_content_node")!=null||d.classList[0]==="drawflow-node")){if(!this.force_first_input||d.closest(".drawflow_content_node")==null&&d.classList[0]!=="drawflow-node")c=d.parentElement.parentElement.id,f=d.classList[1];else{if(d.closest(".drawflow_content_node")!=null)var c=d.closest(".drawflow_content_node").parentElement.id;else var c=d.id;if(Object.keys(this.getNodeFromId(c.slice(5)).inputs).length===0)var f=!1;else var f="input_1"}var h=this.ele_selected.parentElement.parentElement.id,w=this.ele_selected.classList[1];if(h!==c&&f!==!1){if(this.container.querySelectorAll(".connection.node_in_"+c+".node_out_"+h+"."+w+"."+f).length===0){this.connection_ele.classList.add("node_in_"+c),this.connection_ele.classList.add("node_out_"+h),this.connection_ele.classList.add(w),this.connection_ele.classList.add(f);var p=c.slice(5),v=h.slice(5);this.drawflow.drawflow[this.module].data[v].outputs[w].connections.push({node:p,output:f}),this.drawflow.drawflow[this.module].data[p].inputs[f].connections.push({node:v,input:w}),this.updateConnectionNodes("node-"+v),this.updateConnectionNodes("node-"+p),this.dispatch("connectionCreated",{output_id:v,input_id:p,output_class:w,input_class:f})}else this.dispatch("connectionCancel",!0),this.connection_ele.remove();this.connection_ele=null}else this.dispatch("connectionCancel",!0),this.connection_ele.remove(),this.connection_ele=null}else this.dispatch("connectionCancel",!0),this.connection_ele.remove(),this.connection_ele=null;this.drag=!1,this.drag_point=!1,this.connection=!1,this.ele_selected=null,this.editor_selected=!1,this.dispatch("mouseUp",i)}contextmenu(i){if(this.dispatch("contextmenu",i),i.preventDefault(),this.editor_mode==="fixed"||this.editor_mode==="view")return!1;if(this.precanvas.getElementsByClassName("drawflow-delete").length&&this.precanvas.getElementsByClassName("drawflow-delete")[0].remove(),this.node_selected||this.connection_selected){var l=document.createElement("div");l.classList.add("drawflow-delete"),l.innerHTML="x",this.node_selected&&this.node_selected.appendChild(l),this.connection_selected&&this.connection_selected.parentElement.classList.length>1&&(l.style.top=i.clientY*(this.precanvas.clientHeight/(this.precanvas.clientHeight*this.zoom))-this.precanvas.getBoundingClientRect().y*(this.precanvas.clientHeight/(this.precanvas.clientHeight*this.zoom))+"px",l.style.left=i.clientX*(this.precanvas.clientWidth/(this.precanvas.clientWidth*this.zoom))-this.precanvas.getBoundingClientRect().x*(this.precanvas.clientWidth/(this.precanvas.clientWidth*this.zoom))+"px",this.precanvas.appendChild(l))}}contextmenuDel(){this.precanvas.getElementsByClassName("drawflow-delete").length&&this.precanvas.getElementsByClassName("drawflow-delete")[0].remove()}key(i){if(this.dispatch("keydown",i),this.editor_mode==="fixed"||this.editor_mode==="view")return!1;(i.key==="Delete"||i.key==="Backspace"&&i.metaKey)&&(this.node_selected!=null&&this.first_click.tagName!=="INPUT"&&this.first_click.tagName!=="TEXTAREA"&&this.first_click.hasAttribute("contenteditable")!==!0&&this.removeNodeId(this.node_selected.id),this.connection_selected!=null&&this.removeConnection())}zoom_enter(i,l){i.ctrlKey&&(i.preventDefault(),i.deltaY>0?this.zoom_out():this.zoom_in())}zoom_refresh(){this.dispatch("zoom",this.zoom),this.canvas_x=this.canvas_x/this.zoom_last_value*this.zoom,this.canvas_y=this.canvas_y/this.zoom_last_value*this.zoom,this.zoom_last_value=this.zoom,this.precanvas.style.transform="translate("+this.canvas_x+"px, "+this.canvas_y+"px) scale("+this.zoom+")"}zoom_in(){this.zoom<this.zoom_max&&(this.zoom+=this.zoom_value,this.zoom_refresh())}zoom_out(){this.zoom>this.zoom_min&&(this.zoom-=this.zoom_value,this.zoom_refresh())}zoom_reset(){this.zoom!=1&&(this.zoom=1,this.zoom_refresh())}createCurvature(i,l,u,d,c,f){var h=i,w=l,p=u,v=d,_=c;switch(f){case"open":if(i>=u)var E=h+Math.abs(p-h)*_,S=p-Math.abs(p-h)*(-1*_);else E=h+Math.abs(p-h)*_,S=p-Math.abs(p-h)*_;return" M "+h+" "+w+" C "+E+" "+w+" "+S+" "+v+" "+p+"  "+v;case"close":return i>=u?(E=h+Math.abs(p-h)*(-1*_),S=p-Math.abs(p-h)*_):(E=h+Math.abs(p-h)*_,S=p-Math.abs(p-h)*_)," M "+h+" "+w+" C "+E+" "+w+" "+S+" "+v+" "+p+"  "+v;case"other":return i>=u?(E=h+Math.abs(p-h)*(-1*_),S=p-Math.abs(p-h)*(-1*_)):(E=h+Math.abs(p-h)*_,S=p-Math.abs(p-h)*_)," M "+h+" "+w+" C "+E+" "+w+" "+S+" "+v+" "+p+"  "+v;default:return" M "+h+" "+w+" C "+(E=h+Math.abs(p-h)*_)+" "+w+" "+(S=p-Math.abs(p-h)*_)+" "+v+" "+p+"  "+v}}drawConnection(i){var l=document.createElementNS("http://www.w3.org/2000/svg","svg");this.connection_ele=l;var u=document.createElementNS("http://www.w3.org/2000/svg","path");u.classList.add("main-path"),u.setAttributeNS(null,"d",""),l.classList.add("connection"),l.appendChild(u),this.precanvas.appendChild(l);var d=i.parentElement.parentElement.id.slice(5),c=i.classList[1];this.dispatch("connectionStart",{output_id:d,output_class:c})}updateConnection(i,l){const u=this.precanvas,d=this.zoom;let c=u.clientWidth/(u.clientWidth*d);c=c||0;let f=u.clientHeight/(u.clientHeight*d);f=f||0;var h=this.connection_ele.children[0],w=this.ele_selected.offsetWidth/2+(this.ele_selected.getBoundingClientRect().x-u.getBoundingClientRect().x)*c,p=this.ele_selected.offsetHeight/2+(this.ele_selected.getBoundingClientRect().y-u.getBoundingClientRect().y)*f,v=i*(this.precanvas.clientWidth/(this.precanvas.clientWidth*this.zoom))-this.precanvas.getBoundingClientRect().x*(this.precanvas.clientWidth/(this.precanvas.clientWidth*this.zoom)),_=l*(this.precanvas.clientHeight/(this.precanvas.clientHeight*this.zoom))-this.precanvas.getBoundingClientRect().y*(this.precanvas.clientHeight/(this.precanvas.clientHeight*this.zoom)),E=this.curvature,S=this.createCurvature(w,p,v,_,E,"openclose");h.setAttributeNS(null,"d",S)}addConnection(i,l,u,d){var c=this.getModuleFromNodeId(i);if(c===this.getModuleFromNodeId(l)){var f=this.getNodeFromId(i),h=!1;for(var w in f.outputs[u].connections){var p=f.outputs[u].connections[w];p.node==l&&p.output==d&&(h=!0)}if(h===!1){if(this.drawflow.drawflow[c].data[i].outputs[u].connections.push({node:l.toString(),output:d}),this.drawflow.drawflow[c].data[l].inputs[d].connections.push({node:i.toString(),input:u}),this.module===c){var v=document.createElementNS("http://www.w3.org/2000/svg","svg"),_=document.createElementNS("http://www.w3.org/2000/svg","path");_.classList.add("main-path"),_.setAttributeNS(null,"d",""),v.classList.add("connection"),v.classList.add("node_in_node-"+l),v.classList.add("node_out_node-"+i),v.classList.add(u),v.classList.add(d),v.appendChild(_),this.precanvas.appendChild(v),this.updateConnectionNodes("node-"+i),this.updateConnectionNodes("node-"+l)}this.dispatch("connectionCreated",{output_id:i,input_id:l,output_class:u,input_class:d})}}}updateConnectionNodes(i){const l="node_in_"+i,u="node_out_"+i;this.line_path;const d=this.container,c=this.precanvas,f=this.curvature,h=this.createCurvature,w=this.reroute_curvature,p=this.reroute_curvature_start_end,v=this.reroute_fix_curvature,_=this.reroute_width,E=this.zoom;let S=c.clientWidth/(c.clientWidth*E);S=S||0;let y=c.clientHeight/(c.clientHeight*E);y=y||0;const R=d.querySelectorAll("."+u);Object.keys(R).map(function(D,V){if(R[D].querySelector(".point")===null){var B=d.querySelector("#"+i),j=R[D].classList[1].replace("node_in_",""),ee=d.querySelector("#"+j).querySelectorAll("."+R[D].classList[4])[0],Ee=ee.offsetWidth/2+(ee.getBoundingClientRect().x-c.getBoundingClientRect().x)*S,ae=ee.offsetHeight/2+(ee.getBoundingClientRect().y-c.getBoundingClientRect().y)*y,me=B.querySelectorAll("."+R[D].classList[3])[0],ce=me.offsetWidth/2+(me.getBoundingClientRect().x-c.getBoundingClientRect().x)*S,Z=me.offsetHeight/2+(me.getBoundingClientRect().y-c.getBoundingClientRect().y)*y;const P=h(ce,Z,Ee,ae,f,"openclose");R[D].children[0].setAttributeNS(null,"d",P)}else{const P=R[D].querySelectorAll(".point");let X="";const ge=[];P.forEach((we,oe)=>{if(oe===0&&P.length-1==0){var se=d.querySelector("#"+i),ye=((L=we).getBoundingClientRect().x-c.getBoundingClientRect().x)*S+_,Te=(L.getBoundingClientRect().y-c.getBoundingClientRect().y)*y+_,Re=(G=se.querySelectorAll("."+we.parentElement.classList[3])[0]).offsetWidth/2+(G.getBoundingClientRect().x-c.getBoundingClientRect().x)*S,he=G.offsetHeight/2+(G.getBoundingClientRect().y-c.getBoundingClientRect().y)*y,x=h(Re,he,ye,Te,p,"open");X+=x,ge.push(x),se=we;var z=we.parentElement.classList[1].replace("node_in_",""),L=(le=d.querySelector("#"+z)).querySelectorAll("."+we.parentElement.classList[4])[0];ye=(m=le.querySelectorAll("."+we.parentElement.classList[4])[0]).offsetWidth/2+(m.getBoundingClientRect().x-c.getBoundingClientRect().x)*S,Te=m.offsetHeight/2+(m.getBoundingClientRect().y-c.getBoundingClientRect().y)*y,Re=(se.getBoundingClientRect().x-c.getBoundingClientRect().x)*S+_,he=(se.getBoundingClientRect().y-c.getBoundingClientRect().y)*y+_,x=h(Re,he,ye,Te,p,"close"),X+=x,ge.push(x)}else if(oe===0){var G;se=d.querySelector("#"+i),ye=((L=we).getBoundingClientRect().x-c.getBoundingClientRect().x)*S+_,Te=(L.getBoundingClientRect().y-c.getBoundingClientRect().y)*y+_,Re=(G=se.querySelectorAll("."+we.parentElement.classList[3])[0]).offsetWidth/2+(G.getBoundingClientRect().x-c.getBoundingClientRect().x)*S,he=G.offsetHeight/2+(G.getBoundingClientRect().y-c.getBoundingClientRect().y)*y,x=h(Re,he,ye,Te,p,"open"),X+=x,ge.push(x),se=we,ye=((L=P[oe+1]).getBoundingClientRect().x-c.getBoundingClientRect().x)*S+_,Te=(L.getBoundingClientRect().y-c.getBoundingClientRect().y)*y+_,Re=(se.getBoundingClientRect().x-c.getBoundingClientRect().x)*S+_,he=(se.getBoundingClientRect().y-c.getBoundingClientRect().y)*y+_,x=h(Re,he,ye,Te,w,"other"),X+=x,ge.push(x)}else if(oe===P.length-1){var le,m;se=we,z=we.parentElement.classList[1].replace("node_in_",""),L=(le=d.querySelector("#"+z)).querySelectorAll("."+we.parentElement.classList[4])[0],ye=(m=le.querySelectorAll("."+we.parentElement.classList[4])[0]).offsetWidth/2+(m.getBoundingClientRect().x-c.getBoundingClientRect().x)*S,Te=m.offsetHeight/2+(m.getBoundingClientRect().y-c.getBoundingClientRect().y)*y,Re=(se.getBoundingClientRect().x-c.getBoundingClientRect().x)*(c.clientWidth/(c.clientWidth*E))+_,he=(se.getBoundingClientRect().y-c.getBoundingClientRect().y)*(c.clientHeight/(c.clientHeight*E))+_,x=h(Re,he,ye,Te,p,"close"),X+=x,ge.push(x)}else se=we,ye=((L=P[oe+1]).getBoundingClientRect().x-c.getBoundingClientRect().x)*(c.clientWidth/(c.clientWidth*E))+_,Te=(L.getBoundingClientRect().y-c.getBoundingClientRect().y)*(c.clientHeight/(c.clientHeight*E))+_,Re=(se.getBoundingClientRect().x-c.getBoundingClientRect().x)*(c.clientWidth/(c.clientWidth*E))+_,he=(se.getBoundingClientRect().y-c.getBoundingClientRect().y)*(c.clientHeight/(c.clientHeight*E))+_,x=h(Re,he,ye,Te,w,"other"),X+=x,ge.push(x)}),v?ge.forEach((we,oe)=>{R[D].children[oe].setAttributeNS(null,"d",we)}):R[D].children[0].setAttributeNS(null,"d",X)}});const k=d.querySelectorAll("."+l);Object.keys(k).map(function(D,V){if(k[D].querySelector(".point")===null){var B=d.querySelector("#"+i),j=k[D].classList[2].replace("node_out_",""),ee=d.querySelector("#"+j).querySelectorAll("."+k[D].classList[3])[0],Ee=ee.offsetWidth/2+(ee.getBoundingClientRect().x-c.getBoundingClientRect().x)*S,ae=ee.offsetHeight/2+(ee.getBoundingClientRect().y-c.getBoundingClientRect().y)*y,me=(B=B.querySelectorAll("."+k[D].classList[4])[0]).offsetWidth/2+(B.getBoundingClientRect().x-c.getBoundingClientRect().x)*S,ce=B.offsetHeight/2+(B.getBoundingClientRect().y-c.getBoundingClientRect().y)*y;const Z=h(Ee,ae,me,ce,f,"openclose");k[D].children[0].setAttributeNS(null,"d",Z)}else{const Z=k[D].querySelectorAll(".point");let P="";const X=[];Z.forEach((ge,we)=>{if(we===0&&Z.length-1==0){var oe=d.querySelector("#"+i),se=((z=ge).getBoundingClientRect().x-c.getBoundingClientRect().x)*S+_,ye=(z.getBoundingClientRect().y-c.getBoundingClientRect().y)*y+_,Te=(le=oe.querySelectorAll("."+ge.parentElement.classList[4])[0]).offsetWidth/2+(le.getBoundingClientRect().x-c.getBoundingClientRect().x)*S,Re=le.offsetHeight/2+(le.getBoundingClientRect().y-c.getBoundingClientRect().y)*y,he=h(se,ye,Te,Re,p,"close");P+=he,X.push(he),oe=ge;var x=ge.parentElement.classList[2].replace("node_out_",""),z=(G=d.querySelector("#"+x)).querySelectorAll("."+ge.parentElement.classList[3])[0];se=(L=G.querySelectorAll("."+ge.parentElement.classList[3])[0]).offsetWidth/2+(L.getBoundingClientRect().x-c.getBoundingClientRect().x)*S,ye=L.offsetHeight/2+(L.getBoundingClientRect().y-c.getBoundingClientRect().y)*y,Te=(oe.getBoundingClientRect().x-c.getBoundingClientRect().x)*S+_,Re=(oe.getBoundingClientRect().y-c.getBoundingClientRect().y)*y+_,he=h(se,ye,Te,Re,p,"open"),P+=he,X.push(he)}else if(we===0){var L;oe=ge,x=ge.parentElement.classList[2].replace("node_out_",""),z=(G=d.querySelector("#"+x)).querySelectorAll("."+ge.parentElement.classList[3])[0],se=(L=G.querySelectorAll("."+ge.parentElement.classList[3])[0]).offsetWidth/2+(L.getBoundingClientRect().x-c.getBoundingClientRect().x)*S,ye=L.offsetHeight/2+(L.getBoundingClientRect().y-c.getBoundingClientRect().y)*y,Te=(oe.getBoundingClientRect().x-c.getBoundingClientRect().x)*S+_,Re=(oe.getBoundingClientRect().y-c.getBoundingClientRect().y)*y+_,he=h(se,ye,Te,Re,p,"open"),P+=he,X.push(he),oe=ge,Te=((z=Z[we+1]).getBoundingClientRect().x-c.getBoundingClientRect().x)*S+_,Re=(z.getBoundingClientRect().y-c.getBoundingClientRect().y)*y+_,se=(oe.getBoundingClientRect().x-c.getBoundingClientRect().x)*S+_,ye=(oe.getBoundingClientRect().y-c.getBoundingClientRect().y)*y+_,he=h(se,ye,Te,Re,w,"other"),P+=he,X.push(he)}else if(we===Z.length-1){var G,le;oe=ge,x=ge.parentElement.classList[1].replace("node_in_",""),z=(G=d.querySelector("#"+x)).querySelectorAll("."+ge.parentElement.classList[4])[0],Te=(le=G.querySelectorAll("."+ge.parentElement.classList[4])[0]).offsetWidth/2+(le.getBoundingClientRect().x-c.getBoundingClientRect().x)*S,Re=le.offsetHeight/2+(le.getBoundingClientRect().y-c.getBoundingClientRect().y)*y,se=(oe.getBoundingClientRect().x-c.getBoundingClientRect().x)*S+_,ye=(oe.getBoundingClientRect().y-c.getBoundingClientRect().y)*y+_,he=h(se,ye,Te,Re,p,"close"),P+=he,X.push(he)}else oe=ge,Te=((z=Z[we+1]).getBoundingClientRect().x-c.getBoundingClientRect().x)*S+_,Re=(z.getBoundingClientRect().y-c.getBoundingClientRect().y)*y+_,se=(oe.getBoundingClientRect().x-c.getBoundingClientRect().x)*S+_,ye=(oe.getBoundingClientRect().y-c.getBoundingClientRect().y)*y+_,he=h(se,ye,Te,Re,w,"other"),P+=he,X.push(he)}),v?X.forEach((ge,we)=>{k[D].children[we].setAttributeNS(null,"d",ge)}):k[D].children[0].setAttributeNS(null,"d",P)}})}dblclick(i){this.connection_selected!=null&&this.reroute&&this.createReroutePoint(this.connection_selected),i.target.classList[0]==="point"&&this.removeReroutePoint(i.target)}createReroutePoint(i){this.connection_selected.classList.remove("selected");const l=this.connection_selected.parentElement.classList[2].slice(9),u=this.connection_selected.parentElement.classList[1].slice(13),d=this.connection_selected.parentElement.classList[3],c=this.connection_selected.parentElement.classList[4];this.connection_selected=null;const f=document.createElementNS("http://www.w3.org/2000/svg","circle");f.classList.add("point");var h=this.pos_x*(this.precanvas.clientWidth/(this.precanvas.clientWidth*this.zoom))-this.precanvas.getBoundingClientRect().x*(this.precanvas.clientWidth/(this.precanvas.clientWidth*this.zoom)),w=this.pos_y*(this.precanvas.clientHeight/(this.precanvas.clientHeight*this.zoom))-this.precanvas.getBoundingClientRect().y*(this.precanvas.clientHeight/(this.precanvas.clientHeight*this.zoom));f.setAttributeNS(null,"cx",h),f.setAttributeNS(null,"cy",w),f.setAttributeNS(null,"r",this.reroute_width);let p=0;if(this.reroute_fix_curvature){const S=i.parentElement.querySelectorAll(".main-path").length;var v=document.createElementNS("http://www.w3.org/2000/svg","path");if(v.classList.add("main-path"),v.setAttributeNS(null,"d",""),i.parentElement.insertBefore(v,i.parentElement.children[S]),S===1)i.parentElement.appendChild(f);else{const y=Array.from(i.parentElement.children).indexOf(i);p=y,i.parentElement.insertBefore(f,i.parentElement.children[y+S+1])}}else i.parentElement.appendChild(f);const _=l.slice(5),E=this.drawflow.drawflow[this.module].data[_].outputs[d].connections.findIndex(function(S,y){return S.node===u&&S.output===c});this.drawflow.drawflow[this.module].data[_].outputs[d].connections[E].points===void 0&&(this.drawflow.drawflow[this.module].data[_].outputs[d].connections[E].points=[]),this.reroute_fix_curvature?(p>0||this.drawflow.drawflow[this.module].data[_].outputs[d].connections[E].points!==[]?this.drawflow.drawflow[this.module].data[_].outputs[d].connections[E].points.splice(p,0,{pos_x:h,pos_y:w}):this.drawflow.drawflow[this.module].data[_].outputs[d].connections[E].points.push({pos_x:h,pos_y:w}),i.parentElement.querySelectorAll(".main-path").forEach((S,y)=>{S.classList.remove("selected")})):this.drawflow.drawflow[this.module].data[_].outputs[d].connections[E].points.push({pos_x:h,pos_y:w}),this.dispatch("addReroute",_),this.updateConnectionNodes(l)}removeReroutePoint(i){const l=i.parentElement.classList[2].slice(9),u=i.parentElement.classList[1].slice(13),d=i.parentElement.classList[3],c=i.parentElement.classList[4];let f=Array.from(i.parentElement.children).indexOf(i);const h=l.slice(5),w=this.drawflow.drawflow[this.module].data[h].outputs[d].connections.findIndex(function(p,v){return p.node===u&&p.output===c});if(this.reroute_fix_curvature){const p=i.parentElement.querySelectorAll(".main-path").length;i.parentElement.children[p-1].remove(),f-=p,f<0&&(f=0)}else f--;this.drawflow.drawflow[this.module].data[h].outputs[d].connections[w].points.splice(f,1),i.remove(),this.dispatch("removeReroute",h),this.updateConnectionNodes(l)}registerNode(i,l,u=null,d=null){this.noderegister[i]={html:l,props:u,options:d}}getNodeFromId(i){var l=this.getModuleFromNodeId(i);return JSON.parse(JSON.stringify(this.drawflow.drawflow[l].data[i]))}getNodesFromName(i){var l=[];const u=this.drawflow.drawflow;return Object.keys(u).map(function(d,c){for(var f in u[d].data)u[d].data[f].name==i&&l.push(u[d].data[f].id)}),l}addNode(i,l,u,d,c,f,h,w,p=!1){if(this.useuuid)var v=this.getUuid();else v=this.nodeId;const _=document.createElement("div");_.classList.add("parent-node");const E=document.createElement("div");E.innerHTML="",E.setAttribute("id","node-"+v),E.classList.add("drawflow-node"),f!=""&&E.classList.add(...f.split(" "));const S=document.createElement("div");S.classList.add("inputs");const y=document.createElement("div");y.classList.add("outputs");const R={};for(var k=0;k<l;k++){const j=document.createElement("div");j.classList.add("input"),j.classList.add("input_"+(k+1)),R["input_"+(k+1)]={connections:[]},S.appendChild(j)}const D={};for(k=0;k<u;k++){const j=document.createElement("div");j.classList.add("output"),j.classList.add("output_"+(k+1)),D["output_"+(k+1)]={connections:[]},y.appendChild(j)}const V=document.createElement("div");if(V.classList.add("drawflow_content_node"),p===!1)V.innerHTML=w;else if(p===!0)V.appendChild(this.noderegister[w].html.cloneNode(!0));else if(parseInt(this.render.version)===3){let j=this.render.h(this.noderegister[w].html,this.noderegister[w].props,this.noderegister[w].options);j.appContext=this.parent,this.render.render(j,V)}else{let j=new this.render({parent:this.parent,render:ee=>ee(this.noderegister[w].html,{props:this.noderegister[w].props}),...this.noderegister[w].options}).$mount();V.appendChild(j.$el)}Object.entries(h).forEach(function(j,ee){if(typeof j[1]=="object")(function me(ce,Z,P){ce===null?ce=h[Z]:ce=ce[Z],ce!==null&&Object.entries(ce).forEach(function(X,ge){if(typeof X[1]=="object")me(ce,X[0],P+"-"+X[0]);else for(var we=V.querySelectorAll("[df-"+P+"-"+X[0]+"]"),oe=0;oe<we.length;oe++)we[oe].value=X[1],we[oe].isContentEditable&&(we[oe].innerText=X[1])})})(null,j[0],j[0]);else for(var Ee=V.querySelectorAll("[df-"+j[0]+"]"),ae=0;ae<Ee.length;ae++)Ee[ae].value=j[1],Ee[ae].isContentEditable&&(Ee[ae].innerText=j[1])}),E.appendChild(S),E.appendChild(V),E.appendChild(y),E.style.top=c+"px",E.style.left=d+"px",_.appendChild(E),this.precanvas.appendChild(_);var B={id:v,name:i,data:h,class:f,html:w,typenode:p,inputs:R,outputs:D,pos_x:d,pos_y:c};return this.drawflow.drawflow[this.module].data[v]=B,this.dispatch("nodeCreated",v),this.useuuid||this.nodeId++,v}addNodeImport(i,l){const u=document.createElement("div");u.classList.add("parent-node");const d=document.createElement("div");d.innerHTML="",d.setAttribute("id","node-"+i.id),d.classList.add("drawflow-node"),i.class!=""&&d.classList.add(...i.class.split(" "));const c=document.createElement("div");c.classList.add("inputs");const f=document.createElement("div");f.classList.add("outputs"),Object.keys(i.inputs).map(function(p,v){const _=document.createElement("div");_.classList.add("input"),_.classList.add(p),c.appendChild(_),Object.keys(i.inputs[p].connections).map(function(E,S){var y=document.createElementNS("http://www.w3.org/2000/svg","svg"),R=document.createElementNS("http://www.w3.org/2000/svg","path");R.classList.add("main-path"),R.setAttributeNS(null,"d",""),y.classList.add("connection"),y.classList.add("node_in_node-"+i.id),y.classList.add("node_out_node-"+i.inputs[p].connections[E].node),y.classList.add(i.inputs[p].connections[E].input),y.classList.add(p),y.appendChild(R),l.appendChild(y)})});for(var h=0;h<Object.keys(i.outputs).length;h++){const p=document.createElement("div");p.classList.add("output"),p.classList.add("output_"+(h+1)),f.appendChild(p)}const w=document.createElement("div");if(w.classList.add("drawflow_content_node"),i.typenode===!1)w.innerHTML=i.html;else if(i.typenode===!0)w.appendChild(this.noderegister[i.html].html.cloneNode(!0));else if(parseInt(this.render.version)===3){let p=this.render.h(this.noderegister[i.html].html,this.noderegister[i.html].props,this.noderegister[i.html].options);p.appContext=this.parent,this.render.render(p,w)}else{let p=new this.render({parent:this.parent,render:v=>v(this.noderegister[i.html].html,{props:this.noderegister[i.html].props}),...this.noderegister[i.html].options}).$mount();w.appendChild(p.$el)}Object.entries(i.data).forEach(function(p,v){if(typeof p[1]=="object")(function S(y,R,k){y===null?y=i.data[R]:y=y[R],y!==null&&Object.entries(y).forEach(function(D,V){if(typeof D[1]=="object")S(y,D[0],k+"-"+D[0]);else for(var B=w.querySelectorAll("[df-"+k+"-"+D[0]+"]"),j=0;j<B.length;j++)B[j].value=D[1],B[j].isContentEditable&&(B[j].innerText=D[1])})})(null,p[0],p[0]);else for(var _=w.querySelectorAll("[df-"+p[0]+"]"),E=0;E<_.length;E++)_[E].value=p[1],_[E].isContentEditable&&(_[E].innerText=p[1])}),d.appendChild(c),d.appendChild(w),d.appendChild(f),d.style.top=i.pos_y+"px",d.style.left=i.pos_x+"px",u.appendChild(d),this.precanvas.appendChild(u)}addRerouteImport(i){const l=this.reroute_width,u=this.reroute_fix_curvature,d=this.container;Object.keys(i.outputs).map(function(c,f){Object.keys(i.outputs[c].connections).map(function(h,w){const p=i.outputs[c].connections[h].points;p!==void 0&&p.forEach((v,_)=>{const E=i.outputs[c].connections[h].node,S=i.outputs[c].connections[h].output,y=d.querySelector(".connection.node_in_node-"+E+".node_out_node-"+i.id+"."+c+"."+S);if(u&&_===0)for(var R=0;R<p.length;R++){var k=document.createElementNS("http://www.w3.org/2000/svg","path");k.classList.add("main-path"),k.setAttributeNS(null,"d",""),y.appendChild(k)}const D=document.createElementNS("http://www.w3.org/2000/svg","circle");D.classList.add("point");var V=v.pos_x,B=v.pos_y;D.setAttributeNS(null,"cx",V),D.setAttributeNS(null,"cy",B),D.setAttributeNS(null,"r",l),y.appendChild(D)})})})}updateNodeValue(i){for(var l=i.target.attributes,u=0;u<l.length;u++)if(l[u].nodeName.startsWith("df-")){for(var d=l[u].nodeName.slice(3).split("-"),c=this.drawflow.drawflow[this.module].data[i.target.closest(".drawflow_content_node").parentElement.id.slice(5)].data,f=0;f<d.length-1;f+=1)c[d[f]]==null&&(c[d[f]]={}),c=c[d[f]];c[d[d.length-1]]=i.target.value,i.target.isContentEditable&&(c[d[d.length-1]]=i.target.innerText),this.dispatch("nodeDataChanged",i.target.closest(".drawflow_content_node").parentElement.id.slice(5))}}updateNodeDataFromId(i,l){var u=this.getModuleFromNodeId(i);if(this.drawflow.drawflow[u].data[i].data=l,this.module===u){const d=this.container.querySelector("#node-"+i);Object.entries(l).forEach(function(c,f){if(typeof c[1]=="object")(function p(v,_,E){v===null?v=l[_]:v=v[_],v!==null&&Object.entries(v).forEach(function(S,y){if(typeof S[1]=="object")p(v,S[0],E+"-"+S[0]);else for(var R=d.querySelectorAll("[df-"+E+"-"+S[0]+"]"),k=0;k<R.length;k++)R[k].value=S[1],R[k].isContentEditable&&(R[k].innerText=S[1])})})(null,c[0],c[0]);else for(var h=d.querySelectorAll("[df-"+c[0]+"]"),w=0;w<h.length;w++)h[w].value=c[1],h[w].isContentEditable&&(h[w].innerText=c[1])})}}addNodeInput(i){var l=this.getModuleFromNodeId(i);const u=this.getNodeFromId(i),d=Object.keys(u.inputs).length;if(this.module===l){const c=document.createElement("div");c.classList.add("input"),c.classList.add("input_"+(d+1)),this.container.querySelector("#node-"+i+" .inputs").appendChild(c),this.updateConnectionNodes("node-"+i)}this.drawflow.drawflow[l].data[i].inputs["input_"+(d+1)]={connections:[]}}addNodeOutput(i){var l=this.getModuleFromNodeId(i);const u=this.getNodeFromId(i),d=Object.keys(u.outputs).length;if(this.module===l){const c=document.createElement("div");c.classList.add("output"),c.classList.add("output_"+(d+1)),this.container.querySelector("#node-"+i+" .outputs").appendChild(c),this.updateConnectionNodes("node-"+i)}this.drawflow.drawflow[l].data[i].outputs["output_"+(d+1)]={connections:[]}}removeNodeInput(i,l){var u=this.getModuleFromNodeId(i);const d=this.getNodeFromId(i);this.module===u&&this.container.querySelector("#node-"+i+" .inputs .input."+l).remove();const c=[];Object.keys(d.inputs[l].connections).map(function(v,_){const E=d.inputs[l].connections[_].node,S=d.inputs[l].connections[_].input;c.push({id_output:E,id:i,output_class:S,input_class:l})}),c.forEach((v,_)=>{this.removeSingleConnection(v.id_output,v.id,v.output_class,v.input_class)}),delete this.drawflow.drawflow[u].data[i].inputs[l];const f=[],h=this.drawflow.drawflow[u].data[i].inputs;Object.keys(h).map(function(v,_){f.push(h[v])}),this.drawflow.drawflow[u].data[i].inputs={};const w=l.slice(6);let p=[];f.forEach((v,_)=>{v.connections.forEach((E,S)=>{p.push(E)}),this.drawflow.drawflow[u].data[i].inputs["input_"+(_+1)]=v}),p=new Set(p.map(v=>JSON.stringify(v))),p=Array.from(p).map(v=>JSON.parse(v)),this.module===u&&this.container.querySelectorAll("#node-"+i+" .inputs .input").forEach((v,_)=>{const E=v.classList[1].slice(6);parseInt(w)<parseInt(E)&&(v.classList.remove("input_"+E),v.classList.add("input_"+(E-1)))}),p.forEach((v,_)=>{this.drawflow.drawflow[u].data[v.node].outputs[v.input].connections.forEach((E,S)=>{if(E.node==i){const y=E.output.slice(6);if(parseInt(w)<parseInt(y)){if(this.module===u){const R=this.container.querySelector(".connection.node_in_node-"+i+".node_out_node-"+v.node+"."+v.input+".input_"+y);R.classList.remove("input_"+y),R.classList.add("input_"+(y-1))}E.points?this.drawflow.drawflow[u].data[v.node].outputs[v.input].connections[S]={node:E.node,output:"input_"+(y-1),points:E.points}:this.drawflow.drawflow[u].data[v.node].outputs[v.input].connections[S]={node:E.node,output:"input_"+(y-1)}}}})}),this.updateConnectionNodes("node-"+i)}removeNodeOutput(i,l){var u=this.getModuleFromNodeId(i);const d=this.getNodeFromId(i);this.module===u&&this.container.querySelector("#node-"+i+" .outputs .output."+l).remove();const c=[];Object.keys(d.outputs[l].connections).map(function(v,_){const E=d.outputs[l].connections[_].node,S=d.outputs[l].connections[_].output;c.push({id:i,id_input:E,output_class:l,input_class:S})}),c.forEach((v,_)=>{this.removeSingleConnection(v.id,v.id_input,v.output_class,v.input_class)}),delete this.drawflow.drawflow[u].data[i].outputs[l];const f=[],h=this.drawflow.drawflow[u].data[i].outputs;Object.keys(h).map(function(v,_){f.push(h[v])}),this.drawflow.drawflow[u].data[i].outputs={};const w=l.slice(7);let p=[];f.forEach((v,_)=>{v.connections.forEach((E,S)=>{p.push({node:E.node,output:E.output})}),this.drawflow.drawflow[u].data[i].outputs["output_"+(_+1)]=v}),p=new Set(p.map(v=>JSON.stringify(v))),p=Array.from(p).map(v=>JSON.parse(v)),this.module===u&&this.container.querySelectorAll("#node-"+i+" .outputs .output").forEach((v,_)=>{const E=v.classList[1].slice(7);parseInt(w)<parseInt(E)&&(v.classList.remove("output_"+E),v.classList.add("output_"+(E-1)))}),p.forEach((v,_)=>{this.drawflow.drawflow[u].data[v.node].inputs[v.output].connections.forEach((E,S)=>{if(E.node==i){const y=E.input.slice(7);if(parseInt(w)<parseInt(y)){if(this.module===u){const R=this.container.querySelector(".connection.node_in_node-"+v.node+".node_out_node-"+i+".output_"+y+"."+v.output);R.classList.remove("output_"+y),R.classList.remove(v.output),R.classList.add("output_"+(y-1)),R.classList.add(v.output)}E.points?this.drawflow.drawflow[u].data[v.node].inputs[v.output].connections[S]={node:E.node,input:"output_"+(y-1),points:E.points}:this.drawflow.drawflow[u].data[v.node].inputs[v.output].connections[S]={node:E.node,input:"output_"+(y-1)}}}})}),this.updateConnectionNodes("node-"+i)}removeNodeId(i){this.removeConnectionNodeId(i);var l=this.getModuleFromNodeId(i.slice(5));this.module===l&&this.container.querySelector("#"+i).remove(),delete this.drawflow.drawflow[l].data[i.slice(5)],this.dispatch("nodeRemoved",i.slice(5))}removeConnection(){if(this.connection_selected!=null){var i=this.connection_selected.parentElement.classList;this.connection_selected.parentElement.remove();var l=this.drawflow.drawflow[this.module].data[i[2].slice(14)].outputs[i[3]].connections.findIndex(function(d,c){return d.node===i[1].slice(13)&&d.output===i[4]});this.drawflow.drawflow[this.module].data[i[2].slice(14)].outputs[i[3]].connections.splice(l,1);var u=this.drawflow.drawflow[this.module].data[i[1].slice(13)].inputs[i[4]].connections.findIndex(function(d,c){return d.node===i[2].slice(14)&&d.input===i[3]});this.drawflow.drawflow[this.module].data[i[1].slice(13)].inputs[i[4]].connections.splice(u,1),this.dispatch("connectionRemoved",{output_id:i[2].slice(14),input_id:i[1].slice(13),output_class:i[3],input_class:i[4]}),this.connection_selected=null}}removeSingleConnection(i,l,u,d){var c=this.getModuleFromNodeId(i);if(c===this.getModuleFromNodeId(l)){if(this.drawflow.drawflow[c].data[i].outputs[u].connections.findIndex(function(w,p){return w.node==l&&w.output===d})>-1){this.module===c&&this.container.querySelector(".connection.node_in_node-"+l+".node_out_node-"+i+"."+u+"."+d).remove();var f=this.drawflow.drawflow[c].data[i].outputs[u].connections.findIndex(function(w,p){return w.node==l&&w.output===d});this.drawflow.drawflow[c].data[i].outputs[u].connections.splice(f,1);var h=this.drawflow.drawflow[c].data[l].inputs[d].connections.findIndex(function(w,p){return w.node==i&&w.input===u});return this.drawflow.drawflow[c].data[l].inputs[d].connections.splice(h,1),this.dispatch("connectionRemoved",{output_id:i,input_id:l,output_class:u,input_class:d}),!0}return!1}return!1}removeConnectionNodeId(i){const l="node_in_"+i,u="node_out_"+i,d=this.container.querySelectorAll("."+u);for(var c=d.length-1;c>=0;c--){var f=d[c].classList,h=this.drawflow.drawflow[this.module].data[f[1].slice(13)].inputs[f[4]].connections.findIndex(function(v,_){return v.node===f[2].slice(14)&&v.input===f[3]});this.drawflow.drawflow[this.module].data[f[1].slice(13)].inputs[f[4]].connections.splice(h,1);var w=this.drawflow.drawflow[this.module].data[f[2].slice(14)].outputs[f[3]].connections.findIndex(function(v,_){return v.node===f[1].slice(13)&&v.output===f[4]});this.drawflow.drawflow[this.module].data[f[2].slice(14)].outputs[f[3]].connections.splice(w,1),d[c].remove(),this.dispatch("connectionRemoved",{output_id:f[2].slice(14),input_id:f[1].slice(13),output_class:f[3],input_class:f[4]})}const p=this.container.querySelectorAll("."+l);for(c=p.length-1;c>=0;c--)f=p[c].classList,w=this.drawflow.drawflow[this.module].data[f[2].slice(14)].outputs[f[3]].connections.findIndex(function(v,_){return v.node===f[1].slice(13)&&v.output===f[4]}),this.drawflow.drawflow[this.module].data[f[2].slice(14)].outputs[f[3]].connections.splice(w,1),h=this.drawflow.drawflow[this.module].data[f[1].slice(13)].inputs[f[4]].connections.findIndex(function(v,_){return v.node===f[2].slice(14)&&v.input===f[3]}),this.drawflow.drawflow[this.module].data[f[1].slice(13)].inputs[f[4]].connections.splice(h,1),p[c].remove(),this.dispatch("connectionRemoved",{output_id:f[2].slice(14),input_id:f[1].slice(13),output_class:f[3],input_class:f[4]})}getModuleFromNodeId(i){var l;const u=this.drawflow.drawflow;return Object.keys(u).map(function(d,c){Object.keys(u[d].data).map(function(f,h){f==i&&(l=d)})}),l}addModule(i){this.drawflow.drawflow[i]={data:{}},this.dispatch("moduleCreated",i)}changeModule(i){this.dispatch("moduleChanged",i),this.module=i,this.precanvas.innerHTML="",this.canvas_x=0,this.canvas_y=0,this.pos_x=0,this.pos_y=0,this.mouse_x=0,this.mouse_y=0,this.zoom=1,this.zoom_last_value=1,this.precanvas.style.transform="",this.import(this.drawflow,!1)}removeModule(i){this.module===i&&this.changeModule("Home"),delete this.drawflow.drawflow[i],this.dispatch("moduleRemoved",i)}clearModuleSelected(){this.precanvas.innerHTML="",this.drawflow.drawflow[this.module]={data:{}}}clear(){this.precanvas.innerHTML="",this.drawflow={drawflow:{Home:{data:{}}}}}export(){const i=JSON.parse(JSON.stringify(this.drawflow));return this.dispatch("export",i),i}import(i,l=!0){this.clear(),this.drawflow=JSON.parse(JSON.stringify(i)),this.load(),l&&this.dispatch("import","import")}on(i,l){return typeof l!="function"?(console.error("The listener callback must be a function, the given type is "+typeof l),!1):typeof i!="string"?(console.error("The event name must be a string, the given type is "+typeof i),!1):(this.events[i]===void 0&&(this.events[i]={listeners:[]}),void this.events[i].listeners.push(l))}removeListener(i,l){if(!this.events[i])return!1;const u=this.events[i].listeners,d=u.indexOf(l);d>-1&&u.splice(d,1)}dispatch(i,l){if(this.events[i]===void 0)return!1;this.events[i].listeners.forEach(u=>{u(l)})}getUuid(){for(var i=[],l=0;l<36;l++)i[l]="0123456789abcdef".substr(Math.floor(16*Math.random()),1);return i[14]="4",i[19]="0123456789abcdef".substr(3&i[19]|8,1),i[8]=i[13]=i[18]=i[23]="-",i.join("")}}}]).default})})(ec);var ip=ec.exports;const rp=sp(ip);function lp(){const e=document.getElementById("drawflow");if(!e){console.error("Drawflow container #drawflow not found!");return}const t=new rp(e);t.start();const n=document.getElementById("workflowZoomOut"),o=document.getElementById("workflowZoomIn"),s=document.getElementById("workflowZoomReset"),r=document.getElementById("workflowZoomValue"),a=()=>typeof t.zoom_value=="number"?t.zoom_value:.1,i=()=>typeof t.zoom_min=="number"?t.zoom_min:.2,l=()=>typeof t.zoom_max=="number"?t.zoom_max:2,u=(b=t.zoom)=>{r&&(r.textContent=`${Math.round(b*100)}%`)},d=t.zoom_refresh.bind(t);t.zoom_refresh=function(){d(),u(this.zoom)},u(t.zoom);const c=b=>{const I=Math.min(Math.max(b,i()),l());t.zoom=I,t.zoom_refresh()};o&&o.addEventListener("click",()=>c(t.zoom+a())),n&&n.addEventListener("click",()=>c(t.zoom-a())),s&&s.addEventListener("click",()=>c(1)),e.addEventListener("wheel",b=>{if(!b.ctrlKey&&!b.metaKey)return;b.preventDefault();const I=b.deltaY<0?1:-1;c(t.zoom+I*a())},{passive:!1});const f={active:!1,startDistance:0,startZoom:t.zoom},h=()=>{f.active=!1,f.startDistance=0,f.startZoom=t.zoom},w=b=>{if(!b||b.length<2)return 0;const[I,F]=b;return Math.hypot(I.clientX-F.clientX,I.clientY-F.clientY)},p=.6;e.addEventListener("touchstart",b=>{b.touches&&b.touches.length===2&&(f.active=!0,f.startDistance=w(b.touches),f.startZoom=t.zoom)},{passive:!0}),e.addEventListener("touchmove",b=>{if(!f.active||!b.touches||b.touches.length!==2)return;const I=w(b.touches);if(f.startDistance<=0||I<=0)return;const F=I/f.startDistance,Q=Math.pow(F,p),K=f.startZoom*Q;c(K),b.preventDefault()},{passive:!1}),e.addEventListener("touchend",b=>{(!b.touches||b.touches.length<2)&&h()}),e.addEventListener("touchcancel",h);const v=document.getElementById("node-palette"),_=document.getElementById("nodePaletteList"),E=document.getElementById("nodePaletteSearch"),S=document.getElementById("uploadModularActionBtn"),y=document.getElementById("nodePaletteUploadInput"),R=document.querySelector(".workflow-editor-body"),k=document.querySelector(".workflow-canvas-wrapper"),D=document.getElementById("editWorkflowDescriptionBtn"),V=document.querySelector(".node-palette-pane"),B=document.querySelector(".node-palette-container"),j=document.getElementById("nodePaletteCollapseBtn"),ee=j?j.querySelector(".node-palette-collapse-label"):null;if(!v||!_){console.error("Node palette container not found!");return}E||console.warn(Y("workflow.legacy.paletteSearchMissing")),(!S||!y)&&console.warn(Y("workflow.legacy.uploadControlMissing"));const Ee=()=>localStorage.getItem("tg-button-auth-token"),ae=async(b,I={})=>{const F=Ee(),Q=new Headers(I.headers||{});F&&Q.append("X-Auth-Token",F);const K=await fetch(b,{...I,headers:Q});if(!K.ok){if(K.status===401)throw localStorage.removeItem("tg-button-auth-token"),window.location.href="/login",new Error(Y("workflow.legacy.authFailed"));const _e=await K.json().catch(()=>({error:`HTTP error! status: ${K.status}`}));throw new Error(_e.error||`HTTP error! status: ${K.status}`)}return K};let me={},ce=!1,Z="";const P=b=>b?b.toString().replace(/[&<>"']/g,I=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"})[I]):"",X=(b,I)=>!b||b.length<=I?b:b.substring(0,I)+"...",ge=(b,I)=>{const F=t.precanvas.getBoundingClientRect();return{x:(b-F.left)/t.zoom,y:(I-F.top)/t.zoom}},we=(b,I,F)=>{if(!b||!b.id){console.warn(Y("workflow.legacy.addNodeMissingAction"));return}const Q=b.isModular?(b.inputs||[]).length:1,K=b.isModular?(b.outputs||[]).length:1,_e=(Ue,xt)=>{const Ze=Ue||"",mt=X(Ze,7);return`<div class="port-label ${xt}" title="${P(Ze)}">${P(mt)}</div>`},ke=(b.inputs||[]).map(Ue=>_e(Ue.name,"port-label-in")).join(""),De=(b.outputs||[]).map(Ue=>_e(Ue.name,"port-label-out")).join(""),be=`
            <div class="node-title" title="${P(b.name||b.id)}">${P(b.name||b.id)}</div>
            ${b.isModular?`
            <div class="ports-wrapper">
                <div class="input-ports">${ke}</div>
                <div class="output-ports">${De}</div>
            </div>
            `:""}
        `,xe={action:b,data:{}};t.addNode(b.id,Math.max(1,Q),Math.max(1,K),I,F,"workflow-node",xe,be)};let oe=null,se=null,ye=!1;function Te(b,I){oe=I,se={x:b.clientX,y:b.clientY},ye=!1}function Re(b){if(!(!oe||!se)&&!ye){const I=b.clientX-se.x,F=b.clientY-se.y;Math.hypot(I,F)>10&&(ye=!0,document.body.classList.add("is-touch-dragging"))}}function he(b){if(oe){if(document.body.classList.remove("is-touch-dragging"),ye&&b){const I=e.getBoundingClientRect();if(b.clientX>=I.left&&b.clientX<=I.right&&b.clientY>=I.top&&b.clientY<=I.bottom){const{x:F,y:Q}=ge(b.clientX,b.clientY);we(oe,F,Q)}}oe=null,se=null,ye=!1}}document.addEventListener("touchmove",b=>{if(!oe||b.touches&&b.touches.length!==1||f.active)return;const I=b.touches&&b.touches[0];I&&(Re(I),ye&&b.preventDefault())},{passive:!1}),document.addEventListener("touchend",b=>{if(!oe||f.active&&b.touches&&b.touches.length>0)return;const I=b.changedTouches&&b.changedTouches[0];he(I)},{passive:!0}),document.addEventListener("touchcancel",()=>{oe&&(document.body.classList.remove("is-touch-dragging"),oe=null,se=null,ye=!1)},{passive:!0});const x=(b,I)=>I?I.name||b||"":b||"",z=(b,I)=>{const F=document.createElement("div");F.className="palette-node",F.draggable=!0,F.setAttribute("role","listitem");const Q=x(b,I),K=P(Q),_e=I.description||Y("workflow.legacy.noDescription"),ke=X(_e,80),De=P(ke),be=P(_e),xe=P(b),Ue=`/api/actions/modular/download/${encodeURIComponent(b)}`,xt=P(I.filename||`${b}.py`);F.innerHTML=`
            <div class="palette-node-header">
                <div class="palette-node-title" title="${K}">${K}</div>
                <div class="node-actions">
                    <a href="${Ue}" download="${xt}" class="secondary node-action-btn download-action-btn" title="${P(Y("workflow.legacy.download"))}">&#x2B07;</a>
                    <a href="#" class="secondary node-action-btn delete-action-btn" data-action-id="${xe}" data-action-name="${K}" title="${P(Y("workflow.legacy.delete"))}">&#x1F5D1;</a>
                </div>
            </div>
            <p class="palette-node-description" title="${be}">${De}</p>
            <div class="palette-node-footer">
                <span class="muted" title="${P(Y("workflow.legacy.actionId"))}">${xe}</span>
            </div>
        `,F.addEventListener("dragstart",Be=>{if(Be.target.closest(".node-action-btn")){Be.preventDefault();return}Be.dataTransfer&&Be.dataTransfer.setData("text/plain",JSON.stringify(I))}),F.addEventListener("touchstart",Be=>{if(Be.target.closest(".node-action-btn")||!Be.touches||Be.touches.length!==1||f.active)return;const Ge=Be.touches[0];Te(Ge,I)},{passive:!0});const Ze=F.querySelector(".download-action-btn");Ze&&Ze.addEventListener("click",async Be=>{Be.preventDefault(),Be.stopPropagation();try{const no=await(await ae(Ue)).blob(),ft=document.createElement("a");ft.href=URL.createObjectURL(no),ft.setAttribute("download",Ze.getAttribute("download")),document.body.appendChild(ft),ft.click(),document.body.removeChild(ft),URL.revokeObjectURL(ft.href)}catch(Ge){console.error(Y("workflow.legacy.downloadFailed",{error:Ge.message||Ge}),Ge),window.showInfoModal(Y("workflow.legacy.downloadFailed",{error:Ge.message||Ge}),!0)}});const mt=F.querySelector(".delete-action-btn");return mt&&mt.addEventListener("click",Be=>{Be.preventDefault(),Be.stopPropagation();const Ge=mt.dataset.actionId,no=mt.dataset.actionName,ft=P(no),Ds=()=>{const Qi=async nc=>{try{const tn={method:"DELETE",headers:{"Content-Type":"application/json"}};ce&&(tn.body=JSON.stringify({upload_password:nc})),await ae(`/api/actions/modular/${encodeURIComponent(Ge)}`,tn),window.showInfoModal(Y("workflow.legacy.deleteActionSuccess",{name:ft})),setTimeout(()=>window.location.reload(),1500)}catch(tn){console.error(Y("workflow.legacy.deleteActionFailed",{error:tn.message||tn}),tn),window.showInfoModal(Y("workflow.legacy.deleteActionFailed",{error:tn.message||tn}),!0)}};ce?window.showInputModal(Y("workflow.legacy.passwordRequired"),Y("workflow.legacy.deletePasswordPrompt"),"password",Y("workflow.legacy.passwordPlaceholder"),Qi,()=>{console.log(Y("workflow.legacy.deleteCancelled"))}):Qi()};window.showConfirmModal(Y("workflow.legacy.deleteActionConfirmTitle"),Y("workflow.legacy.deleteActionConfirmMessage",{name:ft}),Ds)}),F},L=()=>{if(_.innerHTML="",!me||typeof me!="object"){_.innerHTML=`<div class="node-palette-empty">${P(Y("workflow.legacy.actionListInvalid"))}</div>`;return}const b=Object.entries(me).filter(([,Q])=>Q&&Q.isModular),I=Z.trim().toLowerCase(),F=b.filter(([Q,K])=>{if(!I)return!0;const _e=x(Q,K).toLowerCase(),ke=(K.description||"").toLowerCase();return _e.includes(I)||ke.includes(I)}).sort(([Q,K],[_e,ke])=>{const De=x(Q,K),be=x(_e,ke),xe=De.localeCompare(be,"zh-Hans-CN",{sensitivity:"base"});return xe!==0?xe:Q.localeCompare(_e,"zh-Hans-CN",{sensitivity:"base"})});if(F.length===0){if(I){const Q=P(Z);_.innerHTML=`<div class="node-palette-empty">${Y("workflow.legacy.actionListEmptyFiltered",{term:Q})}</div>`}else _.innerHTML=`<div class="node-palette-empty">${P(Y("workflow.legacy.actionListEmptyAll"))}</div>`;return}F.forEach(([Q,K])=>{const _e={...K,id:Q};_.appendChild(z(Q,_e))})},G=(b={},I=!1)=>{me=b||{},ce=!!I,L()};E&&!E.dataset.bound&&(E.addEventListener("input",b=>{Z=b.target.value||"",L()}),E.dataset.bound="true"),(()=>{!S||!y||(S.dataset.bound||(S.addEventListener("click",()=>y.click()),S.dataset.bound="true"),y.dataset.bound||(y.addEventListener("change",b=>{const I=b.target.files&&b.target.files[0];if(!I)return;const F=new FileReader;F.onload=Q=>{const K=Q.target.result,_e=async ke=>{const De={filename:I.name,content:K},be=P(I.name);ce&&(De.upload_password=ke);try{await ae("/api/actions/modular/upload",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(De)}),window.showInfoModal(Y("workflow.legacy.uploadSuccess",{name:be})),setTimeout(()=>window.location.reload(),1500)}catch(xe){console.error(Y("workflow.legacy.uploadFailed",{error:xe.message||xe}),xe),window.showInfoModal(Y("workflow.legacy.uploadFailed",{error:xe.message||xe}),!0)}};ce?window.showInputModal(Y("workflow.legacy.passwordRequired"),Y("workflow.legacy.uploadPasswordPrompt"),"password",Y("workflow.legacy.passwordPlaceholder"),_e,()=>{console.log(Y("workflow.legacy.uploadCancelled"))}):_e()},F.readAsText(I),b.target.value=""}),y.dataset.bound="true"))})(),e.addEventListener("drop",b=>{if(b.preventDefault(),b.dataTransfer){const I=b.dataTransfer.getData("text/plain");if(I)try{const F=JSON.parse(I),{x:Q,y:K}=ge(b.clientX,b.clientY);we(F,Q,K)}catch(F){console.error("Failed to parse node data on drop",F)}}}),e.addEventListener("dragover",b=>b.preventDefault());const m=document.getElementById("workflowNameInput"),g=document.getElementById("workflowDescriptionInput"),C=document.getElementById("newWorkflowBtn"),A=document.getElementById("workflowSelector"),T=document.getElementById("deleteWorkflowBtn"),N=document.getElementById("saveWorkflowBtn"),$=(b="")=>{const I=b==null?"":String(b);if(g&&(g.value=I),D){const F=I.trim(),Q=F.replace(/\s+/g," ");D.dataset.hasDescription=F?"true":"false",D.setAttribute("title",F?Y("workflow.legacy.descriptionTitle",{description:Q}):Y("workflow.legacy.descriptionEmptyTitle"))}};$(g?g.value:""),D&&D.addEventListener("click",()=>{const b=g?g.value:"";if(typeof window.showInputModal=="function")window.showInputModal(Y("workflow.legacy.descriptionEditTitle"),Y("workflow.legacy.descriptionEditPrompt"),"textarea",Y("workflow.legacy.descriptionEditPlaceholder"),I=>{$(typeof I=="string"?I:"")},void 0,{defaultValue:b,rows:5});else{const I=window.prompt(Y("workflow.legacy.descriptionPromptFallback"),b);I!==null&&$(I)}});const H=()=>{if(!B||!k)return;B.style.height="",B.style.minHeight="",B.style.maxHeight="",V&&(V.style.maxHeight="");const b=window.matchMedia("(max-width: 960px)").matches;if(R&&R.classList.contains("palette-collapsed"))return;const F=k.getBoundingClientRect().height;if(F>0){const K=Math.max(0,F-(b?96:72));K>0&&(B.style.maxHeight=`${K}px`,V&&(V.style.maxHeight=`${K}px`))}else B.style.maxHeight="",V&&(V.style.maxHeight="")},W="workflow-palette-collapsed",O=(b,I=!1)=>{!R||!j||(I&&R.classList.add("palette-transition-skip"),R.classList.toggle("palette-collapsed",!!b),j.setAttribute("aria-expanded",b?"false":"true"),j.setAttribute("aria-label",Y(b?"workflow.legacy.paletteExpandAria":"workflow.legacy.paletteCollapseAria")),j.title=Y(b?"workflow.legacy.paletteExpandAria":"workflow.legacy.paletteCollapseAria"),ee&&(ee.textContent=Y(b?"workflow.legacy.paletteExpandLabel":"workflow.legacy.paletteCollapseLabel")),I&&requestAnimationFrame(()=>{R.classList.remove("palette-transition-skip")}),requestAnimationFrame(H))};if(j&&R){let b=!1;try{b=localStorage.getItem(W)==="1"}catch(I){console.warn(Y("workflow.legacy.paletteStateReadFailed"),I)}O(b,!0),j.addEventListener("click",()=>{const I=!R.classList.contains("palette-collapsed");O(I);try{localStorage.setItem(W,I?"1":"0")}catch(F){console.warn(Y("workflow.legacy.paletteStateSaveFailed"),F)}})}H(),typeof ResizeObserver=="function"&&k&&new ResizeObserver(()=>H()).observe(k),window.addEventListener("resize",()=>{window.requestAnimationFrame(H)}),window.addEventListener("workflowTabShown",()=>{window.requestAnimationFrame(H)});const ne=async()=>{try{const b=await ae("/api/workflows");if(!b.ok)throw new Error("Failed to fetch workflows");const I=await b.json(),F=A.value;A.innerHTML=`<option value="">${P(Y("workflow.legacy.workflowSelectPlaceholder"))}</option>`,Object.keys(I).forEach(Q=>{const K=document.createElement("option");K.value=Q,K.textContent=I[Q]&&I[Q].name?I[Q].name:Q,A.appendChild(K)}),I[F]&&(A.value=F)}catch(b){console.error("Error populating workflow selector:",b)}},q=async(b=!1)=>{let I=t.currentWorkflowId;const F=m.value.trim(),Q=P(F),K=g.value.trim();if(!F)return b&&!I&&t.getNodesFromName("").length===0?Promise.resolve():(window.showInfoModal(Y("workflow.legacy.workflowNameEmpty"),!0),m.focus(),Promise.reject(new Error("Workflow name cannot be empty.")));if(!I){let be=F.trim().replace(/\s+/g,"-").replace(/[^a-zA-Z0-9-._~]/g,"");if(be||(be=encodeURIComponent(F.trim())),I=be,!I)return window.showInfoModal(Y("workflow.legacy.workflowNameInvalid"),!0),m.focus(),Promise.reject(new Error("Invalid workflow name."))}const _e=t.export(),ke={id:I,name:F,description:K,nodes:{},edges:[]},De=(_e.drawflow.Home||_e.drawflow.main).data;for(const be in De){const xe=De[be],Ue=xe.data.action;if(!Ue){console.warn(Y("workflow.legacy.nodeMissingAction",{id:be}));continue}ke.nodes[xe.id]={id:xe.id.toString(),action_id:Ue.id,position:{x:xe.pos_x,y:xe.pos_y},data:xe.data.data||{}};for(const xt in xe.outputs){const Ze=parseInt(xt.replace("output_",""),10)-1;isNaN(Ze)||xe.outputs[xt].connections.forEach(mt=>{const Be=De[mt.node];if(!Be)return;const Ge=parseInt(mt.output.replace("input_",""),10)-1;if(isNaN(Ge))return;const no=Ue.outputs&&Ue.outputs[Ze]?Ue.outputs[Ze].name:`output_${Ze+1}`,ft=Be.data.action,Ds=ft&&ft.inputs&&ft.inputs[Ge]?ft.inputs[Ge].name:`input_${Ge+1}`;ke.edges.push({id:`edge-${xe.id}-${Be.id}-${Ze}-${Ge}`,source_node:xe.id.toString(),source_output:no,target_node:Be.id.toString(),target_input:Ds})})}}try{const be=await ae(`/api/workflows/${I}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(ke)});if(!be.ok){const xe=await be.json().catch(()=>({error:be.statusText}));throw new Error(Y("workflow.legacy.saveFailed",{error:xe.error}))}return b||window.showInfoModal(Y("workflow.legacy.saveSuccess",{name:Q})),t.currentWorkflowId=I,await ne(),A.value=I,window.dispatchEvent(new CustomEvent("workflowsUpdated")),Promise.resolve()}catch(be){return console.error("Error saving workflow:",be),b||window.showInfoModal(be.message,!0),Promise.reject(be)}},te=async b=>{if(b)try{const I=await ae(`/api/workflows/${b}`);if(!I.ok)throw new Error(Y("workflow.legacy.loadFailed"));const F=await I.json();t.clear(),t.currentWorkflowId=b,m.value=F.name||"",$(F.description||"");const Q=new Map;for(const K in F.nodes){const _e=F.nodes[K],ke=me[_e.action_id];if(!ke){console.warn(Y("workflow.legacy.actionDefinitionMissing",{id:_e.action_id,nodeId:K}));continue}const De=ke.isModular?(ke.inputs||[]).length:1,be=ke.isModular?(ke.outputs||[]).length:1,xe=(ke.inputs||[]).map(Be=>`<div class="port-label port-label-in" title="${P(Be.name)}">${X(P(Be.name),7)}</div>`).join(""),Ue=(ke.outputs||[]).map(Be=>`<div class="port-label port-label-out" title="${P(Be.name)}">${X(P(Be.name),7)}</div>`).join(""),xt=`
                    <div class="node-title" title="${P(ke.name||ke.id)}">${P(ke.name||ke.id)}</div>
                    ${ke.isModular?`
                    <div class="ports-wrapper">
                        <div class="input-ports">${xe}</div>
                        <div class="output-ports">${Ue}</div>
                    </div>
                    `:""}
                `,Ze={action:{...ke,id:_e.action_id},data:_e.data||{}},mt=t.addNode(_e.action_id,Math.max(1,De),Math.max(1,be),_e.position.x,_e.position.y,"workflow-node",Ze,xt,!1);Q.set(_e.id,mt)}(F.edges||[]).forEach(K=>{const _e=Q.get(K.source_node),ke=Q.get(K.target_node);if(_e===void 0||ke===void 0){console.warn(Y("workflow.legacy.connectionMissingNode",{edgeId:K.id}));return}const De=F.nodes[K.source_node],be=F.nodes[K.target_node];if(!De||!be)return;const xe=me[De.action_id],Ue=me[be.action_id];if(!xe||!Ue)return;const xt=xe.isModular?(xe.outputs||[]).findIndex(Ge=>Ge.name===K.source_output):K.source_output==="output"?0:-1,Ze=Ue.isModular?(Ue.inputs||[]).findIndex(Ge=>Ge.name===K.target_input):K.target_input==="input"?0:-1;if(xt===-1||Ze===-1){console.warn(Y("workflow.legacy.connectionPortMissing",{edgeId:K.id}));return}const mt=`output_${xt+1}`,Be=`input_${Ze+1}`;t.addConnection(_e,ke,mt,Be)})}catch(I){console.error(`Failed to load workflow '${b}':`,I),alert(Y("workflow.legacy.loadWorkflowErrorAlert"))}},fe=async()=>{const b=A.value;if(!b)return alert(Y("workflow.legacy.deleteWorkflowSelectFirst"));const I=A.querySelector(`option[value="${b}"]`),F=I?I.textContent:b,Q=P(F);window.showConfirmModal(Y("workflow.legacy.deleteWorkflowConfirmTitle"),Y("workflow.legacy.deleteWorkflowConfirmMessage",{name:Q}),async()=>{try{const K=await ae(`/api/workflows/${b}`,{method:"DELETE"});if(!K.ok){const _e=await K.json().catch(()=>({error:K.statusText}));throw new Error(Y("workflow.legacy.deleteActionFailed",{error:_e.error||"Unknown error"}))}window.showInfoModal(Y("workflow.legacy.deleteWorkflowSuccess",{name:Q})),t.currentWorkflowId===b&&(t.clear(),delete t.currentWorkflowId,m.value="",$("")),await ne()}catch(K){console.error(`Error deleting workflow '${b}':`,K),window.showInfoModal(K.message,!0)}})},Ce=()=>{const b=A.value,I=t.currentWorkflowId||"";b&&((t.getNodesFromName("").length>0||m.value)&&t.currentWorkflowId!==b?window.showConfirmModal(Y("workflow.legacy.loadWorkflowConfirmTitle"),Y("workflow.legacy.loadWorkflowConfirmMessage"),()=>te(b),()=>{A.value=I}):te(b))};e.addEventListener("dblclick",b=>{const I=b.target;if(I.closest(".drawflow-node")&&!I.closest(".input")&&!I.closest(".output")){const Q=I.closest(".drawflow-node").id.split("-")[1];if(Q){const K=t.getNodeFromId(Q);e.dispatchEvent(new CustomEvent("opennodeconfig",{bubbles:!0,detail:{node:K}}))}}});const Le=()=>{t.getNodesFromName("").length>0||m.value?window.showConfirmModal(Y("workflow.legacy.newWorkflowConfirmTitle"),Y("workflow.legacy.newWorkflowConfirmMessage"),()=>{t.clear(),delete t.currentWorkflowId,A.value="",m.value="",$("")}):(t.clear(),delete t.currentWorkflowId,A.value="",m.value="",$(""))};C.addEventListener("click",Le),A.addEventListener("change",Ce),T.addEventListener("click",fe),N.addEventListener("click",()=>q(!1)),window.tgButtonEditor={refreshPalette:(b,I)=>G(b,I),refreshWorkflows:ne,saveCurrentWorkflow:()=>q(!0),updateNodeConfig:(b,I)=>{const F=t.getNodeFromId(b);if(F&&F.data){const Q={...F.data,data:I};t.updateNodeDataFromId(b,Q)}else console.error(Y("workflow.legacy.updateNodeConfigMissing",{id:b}))},getNodeById:b=>{try{return t.getNodeFromId(b)}catch(I){return console.warn(Y("workflow.legacy.getNodeFailed",{id:b}),I),null}}},ne(),console.log("Workflow editor script loaded. Waiting for main app to provide action palette.")}const ap={class:"workflow-page"},cp={id:"workflowSection"},up={class:"workflow-section-header"},dp={class:"workflow-title"},fp={class:"workflow-header-actions"},hp={class:"workflow-primary-actions"},pp=["aria-label"],mp={for:"workflowNameInput",class:"visually-hidden"},gp=["placeholder","aria-label"],wp={id:"editWorkflowDescriptionBtn",class:"secondary workflow-description-btn",type:"button","aria-haspopup":"dialog","data-has-description":"false"},vp={class:"workflow-secondary-actions"},_p={id:"newWorkflowBtn",class:"secondary",type:"button"},yp={id:"saveWorkflowBtn",type:"button"},bp={id:"deleteWorkflowBtn",class:"danger",type:"button"},Ep={class:"workflow-editor-body"},Cp={class:"workflow-canvas-wrapper"},Sp={class:"node-palette-pane"},xp={id:"node-palette",class:"node-palette-container"},Ap={class:"node-palette-header"},Ip={class:"muted"},Rp={class:"node-palette-tools"},kp=["placeholder","aria-label"],Np={id:"uploadModularActionBtn",class:"secondary compact",type:"button"},Tp=["aria-label"],Op=["aria-label"],Dp={class:"visually-hidden node-palette-collapse-label"},Mp=["aria-label"],Pp=["title"],Lp=["title"],Bp=["title"],Fp={class:"modal-container"},Hp={class:"modal-header"},Wp={class:"modal-body"},jp={key:0},Up={class:"muted"},$p={class:"field-input"},zp={key:0,class:"checkbox-label"},Vp=["onUpdate:modelValue"],qp=["onUpdate:modelValue"],Gp={value:""},Kp=["value"],Yp=["onUpdate:modelValue"],Xp={key:0,class:"field-description muted"},Jp={style:{"margin-top":"12px"}},Zp={class:"checkbox-label",style:{"margin-top":"8px"}},Qp={key:1,class:"muted"},em={class:"modal-footer"},tm=to({__name:"WorkflowView",setup(e){const t=qi(),{t:n}=Ts();let o=!1;const s=mn({visible:!1,nodeId:"",action:null,originalData:{}}),r=mn({}),a=kt(""),i=kt(!1),l=dt(()=>s.action?s.action.isModular?s.action.inputs||[]:s.action.isLocal?s.action.parameters||[]:s.action.inputs||[]:[]),u=f=>{var v,_,E,S,y;const h=t.buildActionPalette(),w=((_=(v=f==null?void 0:f.data)==null?void 0:v.action)==null?void 0:_.id)||((S=(E=f==null?void 0:f.data)==null?void 0:E.action)==null?void 0:S.action_id),p=h[w]||null;s.visible=!0,s.nodeId=String((f==null?void 0:f.id)||""),s.action=p,s.originalData={...((y=f==null?void 0:f.data)==null?void 0:y.data)||{}},Object.keys(r).forEach(R=>delete r[R]),l.value.forEach(R=>{r[R.name]=s.originalData[R.name]??R.default??""}),a.value=JSON.stringify(s.originalData||{},null,2),i.value=!1},d=()=>{s.visible=!1},c=()=>{var w;let f={...s.originalData||{}};if(i.value)try{f=JSON.parse(a.value||"{}")}catch(p){(w=window.showInfoModal)==null||w.call(window,n("workflow.jsonParseFailed",{error:p.message||p}),!0);return}else for(const[p,v]of Object.entries(r))f[p]=v;const h=window.tgButtonEditor;h&&typeof h.updateNodeConfig=="function"&&h.updateNodeConfig(s.nodeId,f),s.visible=!1};return Ro(async()=>{var p;!t.loading&&(t.modularActions.length===0||t.localActions.length===0)&&await t.loadAll(),o||(await On(),lp(),o=!0);const f=t.buildActionPalette(),h=window.tgButtonEditor;h!=null&&h.refreshPalette&&h.refreshPalette(f,t.secureUploadEnabled),h!=null&&h.refreshWorkflows&&h.refreshWorkflows(),window.dispatchEvent(new Event("workflowTabShown"));const w=v=>{var E;const _=v;(E=_.detail)!=null&&E.node&&u(_.detail.node)};(p=document.getElementById("drawflow"))==null||p.addEventListener("opennodeconfig",w)}),(f,h)=>(Ie(),Ne("main",ap,[M("section",cp,[M("div",up,[M("h2",dp,ie(J(n)("workflow.title")),1),M("div",fp,[M("div",hp,[M("select",{id:"workflowSelector",class:"secondary","aria-label":J(n)("workflow.selectorAria")},null,8,pp),M("label",mp,ie(J(n)("workflow.nameLabel")),1),M("input",{type:"text",id:"workflowNameInput",placeholder:J(n)("workflow.namePlaceholder"),"aria-label":J(n)("workflow.nameLabel")},null,8,gp),M("button",wp,ie(J(n)("workflow.description")),1)]),M("div",vp,[M("button",_p,ie(J(n)("workflow.create")),1),M("button",yp,ie(J(n)("workflow.save")),1),M("button",bp,ie(J(n)("workflow.remove")),1)])])]),h[5]||(h[5]=M("input",{type:"hidden",id:"workflowDescriptionInput"},null,-1)),M("div",Ep,[M("div",Cp,[h[4]||(h[4]=M("div",{id:"drawflow"},null,-1)),M("div",Sp,[M("div",xp,[M("div",Ap,[M("div",null,[M("h4",null,ie(J(n)("workflow.paletteTitle")),1),M("p",Ip,ie(J(n)("workflow.paletteSubtitle")),1)]),M("div",Rp,[M("input",{type:"search",id:"nodePaletteSearch",placeholder:J(n)("workflow.paletteSearch"),"aria-label":J(n)("workflow.paletteSearchAria")},null,8,kp),M("button",Np,ie(J(n)("workflow.paletteUpload")),1)])]),h[2]||(h[2]=M("input",{type:"file",id:"nodePaletteUploadInput",accept:".py",hidden:""},null,-1)),M("div",{id:"nodePaletteList",class:"node-palette-scroll",role:"list","aria-label":J(n)("workflow.paletteList")},null,8,Tp)]),M("button",{id:"nodePaletteCollapseBtn",class:"node-palette-collapse",type:"button","aria-expanded":"true","aria-controls":"node-palette","aria-label":J(n)("workflow.paletteCollapse")},[M("span",Dp,ie(J(n)("workflow.paletteCollapse")),1)],8,Op)]),M("div",{class:"workflow-zoom-controls",role:"group","aria-label":J(n)("workflow.zoomLabel")},[M("button",{id:"workflowZoomOut",class:"secondary",type:"button",title:J(n)("workflow.zoomOut")},"-",8,Pp),h[3]||(h[3]=M("span",{id:"workflowZoomValue",class:"workflow-zoom-display"},"100%",-1)),M("button",{id:"workflowZoomIn",class:"secondary",type:"button",title:J(n)("workflow.zoomIn")},"+",8,Lp),M("button",{id:"workflowZoomReset",class:"secondary",type:"button",title:J(n)("workflow.zoomReset")},ie(J(n)("workflow.zoomReset")),9,Bp)],8,Mp)])])]),s.visible?(Ie(),Ne("div",{key:0,class:"modal-overlay visible",onClick:va(d,["self"])},[M("div",Fp,[M("div",Hp,[M("h2",null,ie(J(n)("workflow.nodeEdit")),1),M("button",{class:"close-btn",onClick:d},"")]),M("div",Wp,[s.action?(Ie(),Ne("div",jp,[M("p",Up,ie(s.action.name||s.action.id),1),(Ie(!0),Ne(st,null,Wn(l.value,w=>(Ie(),Ne("div",{key:w.name,class:"field"},[M("label",null,ie(w.name),1),M("div",$p,[w.type==="boolean"||w.type==="bool"?(Ie(),Ne("label",zp,[Pt(M("input",{type:"checkbox","onUpdate:modelValue":p=>r[w.name]=p},null,8,Vp),[[mi,r[w.name]]]),Nn(" "+ie(w.description||""),1)])):w.options&&w.options.length?Pt((Ie(),Ne("select",{key:1,"onUpdate:modelValue":p=>r[w.name]=p},[M("option",Gp,ie(J(n)("workflow.selectPlaceholder")),1),(Ie(!0),Ne(st,null,Wn(w.options,p=>(Ie(),Ne("option",{key:p.value,value:p.value},ie(p.label||p.value),9,Kp))),128))],8,qp)),[[ga,r[w.name]]]):Pt((Ie(),Ne("textarea",{key:2,"onUpdate:modelValue":p=>r[w.name]=p,rows:"3"},null,8,Yp)),[[vn,r[w.name]]])]),w.description?(Ie(),Ne("p",Xp,ie(w.description),1)):hn("",!0)]))),128)),M("details",Jp,[M("summary",null,ie(J(n)("workflow.advancedJson")),1),Pt(M("textarea",{"onUpdate:modelValue":h[0]||(h[0]=w=>a.value=w),rows:"6"},null,512),[[vn,a.value]]),M("label",Zp,[Pt(M("input",{type:"checkbox","onUpdate:modelValue":h[1]||(h[1]=w=>i.value=w)},null,512),[[mi,i.value]]),Nn(" "+ie(J(n)("workflow.useRawJson")),1)])])])):(Ie(),Ne("div",Qp,ie(J(n)("workflow.nodeMissing")),1))]),M("div",em,[M("button",{class:"secondary",onClick:d},ie(J(n)("common.cancel")),1),M("button",{onClick:c},ie(J(n)("common.ok")),1)])])])):hn("",!0)]))}}),nm={class:"login-page"},om={class:"login-card"},sm={class:"muted"},im=["placeholder"],rm=["disabled"],lm={key:0,class:"muted",style:{color:"var(--danger-primary)"}},am=to({__name:"LoginView",setup(e){const t=kt(""),n=kt(!1),o=kt(""),s=La(),{t:r}=Ts(),a=async()=>{if(o.value="",!t.value.trim()){o.value=r("login.emptyToken");return}n.value=!0;try{if(Wf(t.value.trim()),!(await Fa("/api/health")).ok)throw new Error(r("login.authFailed"));await s.push({name:"buttons"})}catch(i){o.value=(i==null?void 0:i.message)||r("login.authFailed")}finally{n.value=!1}};return(i,l)=>(Ie(),Ne("div",nm,[M("div",om,[M("h2",null,ie(J(r)("login.title")),1),M("p",sm,ie(J(r)("login.subtitle")),1),Pt(M("input",{"onUpdate:modelValue":l[0]||(l[0]=u=>t.value=u),type:"password",placeholder:J(r)("login.placeholder")},null,8,im),[[vn,t.value]]),M("button",{onClick:a,disabled:n.value},ie(n.value?J(r)("login.submitting"):J(r)("login.submit")),9,rm),o.value?(Ie(),Ne("p",lm,ie(o.value),1)):hn("",!0)])]))}}),cm=(e,t)=>{const n=e.__vccOpts||e;for(const[o,s]of t)n[o]=s;return n},um=cm(am,[["__scopeId","data-v-64ab700c"]]),dm=[{path:"/login",name:"login",component:um,meta:{public:!0}},{path:"/",name:"buttons",component:np},{path:"/workflow",name:"workflow",component:tm}],tc=Ff({history:vf(),routes:dm});tc.beforeEach(e=>e.meta.public||Ba()?!0:{name:"login"});const Zi=Sd(dh);Zi.use(Id());Zi.use(tc);Zi.mount("#app");
